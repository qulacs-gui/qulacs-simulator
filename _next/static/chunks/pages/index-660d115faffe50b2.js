/*! For license information please see index-660d115faffe50b2.js.LICENSE.txt */
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{87314:function(t,e,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return a(62771)}])},62771:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return zn}});var n=a(52322),r=a(53476),o=a(2784),i=a(76539);const u=1;var s=a(53416);const c={EMPTY:{type:"empty",size:1}},l={CONTROL_QUBIT:{type:"control_qubit",connectedMultiGate:{type:"cnot",position:[0,0]},size:1}},p={X:{type:"x",size:1},Y:{type:"y",size:1},Z:{type:"z",size:1}},d={...p,H:{type:"h",size:1},T:{type:"t",size:1},S:{type:"s",size:1}},m={RX:{type:"rx",param:0,size:1},RY:{type:"ry",param:0,size:1},RZ:{type:"rz",param:0,size:1}},f={CNOT:{type:"cnot",controllQubitIndex:[0],size:2},CCNOT:{type:"ccnot",controllQubitIndex:[0],size:3}},h={...c,...p},v={...c,...l,...d,...m,...f},b=t=>"empty"===t.type,y=t=>"rx"===t.type||"ry"===t.type||"rz"===t.type,g=t=>"cnot"===t.type||"ccnot"===t.type,x=t=>"control_qubit"===t.type,_=t=>!b(t.item)&&"control_qubit"!==t.item.type,w=t=>({item:t,id:(0,s.x0)()}),q=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:v.EMPTY;return new Array(t).fill("").map((()=>w(e)))},j=(0,r.cn)({key:"circuitGateItemsAtom",default:[q(u)],dangerouslyAllowMutability:!0}),O=(0,r.cn)({key:"circuitSelectedParametricGateState",default:null}),C=(0,r.nZ)({key:"circuiteGateItemsState",get:t=>{let{get:e}=t;return e(j)},set:(t,e)=>{let{set:a}=t;if(!(e instanceof r.nY))if(e[e.length-1].some((t=>{let{item:e}=t;return!b(e)})))e.push(q(e[0].length));else for(let t=e.length-1;t>0;t-=1){if(!e[t-1].every((t=>{let{item:e}=t;return b(e)})))break;e.pop()}a(j,e)},dangerouslyAllowMutability:!0}),R=(0,r.cn)({key:"observableGateItemsAtom",default:[q(u)],dangerouslyAllowMutability:!0}),S=(0,r.cn)({key:"observableCoefficientsState",default:[0],dangerouslyAllowMutability:!0}),k=(0,r.nZ)({key:"observableeGateItemsState",get:t=>{let{get:e}=t;return e(R)},set:(t,e)=>{let{get:a,set:n}=t;const o=a(S).slice();if(!(e instanceof r.nY))if(e[e.length-1].some((t=>{let{item:e}=t;return!b(e)})))e.push(q(e[0].length)),o.push(0);else for(let t=e.length-1;t>0;t-=1){if(!e[t-1].every((t=>{let{item:e}=t;return b(e)})))break;e.pop(),o.pop()}n(S,o),n(R,e)},dangerouslyAllowMutability:!0}),M=(t,e,a)=>{const n=t,[r,o]=e,[i,u]=a;return[n[r][o],n[i][u]]=[n[i][u],n[r][o]],n},E=t=>"desc"===t?(t,e)=>e-t:(t,e)=>t-e,T=(t,e,a,n)=>{const[r,o]=a,{type:i}=e,u=null!=n?n:((t,e,a)=>{const[n,r]=a,o=t[r],i=t=>t.every((t=>{var e;return"empty"===(null===(e=o[t])||void 0===e?void 0:e.item.type)})),u=new Array(e.size-1).fill(""),s=u.map(((t,e)=>n-(e+1))),c=u.map(((t,e)=>n+(e+1)));if(i(s))return s;if(i(c))return c;const l=[n-1,n+1];return"ccnot"===e.type&&i(l)?l:[]})(t,e,a).sort(E("asc"));return t[o]=t[o].map(((t,e)=>u.includes(e)?w({...l.CONTROL_QUBIT,connectedMultiGate:{position:a,type:i}}):e===r?((t,e)=>{const a="cnot"===t?v.CNOT:v.CCNOT;return w({...a,controllQubitIndex:e})})(i,u):t)),t},I=(t,e,a)=>{const[n,r]=a,o=t.slice();return o[r].splice(n,1,e),o},Q=(t,e,a)=>{const n=I(t,w(e),a);return g(e)?T(n,e,a):n},Z=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return t.map((t=>[...t,...q(e,v.EMPTY)]))},N=(t,e,a)=>{const n=I(t,w(v.EMPTY),a);if(g(e)){const[,t]=a,[r,o]=e.controllQubitIndex;for(let e=r;e<=(null!=o?o:r);e+=1)n[t].splice(e,1,w(v.EMPTY))}if(x(e)){const[a,n]=e.connectedMultiGate.position;N(t,t[n][a].item,[a,n])}return n},G=t=>{let e=t.slice();return t.forEach(((t,a)=>{if(t.length>1){const n=t.length-1;e=N(e,t[n].item,[n,a])}})),e.forEach((t=>{t.pop()})),e},P=(t,e,a,n)=>{if(g(e))return Q(N(t,e,a),e,n);if(x(e))return((t,e,a,n)=>{const[r]=a,[o]=n,{position:i}=e.connectedMultiGate,[u,s]=i,{item:c}=t[s][u];if(!g(c))throw new Error("Update item is NOT MultiGate type. target:".concat(c.type));const l=c.controllQubitIndex.findIndex((t=>t===r)),p=c.controllQubitIndex.map(((t,e)=>e===l?o:t)).sort(E("asc")),d=I(N(t,c,i),w(c),i);return T(d,c,i,p),d})(t,e,a,n);const[r,o]=a,[i,u]=n;return M(t.slice(),[o,r],[u,i])},A=(t,e,a)=>{const[n,r]=a,o=t.slice();return o[r].splice(n,1,e),o},V=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return t.map((t=>[...t,...q(e,h.EMPTY)]))},L=t=>{const e=t.slice();return e.forEach((t=>{t.length>1&&t.pop()})),e},D=o.createContext(null),Y=()=>(0,o.useContext)(D),z=t=>{let{children:e}=t;const[a,s]=(0,r.FV)(O),c=(0,r.Zl)(k),[l,p]=(0,r.FV)(C),{gateItemsColumnLength:d,gateItemsRowLength:m}=(0,o.useMemo)((()=>({gateItemsColumnLength:l.length,gateItemsRowLength:l[0].length})),[l]),f=(0,i.Z)(m),h=(0,o.useCallback)((()=>{m>=5||p((t=>Z(t)))}),[p,m]),v=(0,o.useCallback)((()=>{m<=u||p((t=>G(t)))}),[p,m]),b=(0,o.useCallback)(((t,e)=>{p((a=>Q(a,t,e)))}),[p]),y=(0,o.useCallback)(((t,e)=>{p((a=>N(a,t,e)))}),[p]),g=(0,o.useCallback)(((t,e,a)=>{p((n=>P(n,t,e,a)))}),[p]),x=(0,o.useCallback)(((t,e)=>{p((a=>((t,e,a)=>I(t,w(e),a))(a,t,e)))}),[p]),_=(0,o.useCallback)((t=>{const e=t.gateItems,a=e[0].length;p(e),c((t=>t[0].length<a?V(t,a-t[0].length):t))}),[p,c]),j=(0,o.useCallback)((()=>{s(null),p([q(m)])}),[s,p,m]),R=(0,o.useMemo)((()=>({selectedParametricGate:a,gateItems:l,gateItemsColumnLength:d,gateItemsRowLength:m,updateSelectedParametricGate:s,addGateItemsRow:h,removeGateItemsRow:v,addGateItem:b,removeGateItem:y,moveGateItem:g,updateGateItem:x,replace:_,reset:j})),[a,l,d,m,s,h,v,b,y,g,x,_,j]);return(0,o.useEffect)((()=>{null!=f&&m!==f&&c((t=>t[0].length>m?L(t):t))}),[m]),(0,n.jsx)(D.Provider,{value:R,children:e})},B=o.createContext(null),X=()=>(0,o.useContext)(B),F=t=>{let{children:e}=t;const[a,s]=(0,r.FV)(S),c=(0,r.Zl)(C),[l,p]=(0,r.FV)(k),{gateItemsColumnLength:d,gateItemsRowLength:m}=(0,o.useMemo)((()=>({gateItemsColumnLength:l.length,gateItemsRowLength:l[0].length})),[l]),f=(0,i.Z)(m),v=(0,o.useCallback)(((t,e)=>{s((a=>{const n=a.slice();return n.splice(t,1,e),n}))}),[s]),b=(0,o.useCallback)((()=>{m>=5||p((t=>V(t)))}),[p,m]),y=(0,o.useCallback)((()=>{m<=u||p((t=>L(t)))}),[p,m]),g=(0,o.useCallback)(((t,e)=>{p((a=>((t,e,a)=>A(t,w(e),a))(a,t,e)))}),[p]),x=(0,o.useCallback)((t=>{p((e=>((t,e)=>A(t,w(h.EMPTY),e))(e,t)))}),[p]),_=(0,o.useCallback)(((t,e)=>{p((a=>((t,e,a)=>{const[n,r]=e,[o,i]=a;return M(t.slice(),[r,n],[i,o])})(a,t,e)))}),[p]),j=(0,o.useCallback)((t=>{const e=t.gateItems,a=e[0].length;s(t.coefficients),p(e),c((t=>t[0].length<a?Z(t,a-t[0].length):t))}),[s,p,c]),O=(0,o.useCallback)((()=>{s([0]),p([q(m)])}),[m,s,p]),R=(0,o.useMemo)((()=>({coefficients:a,updateCoefficients:v,gateItems:l,gateItemsColumnLength:d,gateItemsRowLength:m,addGateItemsRow:b,removeGateItemsRow:y,addGateItem:g,removeGateItem:x,moveGateItem:_,replace:j,reset:O})),[a,v,l,d,m,b,y,g,x,_,j,O]);return(0,o.useEffect)((()=>{null!=f&&m!==f&&c((t=>t[0].length>m?G(t):t))}),[m]),(0,n.jsx)(B.Provider,{value:R,children:e})};var H=a(79520),U=a(52499),W=a(6897),K=a(62048),J=a(94199),$=a(25665),tt=a(69825);const et=(0,r.cn)({key:"appUIState",default:{isCodeViewTabOpened:!1}}),at=()=>{const[t,e]=(0,r.FV)(et);return{appUIState:t,setAppUIState:(0,o.useCallback)((t=>{e((e=>({...e,...t})))}),[e])}};var nt=a(12439),rt=a.n(nt);const ot=(0,J.ZP)(K.Z)({color:"#fff"}),it=()=>{const{setAppUIState:t}=at(),e=(0,o.useCallback)((()=>{t({isCodeViewTabOpened:!0})}),[t]);return(0,n.jsx)(W.Z,{position:"static",children:(0,n.jsxs)($.Z,{variant:"dense",children:[(0,n.jsx)("div",{className:rt().heading,children:(0,n.jsx)(tt.Z,{variant:"h6",noWrap:!0,children:"Qulacs Simulator"})}),(0,n.jsxs)(ot,{onClick:e,children:[(0,n.jsx)(U.Z,{}),(0,n.jsx)(tt.Z,{sx:{ml:1},variant:"overline",children:"show code"})]})]})})};var ut=a(92096);const st=(t,e)=>Math.round(t*10**e)/10**e,ct=(t,e)=>"0000".concat(t.toString(2)).slice(-e);var lt=a(61660),pt=a(80739),dt=a(55484),mt=a(25556),ft=a(81224),ht=a(3131),vt=a(47857),bt=a(24908),yt=a(11011),gt=a(84471),xt=a.n(gt);const _t=t=>{let{active:e,payload:a}=t;if(e&&null!=a&&a.length>0){const t=a[0].payload;return(0,n.jsxs)("div",{className:xt().tooltipWrapper,children:[(0,n.jsx)("p",{className:xt().tooltipLabel,children:t.name}),(0,n.jsxs)("div",{className:xt().tooltipValue,children:[(0,n.jsx)("p",{className:xt().tooltipLabel,children:"stateVectorAbsoluted: ".concat(t.stateVectorAbsoluted)}),(0,n.jsx)("p",{className:xt().tooltipLabel,children:"stateVectorArgument: ".concat(t.stateVectorArgument)}),(0,n.jsx)("p",{className:xt().tooltipLabel,children:"stateVector: ".concat(t.stateVector.re).concat((r=t.stateVector.im,r>=0?"+".concat(r):r),"i")})]})]})}var r;return null},wt=t=>{let{data:e}=t;return(0,n.jsx)(lt.h,{width:"100%",height:"100%",children:(0,n.jsxs)(pt.v,{data:e,children:[(0,n.jsx)(dt.q,{strokeDasharray:"3 3"}),(0,n.jsx)(mt.K,{dataKey:"name",children:(0,n.jsx)(ft._,{value:"Computational basis states",offset:0,position:"insideBottom"})}),(0,n.jsx)(ht.B,{domain:[0,1],children:(0,n.jsx)(ft._,{value:"Amplitude Value",angle:-90,position:"insideBottomLeft"})}),(0,n.jsx)(vt.u,{content:(0,n.jsx)(_t,{})}),(0,n.jsx)(bt.$,{dataKey:"stateVectorAbsoluted",children:e.map((t=>{let{name:e,stateVectorArgument:a}=t;return(0,n.jsx)(yt.b,{fill:(r=a,"hsl(".concat(180*r,", 100%, 70%)"))},"cell-".concat(e));var r}))})]})})},qt=(t,e)=>t.updateResult===e.updateResult,jt=o.memo((t=>{let{updateResult:e}=t;const{gateItemsRowLength:a}=Y(),r=(0,o.useMemo)((()=>{const t=[];for(let n=0;n<e.stateVectorAbsoluted.length;n+=1)t.push({name:ct(n,a),stateVector:{re:st(e.stateVector[n].re,5),im:st(e.stateVector[n].im,5)},stateVectorAbsoluted:st(e.stateVectorAbsoluted[n],5),stateVectorArgument:st(e.stateVectorArgument[n],5)});return t}),[e,a]);return(0,n.jsx)(wt,{data:r})}),qt);var Ot=a(90734),Ct=a.n(Ot),Rt=a(60995),St=a(36197),kt=a(30840),Mt=a(63004);const Et=t=>{let{data:e,onRequestChangeParam:a}=t;const r=(0,o.useMemo)((()=>{var t;return null===(t=e.find((t=>{let{currentExpectationValue:e}=t;return null!=e})))||void 0===t?void 0:t.param}),[e]),i=(0,o.useMemo)((()=>e.length>0?["auto","auto"]:[0,1]),[e.length]),u=(0,o.useCallback)(((t,e)=>{const{payload:n}=e;null!=(null==n?void 0:n.param)&&a(n.param)}),[a]);return(0,n.jsx)(lt.h,{width:"100%",height:"100%",children:(0,n.jsxs)(Rt.c,{data:e,children:[(0,n.jsx)(dt.q,{strokeDasharray:"3 3"}),(0,n.jsx)(mt.K,{dataKey:"param",domain:[0,2],unit:"π",type:"number",children:(0,n.jsx)(ft._,{value:"Angle",offset:0,position:"insideBottom"})}),(0,n.jsx)(ht.B,{domain:i,children:(0,n.jsx)(ft._,{value:"Expectation Value",angle:-90,position:"insideBottomLeft"})}),(0,n.jsx)(vt.u,{}),(0,n.jsx)(St.b,{dataKey:"currentExpectationValue",fill:"#ff7300"}),null!=r&&(0,n.jsx)(kt.d,{x:r,stroke:"#ff7300"}),(0,n.jsx)(Mt.x,{dataKey:"expectationValue",type:"monotone",dot:!1,activeDot:{onClick:u,r:5}})]})})},Tt=[],It=(t,e)=>t.currentExpectationValue===e.currentExpectationValue&&t.parametricExpectedValueResult===e.parametricExpectedValueResult,Qt=o.memo((t=>{let{currentExpectationValue:e,parametricExpectedValueResult:a}=t;const{gateItems:r,selectedParametricGate:i,updateGateItem:u,updateSelectedParametricGate:s}=Y(),[c,l]=(0,o.useState)(Tt);(0,o.useEffect)((()=>{const t=((t,e,a)=>{var n;if(null==e)return null;const[r,o]=e;var i;const u=null===(n=(null!==(i=t[o])&&void 0!==i?i:[])[r])||void 0===n?void 0:n.item;if(null==u||!y(u))return null;const s=st(a,5);return{param:u.param,expectationValue:s,currentExpectationValue:s}})(r,i,e);if(null==t)return s(null),void l(Tt);const n=[],{expectationValueMap:o}=a;for(let e=0;e<o.length;e+=1){const{param:a,expectationValue:r}=o[e];n.push({param:a,expectationValue:st(r,5)}),a===t.param?n[n.length-1].currentExpectationValue=t.currentExpectationValue:e<o.length-1&&Ct()(t.param,a,o[e+1].param)&&n.push(t)}l(n)}),[r,i,e,a,s]);const p=(0,o.useCallback)((t=>{if(null!=i){const[e,a]=i,{item:n}=r[a][e];y(n)&&u({...n,param:t},i)}}),[r,i,u]);return(0,n.jsx)(Et,{data:c,onRequestChangeParam:p})}),It),Zt=t=>{let{data:e,scale:a="auto"}=t;return(0,n.jsx)(lt.h,{width:"100%",height:240,children:(0,n.jsxs)(Rt.c,{data:e,children:[(0,n.jsx)(dt.q,{strokeDasharray:"3 3"}),(0,n.jsx)(mt.K,{dataKey:"name",children:(0,n.jsx)(ft._,{value:"Computational basis states",offset:0,position:"insideBottom"})}),(0,n.jsx)(ht.B,{yAxisId:"1",domain:["auto","auto"],scale:a,children:(0,n.jsx)(ft._,{value:"Probability Value",angle:-90,position:"insideBottomLeft"})}),(0,n.jsx)(ht.B,{yAxisId:"2",orientation:"right",hide:!0}),(0,n.jsx)(vt.u,{}),(0,n.jsx)(bt.$,{dataKey:"samplingMap",yAxisId:"2",fill:"#82ca9d",fillOpacity:"0.4"}),(0,n.jsx)(Mt.x,{type:"linear",dataKey:"probabilityVector",yAxisId:"1",dot:!1})]})})};var Nt=a(17952);const Gt="observableInformation",Pt="selectedParametricQuantumGatePosition",At=(q(),q(),{["updateResult"]:{expectationValue:0,stateVector:[],stateVectorAbsoluted:[],stateVectorArgument:[],probabilityVector:[],codes:{translateCodes:{qiskit:"",qulacs:"",pennylane:""},observableCodes:{openFermion:""},circuitCodes:{qasm2:""}}},["shotResult"]:{samplingMap:[],samplingProbabilityMap:[]},["parametricExpectedValueResult"]:{steps:10,expectationValueMap:[]}});var Vt=a(59186);const Lt=t=>{const{gateItems:e}=t,a=e.map((t=>t.map((t=>_(t)?t.item:void 0))));return{circuit:a,size:a[0].length}},Dt=t=>{const{coefficients:e,gateItems:a}=t;return{observable:a.map(((t,a)=>({operators:t.map((t=>_(t)?t.item.type:void 0)),coefficient:e[a]})))}},Yt=new(0,Vt.v.BrowserUIClient)({parametricGateRange:2}),zt=(0,r.nZ)({key:"clientDataState",get:t=>{let{get:e}=t;const a=e(C),n=e(k);return{circuitInformation:{gateItems:a},observableInformation:{coefficients:e(S),gateItems:n}}},dangerouslyAllowMutability:!0}),Bt=(0,r.cn)({key:"simulatorResultAtom",default:At}),Xt=(0,r.nZ)({key:"simulatorResultState",get:async t=>{let{get:e}=t;const a=e(Bt),n=e(zt);try{const t={circuitInformation:Lt((r=n).circuitInformation),observableInformation:Dt(r.observableInformation)};if(!Yt.validate(t))return a;const o=await Yt.update(t),i=e(O);if(null!=i){const t=await Yt.requestParametricExpectedValues(function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:51;const[a,n]=t;return{steps:e,position:{step:n,index:a}}}(i));return{...a,updateResult:o,parametricExpectedValueResult:t}}return{...a,updateResult:o,parametricExpectedValueResult:At.parametricExpectedValueResult}}catch(t){}var r;return a},set:(t,e)=>{let{set:a}=t;return a(Bt,e)}}),Ft=o.createContext(null),Ht=()=>(0,o.useContext)(Ft),Ut=t=>{let{children:e}=t;const a=(0,r.$P)(Xt),[i,u]=(0,o.useState)(At),s=(0,o.useRef)(),c=(0,o.useMemo)((()=>"loading"===a.state),[a.state]),l=(0,o.useCallback)((t=>{u((e=>({...e,shotResult:t})))}),[]);(0,o.useEffect)((()=>{a.state!==s.current&&"hasValue"===a.state&&u(a.contents),s.current=a.state}),[a.state]);const p=(0,o.useMemo)((()=>({simulatorResult:i,isLoading:c,updateShotResult:l})),[i,c,l]);return(0,n.jsx)(Ft.Provider,{value:p,children:e})};var Wt=a(487),Kt=a.n(Wt);const Jt=1e3,$t=(0,J.ZP)(tt.Z)({marginRight:"5px"}),te=(0,J.ZP)(Nt.Z)({width:"60px"}),ee=(0,J.ZP)(K.Z)({marginLeft:"10px"}),ae=()=>{const{updateShotResult:t}=Ht(),[e,a]=(0,o.useState)(!1),[r,i]=(0,o.useState)(0),u=(0,o.useMemo)((()=>"number"!=typeof r||e),[r,e]),s=(0,o.useCallback)((t=>{const e=t.target.value;i(""===e?"":parseInt(e,10))}),[]),c=(0,o.useCallback)((async()=>{try{if("number"!=typeof r)return;a(!0);const e=await Yt.startShot({shot:r});t(e)}catch(t){}finally{a(!1)}}),[r,t]),l=(0,o.useCallback)((()=>{"number"!=typeof r||r<0?i(0):r>Jt&&i(Jt)}),[r]);return(0,n.jsxs)("div",{className:Kt().wrapper,children:[(0,n.jsx)($t,{variant:"caption",children:"Sampling Count:"}),(0,n.jsx)(te,{value:r,onChange:s,onBlur:l,inputProps:{min:0,max:Jt,step:1,type:"number"}}),(0,n.jsx)(ee,{variant:"outlined",color:"primary",size:"small",disabled:u,onClick:c,children:"Run"})]})};var ne=a(88110),re=a(11782);const oe=(0,J.ZP)(tt.Z)({marginRight:"5px"}),ie=(t,e)=>t.value===e.value,ue=o.memo((t=>{let{value:e,onChange:a}=t;const r=(0,o.useCallback)((t=>{const{value:e}=t.target;(t=>"string"==typeof t)(e)&&a(e)}),[a]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(oe,{variant:"caption",children:"Scale:"}),(0,n.jsxs)(re.Z,{variant:"standard",value:e,onChange:r,children:[(0,n.jsx)(ne.Z,{value:"auto",children:"Auto"}),(0,n.jsx)(ne.Z,{value:"log",children:"Log"})]})]})}),ie);var se=a(60394),ce=a.n(se);const le=t=>{let{data:e}=t;const[a,r]=(0,o.useState)("auto");return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(Zt,{data:e,scale:a}),(0,n.jsxs)("div",{className:ce().control,children:[(0,n.jsx)(ue,{value:a,onChange:r}),(0,n.jsx)(ae,{})]})]})},pe=(t,e)=>t.updateResult===e.updateResult&&t.shotResult===e.shotResult,de=o.memo((t=>{let{updateResult:e,shotResult:a}=t;const{gateItemsRowLength:r}=Y(),i=(0,o.useMemo)((()=>{const t=[];for(let n=0;n<e.stateVectorAbsoluted.length;n+=1)t.push({name:ct(n,r),probabilityVector:st(e.probabilityVector[n],5),samplingMap:a.samplingMap[n]});return t}),[e,a,r]);return(0,n.jsx)(le,{data:i})}),pe);var me=a(40547),fe=a.n(me);const he=(0,J.ZP)(ut.Z)({height:"100%",padding:"8px 15px",overflowY:"auto"}),ve=()=>{const{simulatorResult:{updateResult:t,parametricExpectedValueResult:e,shotResult:a}}=Ht();return(0,n.jsxs)("div",{className:fe().wrapper,children:[(0,n.jsx)("div",{className:fe().tab,children:(0,n.jsx)(he,{variant:"outlined",children:(0,n.jsx)(jt,{updateResult:t})})}),(0,n.jsx)("div",{className:fe().tab,children:(0,n.jsx)(he,{variant:"outlined",children:(0,n.jsx)(de,{updateResult:t,shotResult:a})})}),(0,n.jsx)("div",{className:fe().tab,children:(0,n.jsx)(he,{variant:"outlined",children:(0,n.jsx)(Qt,{currentExpectationValue:t.expectationValue,parametricExpectedValueResult:e})})})]})};var be=a(6060),ye=a(13091),ge=a(92794),xe=a(25674),_e=a(5971),we=a(35936),qe=a(98235),je=a(25237),Oe=a.n(je),Ce=a(7522);const Re=(t,e)=>t.value===e.value,Se=o.memo((t=>{let{value:e}=t;const{enqueueSnackbar:a}=(0,H.Ds)(),r=(0,o.useCallback)((()=>{null!=navigator.clipboard&&(navigator.clipboard.writeText(e),a("Copied!",{variant:"success"}))}),[e,a]);return(0,n.jsx)(K.Z,{variant:"outlined",size:"small",startIcon:(0,n.jsx)(Ce.Z,{}),onClick:r,children:"copy"})}),Re),ke=Oe()((()=>Promise.all([a.e(32),a.e(220),a.e(262)]).then(a.bind(a,40262)).then((t=>t.CodeEditor))),{loadableGenerated:{webpack:()=>[40262]},ssr:!1,loading:()=>(0,n.jsx)("div",{style:{width:"100%",height:"500px",backgroundColor:"#272822"}})}),Me=(0,qe.Z)(we.Z)({display:"flex",justifyContent:"space-between"}),Ee=t=>{let{isOpened:e,defaultValue:a,onSave:r,onRequestClose:i}=t;const[u,s]=(0,o.useState)(a),c=(0,o.useCallback)((t=>{s(t)}),[]),l=(0,o.useCallback)((()=>{r(u)}),[u,r]);return(0,o.useEffect)((()=>{s(a)}),[a]),(0,n.jsxs)(ye.Z,{open:e,maxWidth:"md",fullWidth:!0,onClose:i,children:[(0,n.jsxs)(Me,{children:["Edit Code",(0,n.jsx)(Se,{value:u})]}),(0,n.jsx)(be.Z,{children:(0,n.jsx)(ke,{value:u,onChange:c})}),(0,n.jsxs)(_e.Z,{children:[(0,n.jsx)(K.Z,{onClick:i,color:"primary",children:"Cancel"}),(0,n.jsx)(K.Z,{onClick:l,color:"primary",autoFocus:!0,children:"Save"})]})]})};var Te=a(41577),Ie=a.n(Te);const Qe=(t,e)=>t.isOpened===e.isOpened,Ze=o.memo((t=>{let{isOpened:e,codes:a,onRequestClose:r}=t;const[i,u]=(0,o.useState)("qulacs"),s=(0,o.useMemo)((()=>a.translateCodes[i]),[a,i]),c=(0,o.useCallback)(((t,e)=>{u(e)}),[]);return(0,n.jsx)(ye.Z,{open:e,maxWidth:"md",fullWidth:!0,onClose:r,children:(0,n.jsxs)(be.Z,{children:[(0,n.jsxs)("div",{className:Ie().heading,children:[(0,n.jsxs)(xe.Z,{color:"primary",size:"small",value:i,exclusive:!0,onChange:c,children:[(0,n.jsx)(ge.Z,{value:"qulacs",children:"Qulacs"}),(0,n.jsx)(ge.Z,{value:"qiskit",children:"Qiskit"}),(0,n.jsx)(ge.Z,{value:"pennylane",children:"Pennylane"})]}),(0,n.jsx)(Se,{value:s})]}),(0,n.jsx)(ke,{value:s})]})})}),Qe),Ne=()=>{const{appUIState:t,setAppUIState:e}=at(),{simulatorResult:{updateResult:a}}=Ht(),r=(0,o.useCallback)((()=>{e({isCodeViewTabOpened:!1})}),[e]);return(0,n.jsx)(Ze,{isOpened:t.isCodeViewTabOpened,codes:a.codes,onRequestClose:r})};var Ge=a(72779),Pe=a.n(Ge),Ae=a(74974),Ve=a(85801),Le=a(26567);const De=t=>{let{onClick:e}=t;const a=(0,o.useCallback)((()=>{e()}),[e]);return(0,n.jsx)(Le.Z,{title:"Reset",arrow:!0,children:(0,n.jsx)(Ve.Z,{color:"primary",size:"small",onClick:a,children:(0,n.jsx)(Ae.Z,{})})})},Ye=t=>{let{onClick:e}=t;return(0,n.jsx)(Le.Z,{title:"Show code",arrow:!0,children:(0,n.jsx)(Ve.Z,{color:"primary",size:"small",onClick:e,children:(0,n.jsx)(U.Z,{})})})},ze=()=>{const[t,e]=(0,o.useState)(!1);return{isOpened:t,open:(0,o.useCallback)((()=>{e(!0)}),[]),close:(0,o.useCallback)((()=>{e(!1)}),[])}},Be=(t,e)=>t.isOpened===e.isOpened,Xe=o.memo((t=>{let{isOpened:e,onRequestClose:a}=t;const{enqueueSnackbar:r}=(0,H.Ds)(),{simulatorResult:i}=Ht(),{gateItemsRowLength:u}=Y(),{replace:s}=X(),c=(0,o.useCallback)((async t=>{try{const e=await Yt.textToObservableInformation({observableType:"openFermion",text:t,size:5});s(((t,e)=>{const a=Math.max(e,t.observable.reduce(((t,e)=>e.operators.length>t?e.operators.length:t),0));return{gateItems:t.observable.map((t=>{let{operators:e}=t;return e.length>0?e.map((t=>w(null!=t?h[t.toUpperCase()]:h.EMPTY))).concat(q(a-e.length)):[w(h.EMPTY)]})),coefficients:t.observable.map((t=>{let{coefficient:e}=t;return e}))}})(e,u)),a()}catch(t){r("Parse error: syntax error",{variant:"error"})}}),[u,r,a,s]);return(0,n.jsx)(Ee,{isOpened:e,defaultValue:i.updateResult.codes.observableCodes.openFermion,onSave:c,onRequestClose:a})}),Be),Fe=(t,e)=>t.coefficients===e.coefficients&&t.itemMatrix===e.itemMatrix,He=o.memo((t=>{let{coefficients:e,itemMatrix:a}=t;const{simulatorResult:r}=Ht(),[i,u]=(0,o.useState)(!1),s=(0,o.useRef)(null),c=(0,o.useMemo)((()=>{const t=a.map(((t,a)=>{const n=e[a],r=t.reduce(((t,e,a)=>(b(e.item)||t.push("".concat(e.item.type.toUpperCase(),"_").concat(a)),t)),[]);return 0===r.length||0===n?"":"".concat((t=>t<0?"-":"+")(n)).concat(Math.abs(n)).concat(r.join(""))})).join("").slice(1);return""!==t?t:"I"}),[e,a]);return(0,o.useEffect)((()=>{(async()=>{i&&null!=window.MathJax&&null!=s.current&&await window.MathJax.typesetPromise([s.current])})()}),[c,i,r.updateResult.expectationValue]),(0,o.useEffect)((()=>{(async()=>{!function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{async:!0,onLoad:null};if(null!=document.querySelector('script[src="'.concat(t,'"]')))return;const{head:a}=document,n=document.createElement("script");var r,o;n.src=t,n.async=null===(r=e.async)||void 0===r||r,n.onload=null!==(o=e.onLoad)&&void 0!==o?o:null,a.appendChild(n)}("https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js",{onLoad:()=>{u(!0)}})})()}),[]),(0,n.jsxs)("div",{ref:s,children:[(0,n.jsx)("div",{children:"$H = ".concat(c,"$")}),(0,n.jsx)("div",{children:"$\\langle H \\rangle = ".concat(r.updateResult.expectationValue,"$")})]})}),Fe),Ue="#2196f3",We="#e91e63",Ke="#673ab7",Je="draggable_quantum_gate",$e="droppable_quantum_gate",ta="droppable_multi_quantum_gate",ea="draggable_observable_gate",aa="droppable_observable_gate",na="draggable_control_qubit_gate";var ra=a(92843);var oa=a(93553),ia=a(34682),ua=a.n(ia);const sa=(0,J.ZP)(tt.Z)({fontSize:"1rem"}),ca=o.forwardRef(((t,e)=>{let{gateType:a,isDragging:r,color:i,canDrop:u=!1,parametricValue:s}=t;const c=(0,o.useMemo)((()=>"cnot"===a||"ccnot"===a),[a]),l=(0,o.useMemo)((()=>null!=s?"(".concat(s,")"):null),[s]),p=(0,o.useMemo)((()=>"control_qubit"===a?null:c?u?(0,n.jsx)(oa.Z,{}):(0,n.jsx)(sa,{children:a.toUpperCase()}):(0,n.jsx)(tt.Z,{sx:{lineHeight:1},children:a.toUpperCase()})),[a,u,c]);return(0,n.jsxs)("div",{className:Pe()(ua().wrapper,{[ua().isDragging]:r,[ua().multiGate]:u&&c,[ua().controlQubitGate]:"control_qubit"===a}),style:{backgroundColor:i},ref:e,children:[p,null!=s&&(0,n.jsx)("div",{className:ua().parametricValue,children:l})]})}));var la=a(74702),pa=a.n(la);const da=t=>{let{gate:e,type:a,color:r}=t;const{ref:i,isDragging:u}=(t=>{let{gate:e,type:a}=t;const n=(0,o.useRef)(null),[{isDragging:r},i]=(0,ra.c)((()=>({type:a,item:{gate:e,type:a},collect:t=>({isDragging:t.isDragging()})})),[e,a]);return i(n),{ref:n,isDragging:r}})({gate:e,type:a});return(0,n.jsx)("div",{className:pa().wrapper,children:(0,n.jsx)(ca,{ref:i,gateType:e.type,color:r,isDragging:u})})};var ma=a(16009),fa=a.n(ma);const ha=()=>(0,n.jsx)("div",{className:fa().wrapper,children:Object.values(p).map((t=>(0,n.jsx)("div",{className:fa().item,children:(0,n.jsx)(da,{gate:t,color:Ue,type:ea})},t.type)))});var va=a(27508);const ba=t=>{let{isDisabled:e=!1}=t;const{addGateItemsRow:a}=Y(),{addGateItemsRow:r}=X(),i=(0,o.useCallback)((()=>{a(),r()}),[a,r]);return(0,n.jsx)(Le.Z,{title:"Add",placement:"bottom",arrow:!0,children:(0,n.jsx)(Ve.Z,{disabled:e,onClick:i,children:(0,n.jsx)(va.Z,{})})})};var ya=a(86912),ga=a.n(ya),xa=a(75874);const _a=t=>{let{isDisabled:e=!1,onClick:a}=t;const r=(0,o.useCallback)((()=>{a()}),[a]);return(0,n.jsx)(Le.Z,{title:"Remove",placement:"top",arrow:!0,children:(0,n.jsx)(Ve.Z,{disabled:e,onClick:r,children:(0,n.jsx)(xa.Z,{})})})},wa=t=>{let{gateItemsColumnLength:e,gateItemsRowLength:a,showMeasureIcon:r=!1,onRequestRemoveRow:i}=t;const u=(0,o.useMemo)((()=>a>=5),[a]),s=(0,o.useMemo)((()=>new Array(a).fill("").map(((t,e)=>e+1))),[a]);return(0,n.jsxs)(n.Fragment,{children:[a>1&&(0,n.jsx)("div",{className:ga().removeButton,children:(0,n.jsx)(_a,{onClick:i})}),s.map((t=>{const a={gridRow:t};return(0,n.jsxs)(o.Fragment,{children:[(0,n.jsxs)("div",{className:ga().label,style:a,children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{children:"q"}),(0,n.jsx)("span",{className:ga().labelIndex,children:t-1})]}),t===s.length&&!u&&(0,n.jsx)("div",{className:ga().addButton,children:(0,n.jsx)(ba,{})})]}),(0,n.jsx)("div",{className:ga().line,style:{...a,gridColumn:"2 / ".concat(2+e)},"aria-hidden":"true"}),r&&(0,n.jsx)("div",{className:ga().label,style:{...a,gridColumn:3+e},children:(0,n.jsx)("img",{src:"measurement.svg",width:"25",height:"14",alt:""})})]},t)}))]})};function qa(t){throw new Error('"'.concat(t,'" is Unexpected value. Should have been never.'))}function ja(t,e){if(null==t){const a=null!=e?e:"Expected 'value' to be defined, but received ".concat(t);throw new Error(a)}}var Oa=a(40630),Ca=a.n(Oa),Ra=a(20103);var Sa=a(19986),ka=a(73953),Ma=a.n(ka);const Ea={x:null,y:null},Ta=t=>{let{menuItems:e,children:a}=t;const[r,i]=(0,o.useState)(Ea),u=(0,o.useCallback)((t=>{t.preventDefault(),i({x:t.clientX-2,y:t.clientY-4})}),[]),s=(0,o.useCallback)((()=>{i(Ea)}),[]),c=(0,o.useCallback)((t=>e=>{t(e),s()}),[s]);return(0,n.jsxs)("div",{className:Ma().wrapper,onContextMenu:u,children:[a,(0,n.jsx)(Sa.Z,{keepMounted:!0,open:null!=r.y,onClose:s,anchorReference:"anchorPosition",anchorPosition:null!=r.y&&null!=r.x?{top:r.y,left:r.x}:void 0,children:e.map((t=>{let{text:e,onClick:a}=t;return(0,n.jsx)(ne.Z,{onClick:c(a),children:e},e)}))})]})},Ia=t=>{let{gate:e,position:a,type:r,color:i,menuItems:u=[],onRequestMoveGate:s,onRequestRemoveGate:c}=t;const{ref:l,isDragging:p}=(t=>{let{accept:e,gate:a,position:n,type:r,onDrop:i}=t;const u=(0,o.useRef)(null),[,s]=(0,Ra.L)({accept:e,drop:i}),[{isDragging:c},l]=(0,ra.c)((()=>({type:r,item:{gate:a,position:n,type:r},collect:t=>({isDragging:t.isDragging()})})),[a,n,r]);return l(s(u)),{ref:u,isDragging:c}})({gate:e,position:a,type:r,accept:[r],onDrop:t=>{switch(t.type){case"droppable_quantum_gate":case"droppable_observable_gate":s(t,a);break;case"droppable_multi_quantum_gate":break;default:qa(t.type)}}}),d=(0,o.useMemo)((()=>(t=>"rx"===t.type||"ry"===t.type||"rz"===t.type)(e)?e.param:void 0),[e]),m=(0,o.useCallback)((t=>{t.stopPropagation(),c(e,a)}),[e,a,c]),f=(0,o.useMemo)((()=>[...u,{text:"Delete Gate",onClick:m}]),[u,m]);return(0,n.jsx)(Ta,{menuItems:f,children:(0,n.jsx)(ca,{ref:l,gateType:e.type,color:i,isDragging:p,parametricValue:d,canDrop:!0})})};var Qa=a(3423),Za=a.n(Qa);const Na=t=>{let{position:e,onRequestAddGate:a,onRequestMoveGate:r}=t;const[{isOver:i,canDrop:u},s]=(0,Ra.L)({accept:[ea,aa],drop:t=>{switch(t.type){case"draggable_observable_gate":a(t,e);break;case"droppable_observable_gate":r(t,e);break;default:qa(t.type)}},collect:t=>({isOver:t.isOver(),canDrop:t.canDrop()})}),c=(0,o.useMemo)((()=>i&&u),[i,u]);return(0,n.jsx)("div",{ref:s,className:Pe()(Za().wrapper,{[Za().isActive]:c,[Za().canDrop]:!c&&u})})},Ga=t=>{let{gate:e,position:a,onRequestAddGate:r,onRequestMoveGate:i,onRequestRemoveGate:u}=t;const s=(0,o.useMemo)((()=>{switch(e.type){case"empty":return(0,n.jsx)(Na,{position:a,onRequestAddGate:r,onRequestMoveGate:i});case"x":case"y":case"z":return(0,n.jsx)(Ia,{gate:e,position:a,type:aa,color:Ue,onRequestMoveGate:i,onRequestRemoveGate:u});default:return qa(e)}}),[e,a,r,i,u]);return(0,n.jsx)(n.Fragment,{children:s})},Pa=(t,e)=>({gridRow:t+1,gridColumn:e+1}),Aa=(t,e)=>t.itemMatrix===e.itemMatrix,Va=o.memo((t=>{let{itemMatrix:e}=t;const{gateItemsColumnLength:a,gateItemsRowLength:r,addGateItem:i,moveGateItem:u,removeGateItem:s,removeGateItemsRow:c}=X(),l=(0,o.useCallback)(((t,e)=>{i(t.gate,e)}),[]),p=(0,o.useCallback)(((t,e)=>{const{position:a}=t;ja(a),u(a,e)}),[]),d=(0,o.useCallback)(((t,e)=>{s(e)}),[]);return(0,n.jsxs)("div",{className:Ca().wrapper,children:[(0,n.jsx)(wa,{gateItemsColumnLength:a,gateItemsRowLength:r,onRequestRemoveRow:c}),e.map(((t,e)=>(0,n.jsx)(o.Fragment,{children:t.map(((t,a)=>(0,n.jsx)("div",{className:Ca().gateCell,style:Pa(a,e+1),children:(0,n.jsx)(Ga,{gate:t.item,position:[a,e],onRequestAddGate:l,onRequestMoveGate:p,onRequestRemoveGate:d})},t.id)))},e)))]})}),Aa),La=(t,e)=>t.value===e.value,Da=o.memo((t=>{let{value:e,onChange:a,...r}=t;const[i,u]=(0,o.useState)(e),s=(0,o.useCallback)((t=>{const e=t.currentTarget.value;u(""===e?"":parseFloat(e))}),[]),c=(0,o.useCallback)((()=>{"number"!=typeof i?(u(0),a(0)):a(i)}),[i,a]);return(0,o.useEffect)((()=>{u(e)}),[e]),(0,n.jsx)(Nt.Z,{value:i,onChange:s,onBlur:c,...r})}),La);var Ya=a(7579),za=a.n(Ya);const Ba=t=>{let{coefficients:e,onChange:a}=t;const r=(0,o.useCallback)((t=>e=>{a(t,e)}),[a]);return(0,n.jsx)("div",{className:za().wrapper,children:e.map(((t,e)=>(0,n.jsx)("div",{className:za().item,children:(0,n.jsx)(Da,{type:"number",value:t,inputProps:{step:"0.01"},onChange:r(e),fullWidth:!0})},e)))})};var Xa=a(67914),Fa=a.n(Xa);const Ha=()=>{const t=ze(),{coefficients:e,gateItems:a,updateCoefficients:r,reset:o}=X();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:Fa().wrapper,children:[(0,n.jsxs)("div",{className:Fa().heading,children:[(0,n.jsx)(tt.Z,{variant:"overline",children:"Observable"}),(0,n.jsxs)("div",{className:Fa().actions,children:[(0,n.jsx)(Ye,{onClick:t.open}),(0,n.jsx)(De,{onClick:o})]})]}),(0,n.jsx)("div",{children:(0,n.jsx)(ha,{})}),(0,n.jsxs)("div",{className:Fa().composer,children:[(0,n.jsx)(Ba,{coefficients:e,onChange:r}),(0,n.jsx)(Va,{itemMatrix:a})]}),(0,n.jsx)(He,{coefficients:e,itemMatrix:a})]}),(0,n.jsx)(Xe,{isOpened:t.isOpened,onRequestClose:t.close})]})};var Ua=a(6737),Wa=a.n(Ua);const Ka=()=>(0,n.jsxs)("div",{className:Wa().wrapper,children:[Object.values(d).map((t=>(0,n.jsx)("div",{className:Wa().item,children:(0,n.jsx)(da,{gate:t,color:Ue,type:Je})},t.type))),Object.values(m).map((t=>(0,n.jsx)("div",{className:Wa().item,children:(0,n.jsx)(da,{gate:t,color:We,type:Je})},t.type))),Object.values(f).map((t=>(0,n.jsx)("div",{className:Wa().item,children:(0,n.jsx)(da,{gate:t,color:Ke,type:Je})},t.type)))]});var Ja=a(8209),$a=a.n(Ja),tn=a(34965),en=a.n(tn);const an=t=>{let{gate:e,position:a,...r}=t;const i=(0,o.useMemo)((()=>g(e)?e.controllQubitIndex:[]),[e]),u=(0,o.useCallback)((t=>{const[e]=a;return{style:{height:"".concat(50*(Math.abs(e-t)-1)+20,"px")},"data-direction":e>t?"upper":"lower"}}),[a]);return(0,n.jsxs)("div",{className:en().wrapper,children:[i.map((t=>(0,n.jsx)("div",{className:en().connectedLine,...u(t),"aria-hidden":!0},t))),(0,n.jsx)(Ia,{gate:e,position:a,type:ta,color:Ke,...r})]})};var nn=a(46312),rn=a.n(nn);const on=t=>{let{gate:e,position:a,onRequestMoveGate:r,onRequestRemoveGate:i}=t;const u=En(),{selectedParametricGate:s,updateSelectedParametricGate:c}=Y(),l=(0,o.useMemo)((()=>null!=s&&((t,e)=>{const[a,n]=t,[r,o]=e;return a===r&&n===o})(a,s)),[a,s]),p=(0,o.useMemo)((()=>[{text:"Edit Gate",onClick:t=>{t.stopPropagation(),u(e,a)}}]),[u,e,a]),d=(0,o.useCallback)((()=>{c(a)}),[c,a]),m=(0,o.useCallback)(((t,e)=>{c(e),r(t,e)}),[c,r]),f=(0,o.useCallback)(((t,e)=>{s===e&&c(null),i(t,e)}),[s,c,i]);return(0,n.jsx)("div",{className:Pe()(rn().wrapper,{[rn().isSelected]:l}),role:"button",tabIndex:-1,onClick:d,children:(0,n.jsx)(Ia,{gate:e,position:a,type:$e,color:We,menuItems:p,onRequestMoveGate:m,onRequestRemoveGate:f})})};var un=a(37404),sn=a.n(un);const cn=t=>{let{position:e,onRequestAddGate:a,onRequestMoveGate:r}=t;const{gateItems:i}=Y(),u=(0,o.useCallback)((t=>{const{gate:a}=t;return x(a)?((t,e,a)=>{let[n,r]=a;const[o,i]=e.connectedMultiGate.position;if(i!==r)return!1;const u=t[i];return(n>o?u.slice(o+1,n+1):u.slice(n,o)).every((t=>{let{item:e}=t;return b(e)||x(e)}))})(i,a,e):!!((t,e)=>{let[a,n]=e;const r=t[n].reduce(((t,e,a)=>{let{item:n}=e;return g(n)&&t.push({index:a,...n}),t}),[]);return 0===r.length||r.every((t=>t.controllQubitIndex.every((e=>t.index>e?!Ct()(a,e,t.index):!Ct()(a,t.index,e)))))})(i,e)&&(!g(a)||((t,e,a)=>{let[n,r]=a;const o=t[r],i=t=>t.every((t=>{var e;return"empty"===(null===(e=o[t])||void 0===e?void 0:e.item.type)})),u=new Array(e.size-1).fill(""),s=u.map(((t,e)=>n-(e+1))),c=u.map(((t,e)=>n+(e+1)));return i(s)||i(c)||"ccnot"===e.type&&i([n-1,n+1])})(i,a,e))}),[i,e]),[{isOver:s,canDrop:c},l]=(0,Ra.L)({accept:[Je,na,$e,ta],canDrop:u,drop:t=>{switch(t.type){case"draggable_quantum_gate":a(t,e);break;case"draggable_control_qubit_gate":case"droppable_quantum_gate":case"droppable_multi_quantum_gate":r(t,e);break;default:qa(t.type)}},collect:t=>({isOver:t.isOver(),canDrop:t.canDrop()})}),p=(0,o.useMemo)((()=>s&&c),[s,c]);return(0,n.jsx)("div",{ref:l,className:Pe()(sn().wrapper,{[sn().isActive]:p,[sn().canDrop]:!p&&c})})};var ln=a(53090),pn=a.n(ln);const dn=t=>{let{gate:e,position:a}=t;const r=(0,o.useRef)(null),[{isDragging:i},u]=(0,ra.c)((()=>({type:na,item:{gate:e,position:a,type:na},collect:t=>({isDragging:t.isDragging()})})),[e,a]);return u(r),(0,n.jsx)("div",{className:pn().wrapper,children:(0,n.jsx)(ca,{ref:r,gateType:e.type,color:"transparent",isDragging:i})})},mn=t=>{let{gate:e,position:a,onRequestAddGate:r,onRequestMoveGate:i,onRequestRemoveGate:u}=t;const s=(0,o.useMemo)((()=>{switch(e.type){case"empty":return(0,n.jsx)(cn,{position:a,onRequestAddGate:r,onRequestMoveGate:i});case"control_qubit":return(0,n.jsx)(dn,{gate:e,position:a});case"x":case"y":case"z":case"h":case"t":case"s":return(0,n.jsx)(Ia,{gate:e,position:a,type:$e,color:Ue,onRequestMoveGate:i,onRequestRemoveGate:u});case"rx":case"ry":case"rz":return(0,n.jsx)(on,{gate:e,position:a,onRequestMoveGate:i,onRequestRemoveGate:u});case"cnot":case"ccnot":return(0,n.jsx)(an,{gate:e,position:a,onRequestMoveGate:i,onRequestRemoveGate:u});default:return qa(e)}}),[e,a,r,i,u]);return(0,n.jsx)(n.Fragment,{children:s})},fn=(t,e)=>({gridRow:t+1,gridColumn:e+1}),hn=(t,e)=>t.itemMatrix===e.itemMatrix,vn=o.memo((t=>{let{itemMatrix:e}=t;const{gateItemsColumnLength:a,gateItemsRowLength:r,addGateItem:i,removeGateItem:u,moveGateItem:s,removeGateItemsRow:c}=Y(),l=(0,o.useCallback)(((t,e)=>{i(t.gate,e)}),[]),p=(0,o.useCallback)(((t,e)=>{const{gate:a,position:n}=t;ja(n),s(a,n,e)}),[]),d=(0,o.useCallback)(((t,e)=>{u(t,e)}),[]);return(0,n.jsxs)("div",{className:$a().wrapper,children:[(0,n.jsx)(wa,{gateItemsColumnLength:a,gateItemsRowLength:r,onRequestRemoveRow:c,showMeasureIcon:!0}),e.map(((t,e)=>(0,n.jsx)(o.Fragment,{children:t.map(((t,a)=>(0,n.jsx)("div",{className:$a().gateCell,style:fn(a,e+1),children:(0,n.jsx)(mn,{gate:t.item,position:[a,e],onRequestAddGate:l,onRequestMoveGate:p,onRequestRemoveGate:d})},t.id)))},e)))]})}),hn),bn=(t,e)=>t.isOpened===e.isOpened,yn=o.memo((t=>{let{isOpened:e,onRequestClose:a}=t;const{enqueueSnackbar:r}=(0,H.Ds)(),{simulatorResult:i}=Ht(),{replace:u}=Y(),s=(0,o.useCallback)((async t=>{try{const e=await Yt.textToCircuitInformation({circuitType:"qasm2",text:t});u((t=>{const e=t.circuit.reduce(((t,e)=>e.length>t?e.length:t),0),a=t.circuit.map((t=>t.length>0?t.map((t=>w(null!=t?t:v.EMPTY))).concat(q(e-t.length)):[w(v.EMPTY)]));return a.forEach(((t,e)=>t.forEach(((t,n)=>{let{item:r}=t;g(r)&&T(a,r,[n,e],r.controllQubitIndex)})))),{gateItems:a}})(e)),a()}catch(t){r("Parse error: syntax error",{variant:"error"})}}),[a,r,u]);return(0,n.jsx)(Ee,{isOpened:e,defaultValue:i.updateResult.codes.circuitCodes.qasm2,onSave:s,onRequestClose:a})}),bn);var gn=a(35469),xn=a(66510),_n=a(839),wn=a.n(_n);const qn=[{value:0,label:"0π"},{value:2,label:"2π"}],jn=(0,J.ZP)(Nt.Z)({minWidth:"80px"}),On=t=>{let{initialValue:e,onChange:a}=t;const[r,i]=(0,o.useState)(e),u=(0,o.useCallback)(((t,e)=>{"number"==typeof e&&i(e)}),[]),s=(0,o.useCallback)((t=>{const e=t.target.value;i(""===e?"":parseFloat(e))}),[]),c=(0,o.useCallback)((()=>{"number"!=typeof r||r<0?i(0):r>2&&i(2)}),[r]);return(0,o.useEffect)((()=>{"number"==typeof r&&a(r)}),[r,a]),(0,n.jsxs)("div",{className:wn().wrapper,children:[(0,n.jsx)(xn.ZP,{min:0,max:2,step:.01,marks:qn,size:"small",value:"number"==typeof r?r:0,onChange:u,valueLabelDisplay:"auto"}),(0,n.jsx)("div",{className:wn().inputWrapper,children:(0,n.jsx)(jn,{value:r,onChange:s,onBlur:c,inputProps:{min:0,max:2,step:.01,type:"number"},endAdornment:(0,n.jsx)(gn.Z,{position:"end",children:"π"})})})]})},Cn=(t,e)=>t.isOpened===e.isOpened,Rn=o.memo((t=>{let{isOpened:e,gateItem:a,onClose:r}=t;const{gate:i,position:u}=a,{updateGateItem:s}=Y(),[c,l]=(0,o.useState)(i.param),p=(0,o.useCallback)((t=>{l(t)}),[]),d=(0,o.useCallback)((()=>{s({...i,param:c},u),r()}),[i,u,c,r,s]);return(0,n.jsxs)(ye.Z,{open:e,onClose:r,children:[(0,n.jsx)(we.Z,{children:"Edit ".concat(i.type.toUpperCase()," Gate")}),(0,n.jsx)(be.Z,{children:(0,n.jsx)(On,{initialValue:i.param,onChange:p})}),(0,n.jsxs)(_e.Z,{children:[(0,n.jsx)(K.Z,{onClick:r,color:"primary",children:"Cancel"}),(0,n.jsx)(K.Z,{onClick:d,color:"primary",autoFocus:!0,children:"Save"})]})]})}),Cn);var Sn=a(46014),kn=a.n(Sn);const Mn=o.createContext(null),En=()=>(0,o.useContext)(Mn),Tn=()=>{const t=ze(),e=(()=>{const[t,e]=(0,o.useState)(!1),[a,n]=(0,o.useState)();return{isOpened:t,gateItem:a,open:(0,o.useCallback)(((t,a)=>{n({gate:t,position:a}),e(!0)}),[]),close:(0,o.useCallback)((()=>{e(!1)}),[])}})(),{gateItems:a,reset:r}=Y();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:kn().wrapper,children:[(0,n.jsxs)("div",{className:kn().heading,children:[(0,n.jsx)(tt.Z,{variant:"overline",children:"Quantum Circuit"}),(0,n.jsxs)("div",{className:kn().actions,children:[(0,n.jsx)(Ye,{onClick:t.open}),(0,n.jsx)(De,{onClick:r})]})]}),(0,n.jsx)("div",{children:(0,n.jsx)(Ka,{})}),(0,n.jsx)(Mn.Provider,{value:e.open,children:(0,n.jsx)("div",{className:kn().composer,children:(0,n.jsx)(vn,{itemMatrix:a})})})]}),(0,n.jsx)(yn,{isOpened:t.isOpened,onRequestClose:t.close}),null!=e.gateItem&&(0,n.jsx)(Rn,{isOpened:e.isOpened,gateItem:e.gateItem,onClose:e.close})]})};var In=a(8733),Qn=a(52797);const Zn=t=>{let{children:e}=t;return(0,n.jsx)(In.W,{backend:Qn.PD,children:e})};var Nn=a(11370),Gn=a.n(Nn);const Pn=(0,J.ZP)(ut.Z)({height:"100%",padding:"8px 15px",overflow:"auto"}),An=()=>(0,n.jsx)("div",{className:Gn().wrapper,children:(0,n.jsxs)(Zn,{children:[(0,n.jsx)("div",{className:Pe()(Gn().tab,Gn().circuitTab),children:(0,n.jsx)(Pn,{variant:"outlined",children:(0,n.jsx)(Tn,{})})}),(0,n.jsx)("div",{className:Pe()(Gn().tab,Gn().observableTab),children:(0,n.jsx)(Pn,{variant:"outlined",children:(0,n.jsx)(Ha,{})})})]})});class Vn extends o.Component{static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(t,e){const{errorHandler:a}=this.props;null!=a&&a(t,e)}render(){const{children:t}=this.props,{hasError:e}=this.state;return t(e)}constructor(t){super(t),this.state={hasError:!1}}}var Ln=a(80307),Dn=a.n(Ln);const Yn=()=>(0,n.jsx)(Vn,{children:()=>(0,n.jsxs)(H.wT,{autoHideDuration:3e3,children:[(0,n.jsx)(it,{}),(0,n.jsx)(Ut,{children:(0,n.jsxs)("div",{className:Dn().wrapper,children:[(0,n.jsx)("div",{className:Dn().uiState,children:(0,n.jsx)(An,{})}),(0,n.jsx)("div",{className:Dn().charts,children:(0,n.jsx)(ve,{})}),(0,n.jsx)(Ne,{})]})})]})});var zn=()=>(0,n.jsx)(r.Wh,{children:(0,n.jsx)(z,{children:(0,n.jsx)(F,{children:(0,n.jsx)(Yn,{})})})})},41577:function(t){t.exports={heading:"CodeViewTab_heading__5uGqB"}},84471:function(t){t.exports={tooltipWrapper:"AmplitudesChart_tooltipWrapper__TDeOL",tooltipLabel:"AmplitudesChart_tooltipLabel__hXlqF",tooltipValue:"AmplitudesChart_tooltipValue__7ddKW"}},3423:function(t){t.exports={wrapper:"EmptyGate_wrapper__HJYW6",isActive:"EmptyGate_isActive__Qj3_V",canDrop:"EmptyGate_canDrop__07pxm"}},16009:function(t){t.exports={wrapper:"GateCollections_wrapper__qhUsD",item:"GateCollections_item__TTKX_"}},40630:function(t){t.exports={wrapper:"GateComposer_wrapper__Wpy1N",gateCell:"GateComposer_gateCell__M3_49"}},7579:function(t){t.exports={wrapper:"GateInput_wrapper__mq7EK",item:"GateInput_item__bUwNV"}},67914:function(t){t.exports={wrapper:"ObservableTab_wrapper__9OQDX",heading:"ObservableTab_heading__T6icl",actions:"ObservableTab_actions__q9qNq",composer:"ObservableTab_composer__C1Ijy"}},12439:function(t){t.exports={heading:"AppHeader_heading__W1R2i"}},40547:function(t){t.exports={wrapper:"ChartTabContainer_wrapper__yBkwl",tab:"ChartTabContainer_tab__bl9dv"}},11370:function(t){t.exports={wrapper:"UIStateTabContainer_wrapper___G6H6",tab:"UIStateTabContainer_tab__fDDXM",circuitTab:"UIStateTabContainer_circuitTab__ZkGud",observableTab:"UIStateTabContainer_observableTab__jm1WI"}},60394:function(t){t.exports={control:"ChartContainer_control__ZBDdw"}},487:function(t){t.exports={wrapper:"RunButton_wrapper__O3LjR"}},34965:function(t){t.exports={wrapper:"DroppableMultiGate_wrapper__YLar9",connectedLine:"DroppableMultiGate_connectedLine__aIc7d"}},46312:function(t){t.exports={wrapper:"DroppableParametricGate_wrapper__3piGk",isSelected:"DroppableParametricGate_isSelected__95rgG"}},37404:function(t){t.exports={wrapper:"EmptyGate_wrapper__GTPVD",isActive:"EmptyGate_isActive__jLo_F",canDrop:"EmptyGate_canDrop___30Pi"}},53090:function(t){t.exports={wrapper:"QubitGate_wrapper__jmJz1"}},6737:function(t){t.exports={wrapper:"CircuitGateCollections_wrapper__LsMrX",item:"CircuitGateCollections_item__KMtYg"}},8209:function(t){t.exports={wrapper:"CircuitGateComposer_wrapper__J523M",gateCell:"CircuitGateComposer_gateCell__rf_M4"}},839:function(t){t.exports={wrapper:"ParametricValueSlider_wrapper__F1Myu",inputWrapper:"ParametricValueSlider_inputWrapper__74f3E"}},46014:function(t){t.exports={wrapper:"QuantumCircuitTab_wrapper__FYqSg",heading:"QuantumCircuitTab_heading__EckJj",actions:"QuantumCircuitTab_actions__DgSdi",composer:"QuantumCircuitTab_composer__ZPqxz"}},73953:function(t){t.exports={wrapper:"ContextMenu_wrapper___4z38"}},34682:function(t){t.exports={wrapper:"Gate_wrapper__pyKuG",isDragging:"Gate_isDragging__TOZcF",parametricValue:"Gate_parametricValue__ohPcl",multiGate:"Gate_multiGate__WPF31",controlQubitGate:"Gate_controlQubitGate__Fyl8t"}},74702:function(t){t.exports={wrapper:"DraggableGate_wrapper__WFCSu"}},86912:function(t){t.exports={label:"GateLabels_label__hethD",labelIndex:"GateLabels_labelIndex__obGm0",line:"GateLabels_line__biYo7",addButton:"GateLabels_addButton__A_V_e",removeButton:"GateLabels_removeButton__Vz_9X"}},80307:function(t){t.exports={wrapper:"Home_wrapper__1h3zx",uiState:"Home_uiState__SjV35",charts:"Home_charts__Jfxme"}},59186:function(t,e){(()=>{"use strict";var t={799:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});e.QuantumState=function(t){}},914:(t,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0});var n=a(799);e.QuantumState=n.QuantumState},234:(t,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0});var n=a(412),r=a(984),o=a(46),i=function(){function t(t){this._quantumStateGenerator=t.quantumStateGenerator,this._mapQubitQuantumState=[]}return t.prototype.createNewQubit=function(t,e){var a=this._quantumStateGenerator(e.value);this._mapQubitQuantumState.push({qubit:t,bitId:0,quantumState:a})},t.prototype.requestOperation=function(t){for(var e=this,a=[],n=1;n<arguments.length;n++)a[n-1]=arguments[n];var i,u=a.map((function(t){return e._lookupQubitQuantumStateMapElementFromQubit(t)}));switch(t){case r.QuantumOperationTypes.X:case r.QuantumOperationTypes.Y:case r.QuantumOperationTypes.Z:case r.QuantumOperationTypes.S:case r.QuantumOperationTypes.T:case r.QuantumOperationTypes.H:var s=u[0];this._requestOperationSingleQubit(t,s);break;case r.QuantumOperationTypes.CONTROLLED_X:case r.QuantumOperationTypes.CONTROLLED_Y:case r.QuantumOperationTypes.CONTROLLED_Z:var c=u[0];i=u[1],c.quantumState!==i.quantumState&&this._mergeQubitMapElement(c,i),this._requestControlledOperationQubit(t,c,i);break;case r.QuantumOperationTypes.TOFFOLI:var l=u[0],p=u[1];i=u[2],l.quantumState!==p.quantumState&&this._mergeQubitMapElement(l,p),l.quantumState!==i.quantumState&&this._mergeQubitMapElement(l,i),o.toffoli(l.quantumState,l.bitId,p.bitId,i.bitId)}},t.prototype.requestRotateOperation=function(t,e,a){var n=this._lookupQubitQuantumStateMapElementFromQubit(a);switch(t){case r.QuantumOperationTypes.R:n.quantumState.r(n.bitId,e);break;case r.QuantumOperationTypes.ROTATEX:n.quantumState.rx(n.bitId,e);break;case r.QuantumOperationTypes.ROTATEY:n.quantumState.ry(n.bitId,e);break;case r.QuantumOperationTypes.ROTATEZ:n.quantumState.rz(n.bitId,e)}},t.prototype.requestMeasure=function(t){var e=this._lookupQubitQuantumStateMapElementFromQubit(t);return this._measureQubit(e)},t.prototype.toStringQubit=function(t){return this._lookupQubitQuantumStateMapElementFromQubit(t).quantumState.toString()},t.prototype.getCompositedQubits=function(t){var e=this._lookupQubitQuantumStateMapElementFromQubit(t).quantumState;return this._mapQubitQuantumState.filter((function(t){return t.quantumState===e})).map((function(t){return t.qubit}))},t.prototype.cloneQubits=function(t){var e=this,a=this._lookupQubitQuantumStateMapElementFromQubit(t).quantumState,r=a.simulated.clone(),o=this._mapQubitQuantumState.filter((function(t){return t.quantumState===a})),i=o.map((function(t){var a=new n.Qubit,o=e._lookupQubitQuantumStateMapElementFromQubit(a);return o.quantumState,o.bitId=t.bitId,o.quantumState=r,o}));return{index:o.findIndex((function(e){return e.qubit===t})),qubits:i.map((function(t){return t.qubit}))}},t.prototype.getStateVectorFromQubit=function(t){return this._lookupQubitQuantumStateMapElementFromQubit(t).quantumState.simulated.getStateVector()},t.prototype.mergeStateVector=function(t){var e=this,a=t.map((function(t){return e._lookupQubitQuantumStateMapElementFromQubit(t)})),n=a[0];a.slice(1).forEach((function(t){n.quantumState!==t.quantumState&&e._mergeQubitMapElement(n,t)}))},t.prototype._requestOperationSingleQubit=function(t,e){switch(t){case r.QuantumOperationTypes.X:e.quantumState.x(e.bitId);break;case r.QuantumOperationTypes.Y:e.quantumState.y(e.bitId);break;case r.QuantumOperationTypes.Z:e.quantumState.z(e.bitId);break;case r.QuantumOperationTypes.S:e.quantumState.s(e.bitId);break;case r.QuantumOperationTypes.T:e.quantumState.t(e.bitId);break;case r.QuantumOperationTypes.H:e.quantumState.h(e.bitId)}},t.prototype._requestControlledOperationQubit=function(t,e,a){switch(t){case r.QuantumOperationTypes.CONTROLLED_X:a.quantumState.controlledX(e.bitId,a.bitId);break;case r.QuantumOperationTypes.CONTROLLED_Y:a.quantumState.controlledY(e.bitId,a.bitId);break;case r.QuantumOperationTypes.CONTROLLED_Z:a.quantumState.controlledZ(e.bitId,a.bitId)}},t.prototype._measureQubit=function(t){return t.quantumState.measure(t.bitId).result},t.prototype._lookupQubitQuantumStateMapElementFromQubit=function(t){return this._mapQubitQuantumState.find((function(e){return e.qubit===t}))},t.prototype._mergeQubitMapElement=function(t,e){var a=e.quantumState.length,n=this._mapQubitQuantumState.filter((function(e){return e.quantumState===t.quantumState})),r=this._mapQubitQuantumState.filter((function(t){return t.quantumState===e.quantumState})),o=t.quantumState.merge(e.quantumState);n.forEach((function(t){t.quantumState=o})),r.forEach((function(t){t.quantumState=o})),n.forEach((function(t){return t.bitId=t.bitId+a}))},t}();e.Core=i},196:function(t,e,a){var n,r=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])},n(t,e)},function(t,e){function a(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)});Object.defineProperty(e,"__esModule",{value:!0});var o=a(914),i=a(202);e.quantumStateJsQubitsGenerator=function(t){return new u(t)};var u=function(t){function e(a){var n=t.call(this,a)||this;if(n._qstate=i.jsqubits("|0>"),"number"==typeof a)switch(a){case 0:break;case 1:n._qstate=n._qstate.x(0)}else switch(a){case"0":case"|0>":break;case"1":case"|1>":n._qstate=n._qstate.x(0);break;case"+":n._qstate=n._qstate.hadamard(0);break;case"-":n._qstate=n._qstate.x(0),n._qstate=n._qstate.hadamard(0)}return n.simulated={clone:function(){var t=new e(0);return t._qstate=n._qstate.normalize(),t},getStateVector:function(){for(var t=Math.pow(2,n._qstate.numBits()),e=[],a=0;a<t;a++){var r=n._qstate.amplitude(a);e.push({re:r.real,im:r.imaginary})}return e}},n}return r(e,t),e.prototype.x=function(t){this._qstate=this._qstate.X(t)},e.prototype.y=function(t){this._qstate=this._qstate.Y(t)},e.prototype.z=function(t){this._qstate=this._qstate.Z(t)},e.prototype.r=function(t,e){this._qstate=this._qstate.r(t,e)},e.prototype.s=function(t){this._qstate=this._qstate.s(t)},e.prototype.t=function(t){this._qstate=this._qstate.t(t)},e.prototype.h=function(t){this._qstate=this._qstate.hadamard(t)},e.prototype.cnot=function(t,e){this._qstate=this._qstate.controlledX(t,e)},e.prototype.controlledX=function(t,e){this._qstate=this._qstate.controlledX(t,e)},e.prototype.controlledY=function(t,e){this._qstate=this._qstate.controlledY(t,e)},e.prototype.controlledZ=function(t,e){this._qstate=this._qstate.controlledZ(t,e)},e.prototype.rx=function(t,e){this._qstate=this._qstate.rotateX(t,e)},e.prototype.ry=function(t,e){this._qstate=this._qstate.rotateY(t,e)},e.prototype.rz=function(t,e){this._qstate=this._qstate.rotateZ(t,e)},e.prototype.measure=function(t){var e=this._qstate.measure(t);return this._qstate=e.newState,{newQuantumState:this,result:e.result}},e.prototype.merge=function(t){return this._qstate=this._qstate.tensorProduct(t._qstate),this},Object.defineProperty(e.prototype,"length",{get:function(){return this._qstate.numBits()},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return this._qstate.toString()},e}(o.QuantumState);e.QuantumStateJsqubits=u},412:function(t,e,a){var n=this&&this.__spreadArrays||function(){for(var t=0,e=0,a=arguments.length;e<a;e++)t+=arguments[e].length;var n=Array(t),r=0;for(e=0;e<a;e++)for(var o=arguments[e],i=0,u=o.length;i<u;i++,r++)n[r]=o[i];return n};Object.defineProperty(e,"__esModule",{value:!0});var r=a(984),o=function(){function t(e){void 0===e&&(e={value:0}),t._core.createNewQubit(this,e),this._createSimulated()}return t.prototype.x=function(){t._core.requestOperation(r.QuantumOperationTypes.X,this)},t.prototype.y=function(){t._core.requestOperation(r.QuantumOperationTypes.Y,this)},t.prototype.z=function(){t._core.requestOperation(r.QuantumOperationTypes.Z,this)},t.prototype.r=function(e){t._core.requestRotateOperation(r.QuantumOperationTypes.R,e,this)},t.prototype.s=function(){t._core.requestOperation(r.QuantumOperationTypes.S,this)},t.prototype.t=function(){t._core.requestOperation(r.QuantumOperationTypes.T,this)},t.prototype.h=function(){t._core.requestOperation(r.QuantumOperationTypes.H,this)},t.prototype.cnot=function(e){t._core.requestOperation(r.QuantumOperationTypes.CONTROLLED_X,e,this)},t.prototype.controlledX=function(e){t._core.requestOperation(r.QuantumOperationTypes.CONTROLLED_X,e,this)},t.prototype.controlledY=function(e){t._core.requestOperation(r.QuantumOperationTypes.CONTROLLED_Y,e,this)},t.prototype.controlledZ=function(e){t._core.requestOperation(r.QuantumOperationTypes.CONTROLLED_Z,e,this)},t.prototype.rotateX=function(e){t._core.requestRotateOperation(r.QuantumOperationTypes.ROTATEX,e,this)},t.prototype.rotateY=function(e){t._core.requestRotateOperation(r.QuantumOperationTypes.ROTATEY,e,this)},t.prototype.rotateZ=function(e){t._core.requestRotateOperation(r.QuantumOperationTypes.ROTATEZ,e,this)},t.prototype.toffoli=function(e,a){t._core.requestOperation(r.QuantumOperationTypes.TOFFOLI,e,a,this)},t.prototype.measure=function(){return t._core.requestMeasure(this)},t.prototype.toString=function(){return t._core.toStringQubit(this)},t.prototype._createSimulated=function(){var e=this;this.simulated={clone:function(){return t._core.cloneQubits(e)},compositedQubits:function(){return t._core.getCompositedQubits(e)},getStateVector:function(){return t._core.getStateVectorFromQubit(e)},mergeStateVector:function(a){Array.isArray(a)||(a=[a]),t._core.mergeStateVector(n([e],a))}}},t}();e.Qubit=o},458:(t,e,a)=>{a(914).QuantumState;var n=a(196);n.QuantumStateJsqubits;var r=a(412);e.xz=r.Qubit;var o=a(234);o.Core,a(299);var i={quantumStateGenerator:n.quantumStateJsQubitsGenerator},u=new o.Core(i);r.Qubit._core=u},46:(t,e)=>{function a(t,e){t.t(e),t.t(e),t.t(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.toffoli=function(t,e,n,r){t.t(n),t.h(r),t.t(r),t.cnot(n,r),a(t,r),t.cnot(n,r),t.cnot(e,n),a(t,n),t.cnot(n,r),t.t(r),t.cnot(n,r),t.cnot(e,n),t.cnot(e,r),a(t,r),t.cnot(e,r),t.t(e),t.h(r)}},299:(t,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0});var n=a(412);e.intToQubits=function(t,e){if(!Number.isInteger(t))throw new Error("value must be integer.");var a=t.toString(2),r=a.length;if(r>e)throw new Error("Designated qubits length cannot express given number.");for(var o=[],i=0;i<e;i++)i<r&&"1"===a[r-i-1]?o.push(new n.Qubit({value:1})):o.push(new n.Qubit({value:0}));return o}},984:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.X=0]="X",t[t.Y=1]="Y",t[t.Z=2]="Z",t[t.R=3]="R",t[t.S=4]="S",t[t.T=5]="T",t[t.H=6]="H",t[t.CONTROLLED_X=7]="CONTROLLED_X",t[t.CONTROLLED_Y=8]="CONTROLLED_Y",t[t.CONTROLLED_Z=9]="CONTROLLED_Z",t[t.ROTATEX=10]="ROTATEX",t[t.ROTATEY=11]="ROTATEY",t[t.ROTATEZ=12]="ROTATEZ",t[t.TOFFOLI=13]="TOFFOLI"}(e.QuantumOperationTypes||(e.QuantumOperationTypes={}))},644:(t,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}(),r=i(a(766)),o=i(a(287));function i(t){return t&&t.__esModule?t:{default:t}}var u=function(){function t(e,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.equal=this.eql,this.equals=this.eql,(0,r.default)(arguments,1,2,"Must supply a real, and optionally an imaginary, argument to Complex()"),a=a||0,this.real=e,this.imaginary=a}return n(t,[{key:"add",value:function(e){return(0,r.default)(arguments,1,1,"Must supply 1 parameter to add()"),o.default.isNumber(e)?new t(this.real+e,this.imaginary):new t(this.real+e.real,this.imaginary+e.imaginary)}},{key:"multiply",value:function(e){return(0,r.default)(arguments,1,1,"Must supply 1 parameter to multiply()"),o.default.isNumber(e)?new t(this.real*e,this.imaginary*e):new t(this.real*e.real-this.imaginary*e.imaginary,this.real*e.imaginary+this.imaginary*e.real)}},{key:"conjugate",value:function(){return new t(this.real,-this.imaginary)}},{key:"toString",value:function(){if(0===this.imaginary)return""+this.real;var t;if(t=1===this.imaginary?"i":-1===this.imaginary?"-i":this.imaginary+"i",0===this.real)return t;var e=this.imaginary<0?"":"+";return this.real+e+t}},{key:"inspect",value:function(){return this.toString()}},{key:"format",value:function(e){var a=this.real,n=this.imaginary;if(e&&null!=e.decimalPlaces){var r=Math.pow(10,e.decimalPlaces);a=Math.round(a*r)/r,n=Math.round(n*r)/r}return new t(a,n).toString()}},{key:"negate",value:function(){return new t(-this.real,-this.imaginary)}},{key:"magnitude",value:function(){return Math.sqrt(this.real*this.real+this.imaginary*this.imaginary)}},{key:"phase",value:function(){return Math.atan2(this.imaginary,this.real)}},{key:"subtract",value:function(e){return(0,r.default)(arguments,1,1,"Must supply 1 parameter to subtract()"),o.default.isNumber(e)?new t(this.real-e,this.imaginary):new t(this.real-e.real,this.imaginary-e.imaginary)}},{key:"eql",value:function(e){return e instanceof t&&this.real===e.real&&this.imaginary===e.imaginary}},{key:"closeTo",value:function(t){return Math.abs(this.real-t.real)<1e-4&&Math.abs(this.imaginary-t.imaginary)<1e-4}}]),t}();u.ONE=new u(1,0),u.ZERO=new u(0,0),u.SQRT2=new u(Math.SQRT2,0),u.SQRT1_2=new u(Math.SQRT1_2,0),e.default=u},382:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}();function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var a=e-t.length,n=0;n<a;n++)t="0"+t;return t}var o=function(){function t(e,a,r){n(this,t),this.numBits=e,this.result=a,this.newState=r}return a(t,[{key:"toString",value:function(){return"{result: "+this.result+", newState: "+this.newState+"}"}},{key:"asBitString",value:function(){return r(this.result.toString(2),this.numBits)}}]),t}();e.default=o,e.QStateComponent=function(){function t(e,a,r){n(this,t),this.numBits=e,this.index=a,this.amplitude=r}return a(t,[{key:"asNumber",value:function(){return parseInt(this.index,10)}},{key:"asBitString",value:function(){return r(parseInt(this.index,10).toString(2),this.numBits)}}]),t}()},933:(t,e)=>{function a(t,e,n){if(0===e)return 1;if(1===e)return t;var r=a(t,Math.floor(e/2),n),o=r*r%n;return e%2==1&&(o=t*o%n),o}function n(t){return Math.abs(t-Math.round(t))<1e-7}function r(t){var e=Math.log(t)/Math.log(2),a=Math.floor(e);if(e===a)return 2;for(a--;a>1;a--){var r=Math.pow(t,1/a);if(n(r))return Math.round(r)}return 0}function o(t,e){for(;0!==e;){var a=t%e;t=e,e=a}return t}function i(t,e){return t*e/o(t,e)}function u(t){return t>=0?Math.floor(t):Math.ceil(t)}function s(t,e){var a=void 0,n=void 0;Math.abs(t)>=1?n=t-(a=u(t)):(a=0,n=t);for(var r={numerator:1,denominator:0},o={numerator:a,denominator:1},i=[a];Math.abs(t-o.numerator/o.denominator)>e;){var s=1/n,c=u(s);n=s-c,i.push(c);var l={numerator:c*o.numerator+r.numerator,denominator:c*o.denominator+r.denominator};r=o,o=l}var p=o,d=p.numerator,m=p.denominator;return o.denominator<0&&(d*=-1,m*=-1),{quotients:i,numerator:d,denominator:m}}function c(t,e){var a=function(t){for(var e=[],a=0;a<t.length;a++)e[a]=t[a];return e}(t);function n(t,e){var n=1<<t;if(!(n&a[e]))for(var r=e+1;r<a.length;r++)if(n&a[r]){var o=a[e];return a[e]=a[r],void(a[r]=o)}}function r(t,e){for(var n=a[e],r=1<<t,o=0;o<a.length;o++)o!==e&&r&a[o]&&(a[o]^=n)}function o(t,e,n){for(var r=1<<e,o=r,i=0;i<n;i++)a[i]&r&&(o+=1<<t[i]);return o}var i=[];return function(t){for(var o=0,i=e-1;i>=0;i--)n(i,o),1<<i&a[o]&&(t[o]=i,r(i,o),o++)}(i),function(t){for(var a=[],n=0,r=t[n],i=e-1;i>=0;i--)i===r?r=t[++n]:a.push(o(t,i,n));return a}(i)}Object.defineProperty(e,"__esModule",{value:!0}),e.powerMod=a,e.powerFactor=r,e.gcd=o,e.lcm=i,e.continuedFraction=s,e.findNullSpaceMod2=c,e.default={powerMod:a,powerFactor:r,gcd:o,lcm:i,continuedFraction:s,findNullSpaceMod2:c}},899:(t,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}(),r=a(382),o=l(r),i=l(a(644)),u=l(a(766)),s=l(a(287)),c=l(a(163));function l(t){return t&&t.__esModule?t:{default:t}}function p(t){return t=t.replace(/^\|/,"").replace(/>$/,""),{value:parseInt(t,2),length:t.length}}function d(t,e,a){a.magnitude()>c.default.roundToZero&&(t[e]=a)}function m(t,e,a){var n=(t[e]||i.default.ZERO).add(a);n.magnitude()>c.default.roundToZero?t[e]=n:delete t[e]}function f(t,e){if(null==t)throw new Error("bit qualification must be supplied");if(t===c.default.ALL)return{from:0,to:e-1};if(s.default.isNumber(t))return{from:t,to:t};if(null!=t.from&&null!=t.to){if(t.from>t.to)throw new Error('bit range must have "from" being less than or equal to "to"');return t}throw new Error("bit qualification must be either: a number, Constants.ALL, or {from: n, to: m}")}function h(t,e){if(t>e)throw new Error("bit range must have `from` being less than or equal to `to`");for(var a=[],n=t;n<=e;n++)a.push(n);return a}function v(t,e){if(null==t)throw new Error("bit qualification must be supplied");if(s.default.isArray(t))return t;if(s.default.isNumber(t))return[t];if(t===c.default.ALL)return h(0,e-1);if(null!=t.from&&null!=t.to)return h(t.from,t.to);throw new Error("bit qualification must be either: a number, an array of numbers, Constants.ALL, or {from: n, to: m}")}function b(t){var e=null;if(t){e=0;for(var a=0;a<t.length;a++)e+=1<<t[a]}return e}var y=[[i.default.SQRT1_2,i.default.SQRT1_2],[i.default.SQRT1_2,i.default.SQRT1_2.negate()]],g=[[i.default.ZERO,i.default.ONE],[i.default.ONE,i.default.ZERO]],x=[[i.default.ZERO,new i.default(0,-1)],[new i.default(0,1),i.default.ZERO]],_=[[i.default.ONE,i.default.ZERO],[i.default.ZERO,i.default.ONE.negate()]],w=[[i.default.ONE,i.default.ZERO],[i.default.ZERO,new i.default(0,1)]],q=[[i.default.ONE,i.default.ZERO],[i.default.ZERO,new i.default(Math.SQRT1_2,Math.SQRT1_2)]],j=function(){function t(e,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.kron=this.tensorProduct,this.R=this.r,this.cnot=this.controlledX,this.not=this.x,this.X=this.x,this.Y=this.y,this.Z=this.z,this.S=this.s,this.T=this.t,this.equal=this.eql,(0,u.default)(arguments,1,"new QState() must be supplied with number of bits (optionally with amplitudes as well)"),a=a||[c.default.ONE],this.numBits=function(){return e},this.amplitude=function(t){var e=s.default.isString(t)?p(t).value:t;return a[e]||i.default.ZERO},this.each=function(t){for(var n=Object.keys(a),o=0;o<n.length;o++){var i=n[o];if(!1===t(new r.QStateComponent(e,i,a[i])))break}}}return n(t,[{key:"multiply",value:function(e){s.default.isNumber(e)&&(e=new i.default(e));var a={};return this.each((function(t){a[t.index]=t.amplitude.multiply(e)})),new t(this.numBits(),a)}},{key:"add",value:function(e){var a={};return this.each((function(t){a[t.index]=t.amplitude})),e.each((function(t){var e=a[t.index]||i.default.ZERO;a[t.index]=t.amplitude.add(e)})),new t(this.numBits(),a)}},{key:"subtract",value:function(t){return this.add(t.multiply(-1))}},{key:"tensorProduct",value:function(e){var a={};return this.each((function(t){e.each((function(n){var r=(t.asNumber()<<e.numBits())+n.asNumber(),o=t.amplitude.multiply(n.amplitude);a[r]=o}))})),new t(this.numBits()+e.numBits(),a)}},{key:"controlledHadamard",value:function(t,e){return(0,u.default)(arguments,2,2,"Must supply control and target bits to controlledHadamard()"),this.controlledApplicationOfqBitOperator(t,e,y)}},{key:"hadamard",value:function(t){return(0,u.default)(arguments,1,1,"Must supply target bits to hadamard() as either a single index or a range."),this.controlledHadamard(null,t)}},{key:"controlledXRotation",value:function(t,e,a){(0,u.default)(arguments,3,3,"Must supply control bits, target bits, and an angle, to controlledXRotation()");var n=a/2,r=new i.default(Math.cos(n)),o=new i.default(0,-Math.sin(n)),s=[[r,o],[o,r]];return this.controlledApplicationOfqBitOperator(t,e,s)}},{key:"rotateX",value:function(t,e){return(0,u.default)(arguments,2,2,"Must supply target bits and angle to rotateX."),this.controlledXRotation(null,t,e)}},{key:"controlledYRotation",value:function(t,e,a){(0,u.default)(arguments,3,3,"Must supply control bits, target bits, and an angle, to controlledYRotation()");var n=a/2,r=new i.default(Math.cos(n)),o=new i.default(Math.sin(n)),s=[[r,o.negate()],[o,r]];return this.controlledApplicationOfqBitOperator(t,e,s)}},{key:"rotateY",value:function(t,e){return(0,u.default)(arguments,2,2,"Must supply target bits and angle to rotateY."),this.controlledYRotation(null,t,e)}},{key:"controlledZRotation",value:function(t,e,a){(0,u.default)(arguments,3,3,"Must supply control bits, target bits, and an angle to controlledZRotation()");var n=a/2,r=new i.default(Math.cos(n)),o=new i.default(0,Math.sin(n)),s=[[r.subtract(o),i.default.ZERO],[i.default.ZERO,r.add(o)]];return this.controlledApplicationOfqBitOperator(t,e,s)}},{key:"rotateZ",value:function(t,e){return(0,u.default)(arguments,2,2,"Must supply target bits and angle to rotateZ."),this.controlledZRotation(null,t,e)}},{key:"controlledR",value:function(t,e,a){(0,u.default)(arguments,3,3,"Must supply control and target bits, and an angle to controlledR().");var n=new i.default(Math.cos(a)),r=new i.default(0,Math.sin(a)),o=[[i.default.ONE,i.default.ZERO],[i.default.ZERO,n.add(r)]];return this.controlledApplicationOfqBitOperator(t,e,o)}},{key:"r",value:function(t,e){return(0,u.default)(arguments,2,2,"Must supply target bits and angle to r()."),this.controlledR(null,t,e)}},{key:"controlledX",value:function(t,e){return(0,u.default)(arguments,2,2,"Must supply control and target bits to cnot() / controlledX()."),this.controlledApplicationOfqBitOperator(t,e,g)}},{key:"x",value:function(t){return(0,u.default)(arguments,1,1,"Must supply target bits to x() / not()."),this.controlledX(null,t)}},{key:"controlledY",value:function(t,e){return(0,u.default)(arguments,2,2,"Must supply control and target bits to controlledY()."),this.controlledApplicationOfqBitOperator(t,e,x)}},{key:"y",value:function(t){return(0,u.default)(arguments,1,1,"Must supply target bits to y()."),this.controlledY(null,t)}},{key:"controlledZ",value:function(t,e){return(0,u.default)(arguments,2,2,"Must supply control and target bits to controlledZ()."),this.controlledApplicationOfqBitOperator(t,e,_)}},{key:"z",value:function(t){return(0,u.default)(arguments,1,1,"Must supply target bits to z()."),this.controlledZ(null,t)}},{key:"controlledS",value:function(t,e){return(0,u.default)(arguments,2,2,"Must supply control and target bits to controlledS()."),this.controlledApplicationOfqBitOperator(t,e,w)}},{key:"s",value:function(t){return(0,u.default)(arguments,1,1,"Must supply target bits to s()."),this.controlledS(null,t)}},{key:"controlledT",value:function(t,e){return(0,u.default)(arguments,2,2,"Must supply control and target bits to controlledT()."),this.controlledApplicationOfqBitOperator(t,e,q)}},{key:"t",value:function(t){return(0,u.default)(arguments,1,1,"Must supply target bits to t()."),this.controlledT(null,t)}},{key:"controlledSwap",value:function(e,a,n){(0,u.default)(arguments,3,3,"Must supply controlBits, targetBit1, and targetBit2 to controlledSwap()");var r={};null!=e&&(e=v(e,this.numBits()));var o=b(e),i=1<<a,s=1<<n;return this.each((function(t){var u=t.asNumber(),c=u;null!=e&&(u&o)!==o||(c=u&~i&~s|(u&s)>>n<<a|(u&i)>>a<<n),r[c]=t.amplitude})),new t(this.numBits(),r)}},{key:"swap",value:function(t,e){return(0,u.default)(arguments,2,2,"Must supply targetBit1 and targetBit2 to swap()"),this.controlledSwap(null,t,e)}},{key:"toffoli",value:function(){(0,u.default)(arguments,2,"At least one control bit and a target bit must be supplied to calls to toffoli()");for(var t=arguments[arguments.length-1],e=[],a=0;a<arguments.length-1;a++)e.push(arguments[a]);return this.controlledX(e,t)}},{key:"controlledApplicationOfqBitOperator",value:function(e,a,n){(0,u.default)(arguments,3,3,"Must supply control bits, target bits, and qbitFunction to controlledApplicationOfqBitOperator().");var r=v(a,this.numBits()),o=null;null!=e&&function(t,e){for(var a=0;a<t.length;a++)for(var n=t[a],r=0;r<e.length;r++)if(n===e[r])throw new Error("control and target bits must not be the same nor overlap")}(o=v(e,this.numBits()),r);for(var i=this,s=0;s<r.length;s++){var c=r[s];i=t.applyToOneBit(o,c,n,i)}return i}},{key:"applyFunction",value:function(e,a,n){(0,u.default)(arguments,3,3,"Must supply control bits, target bits, and functionToApply to applyFunction().");var r=this,o=f(e,this.numBits()),i=f(a,this.numBits());!function(t,e){if(t.to>=e.from&&e.to>=t.from)throw new Error("control and target bits must not be the same nor overlap")}(o,i);var s={},c={},l=(1<<o.to+1)-1,p=(1<<1+i.to-i.from)-1<<i.from;return this.each((function(t){var e=t.asNumber();if(!c[t.index]){var a=(e&l)>>o.from,u=e^n(a)<<i.from&p;u===e?d(s,e,t.amplitude):(c[u]=!0,d(s,e,r.amplitude(u)),d(s,u,t.amplitude))}})),new t(this.numBits(),s)}},{key:"random",value:function(){return Math.random()}},{key:"normalize",value:function(){var e={},a=0;this.each((function(t){var e=t.amplitude.magnitude();a+=e*e}));var n=new i.default(1/Math.sqrt(a));return this.each((function(t){e[t.index]=t.amplitude.multiply(n)})),new t(this.numBits(),e)}},{key:"measure",value:function(e){(0,u.default)(arguments,1,1,"Must supply bits to be measured to measure().");var a,n,r,i,s=this.numBits(),c=v(e,s),l=(n=(a=this).random(),r=void 0,i=0,a.each((function(t){var e=t.amplitude.magnitude();return i+=e*e,r=t.index,i<=n})),parseInt(r,10)),p=b(c),d=l&p,m={};this.each((function(t){var e=t.asNumber();(e&p)===d&&(m[e]=t.amplitude)}));for(var f=0,h=s-1;h>=0;h--)c.indexOf(h)>=0&&(f<<=1,l&1<<h&&(f+=1));var y=new t(this.numBits(),m).normalize();return new o.default(c.length,f,y)}},{key:"qft",value:function(t){(0,u.default)(arguments,1,1,"Must supply bits to be measured to qft().");var e=v(t,this.numBits());return function(t,e){for(;e.length>1;)t=t.swap(e[0],e[e.length-1]),e=e.slice(1,e.length-1);return t}(function t(e,a){var n=a[0];if(a.length>1){e=t(e,a.slice(1));for(var r=1;r<a.length;r++){var o=a[r],i=2*Math.PI/(1<<r+1);e=e.controlledR(n,o,i)}}return e.hadamard(n)}(this,e),e)}},{key:"eql",value:function(e){function a(t,e){var a=!0;return t.each((function(t){return a=t.amplitude.eql(e.amplitude(t.asNumber()))})),a}return!!e&&e instanceof t&&this.numBits()===e.numBits()&&a(this,e)&&a(e,this)}},{key:"toString",value:function(){function t(t,e){var a=t.format(e);return"1"===a?"":"("+a+")"}function e(t,e){return t.asNumber()-e.asNumber()}for(var a=void 0,n="",r={decimalPlaces:4},o=function(t){var a=[];return t.each((function(t){a.push(t)})),a.sort(e),a}(this),i=0;i<o.length;i++)""!==n&&(n+=" + "),n=n+t((a=o[i]).amplitude,r)+"|"+a.asBitString()+">";return n}}],[{key:"fromBits",value:function(e){(0,u.default)(arguments,1,1,"Must supply a bit string");var a=p(e),n={};return n[a.value]=c.default.ONE,new t(a.length,n)}},{key:"applyOperatorMatrix",value:function(t,e,a){return[t[0][e].multiply(a),t[1][e].multiply(a)]}},{key:"applyToOneBit",value:function(e,a,n,r){var o={},i=1<<a,u=~i,s=b(e);return r.each((function(a){var r=a.asNumber();if(null==e||(r&s)===s){var c=(i&r)>0?1:0,l=t.applyOperatorMatrix(n,c,a.amplitude),p=r|i;m(o,r&u,l[0]),m(o,p,l[1])}else o[r]=a.amplitude})),new t(r.numBits(),o)}}]),t}();e.default=j},163:(t,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0});var n,r=(n=a(644))&&n.__esModule?n:{default:n};e.default={ZERO:r.default.ZERO,ONE:new r.default(1,0),ALL:"ALL",roundToZero:1e-7}},202:(t,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.jsqubits=void 0;var n=c(a(899)),r=c(a(644)),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e.default=t,e}(a(933)),i=a(382),u=c(i),s=c(a(163));function c(t){return t&&t.__esModule?t:{default:t}}function l(t){return n.default.fromBits(t)}l.complex=function(t,e){return new r.default(t,e)},l.real=function(t){return new r.default(t,0)},l.QMath=o,l.Complex=r.default,l.QState=n.default,l.Measurement=u.default,l.QStateComponent=i.QStateComponent,Object.assign(l,s.default),e.default=l,e.jsqubits=l},287:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){return Object.prototype.toString.call(t)};e.default={isNull:function(t){return"[object Null]"===a(t)},isObject:function(t){return"[object Object]"===a(t)},isArray:function(t){return"[object Array]"===a(t)},isString:function(t){return"[object String]"===a(t)},isNumber:function(t){return"[object Number]"===a(t)},isBoolean:function(t){return"[object Boolean]"===a(t)},isDate:function(t){return"[object Date]"===a(t)},isUndefined:function(t){return"[object Undefined]"===a(t)},isRegExp:function(t){return"[object RegExp]"===a(t)}}},766:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){for(var a=1e4,n="Must supply at least "+e+" parameters.",r=arguments.length,o=Array(r>2?r-2:0),i=2;i<r;i++)o[i-2]=arguments[i];if(o.length>2)throw new Error("Internal error: too many arguments to validateArgs");if(2===o.length?(a=o[0],n=o[1]):1===o.length&&(n=o[0]),t.length<e||t.length>a)throw n}}},a={};function n(e){var r=a[e];if(void 0!==r)return r.exports;var o=a[e]={exports:{}};return t[e].call(o.exports,o,o.exports,n),o.exports}n.d=(t,e)=>{for(var a in e)n.o(e,a)&&!n.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var r={};(()=>{n.r(r),n.d(r,{BrowserUIClient:()=>Y});var t=function(){return t=Object.assign||function(t){for(var e,a=1,n=arguments.length;a<n;a++)for(var r in e=arguments[a])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},t.apply(this,arguments)},e={X:"x",Y:"y",Z:"z",H:"h",T:"t",S:"s"},a={RX:"rx",RY:"ry",RZ:"rz"},o={CNOT:"cnot",CCNOT:"ccnot"},i=t(t(t({},e),a),o);function u(t){var n=[];return function(t,e){t.push("OPENQASM 2.0;"),t.push('include "qelib1.inc";'),t.push(""),t.push("qreg q[".concat(e.size,"];"))}(n,t),function(t,n){n.circuit.forEach((function(n){n.forEach((function(n,r){if(n){var i=function(t,n){switch(t.type){case e.X:case e.Y:case e.Z:case e.H:case e.S:case e.T:return function(t,a){var n="q[".concat(a,"]");switch(t.type){case e.X:return"x ".concat(n,";");case e.Y:return"y ".concat(n,";");case e.Z:return"z ".concat(n,";");case e.H:return"h ".concat(n,";");case e.S:return"s ".concat(n,";");case e.T:return"t ".concat(n,";");default:throw new Error("applySingleGate: cannot apply unknown gate: ".concat(t.type))}}(t,n);case a.RX:case a.RY:case a.RZ:return function(t,e){var n=1===t.param?"(pi)":0===t.param?"(0)":"(pi * ".concat(t.param,")"),r="".concat(n," q[").concat(e,"]");switch(t.type){case a.RX:return"rx".concat(r,";");case a.RY:return"ry".concat(r,";");case a.RZ:return"rz".concat(r,";");default:throw new Error("applyParametricSingleGate: cannot apply unknown gate: ".concat(t.type))}}(t,n);case o.CNOT:case o.CCNOT:return function(t,e){var a=t.controllQubitIndex.map((function(t){return"q[".concat(t,"]")})).join(",");switch(t.type){case o.CNOT:return"cx ".concat(a,",q[").concat(e,"];");case o.CCNOT:return"ccx ".concat(a,",q[").concat(e,"];");default:throw new Error("applyMultiGate: cannot apply unknown gate: ".concat(t.type))}}(t,n);default:return""}}(n,r);t.push(i)}}))}))}(n,t),n.join("\n")}function s(t){var e=new Set;return t.forEach((function(t){t.forEach((function(t){t&&e.add(t.type)}))})),e}function c(t){if(!t.observable||0===t.observable.length||0===t.observable[0].operators.length)return!0;var e=function(t){var e=new Set;return t.forEach((function(t){t.operators.forEach((function(t){t&&e.add(t)}))})),e}(t.observable);return!(e.has("x")||e.has("y")||e.has("z"))}var l=function(t){return Object.values(e).some((function(e){return e===t}))},p=function(t){return Object.values(a).some((function(e){return e===t}))},d=function(t){return Object.values(o).some((function(e){return e===t}))},m="    ";function f(t,n){var r=[];return function(t,e){t.push("import pennylane as qml"),t.push("from numpy import pi"),t.push(""),t.push('device = qml.device("default.qubit", wires='.concat(e.size,")"))}(r,t),r.push(""),function(t,n){t.push("@qml.qnode(device)"),t.push("def circuit():"),n.circuit.forEach((function(n){n.forEach((function(n,r){if(n){var i=function(t,n){switch(t.type){case e.X:case e.Y:case e.Z:case e.H:case e.S:case e.T:return function(t,a){switch(t.type){case e.X:return"qml.PauliX(wires=".concat(a,")");case e.Y:return"qml.PauliY(wires=".concat(a,")");case e.Z:return"qml.PauliZ(wires=".concat(a,")");case e.H:return"qml.Hadamard(wires=".concat(a,")");case e.S:return"qml.S(wires=".concat(a,")");case e.T:return"qml.T(wires=".concat(a,")");default:throw new Error("applySingleGate: cannot apply unknown gate: ".concat(t.type))}}(t,n);case a.RX:case a.RY:case a.RZ:return function(t,e){var n=t.param;switch(t.type){case a.RX:return"qml.RX(pi * ".concat(n,", wires=").concat(e,")");case a.RY:return"qml.RY(pi * ".concat(n,", wires=").concat(e,")");case a.RZ:return"qml.RZ(pi * ".concat(n,", wires=").concat(e,")");default:throw new Error("applyParametricSingleGate: cannot apply unknown gate: ".concat(t.type))}}(t,n);case o.CNOT:case o.CCNOT:return function(t,e){switch(t.type){case o.CNOT:return"qml.CNOT(wires=[".concat(t.controllQubitIndex[0],", ").concat(e,"])");case o.CCNOT:return"qml.Toffoli(wires=[".concat(t.controllQubitIndex.join(", "),", ").concat(e,"])");default:throw new Error("applyMultiGate: cannot apply unknown gate: ".concat(t.type))}}(t,n);default:return""}}(n,r);t.push(m+i)}}))}))}(r,t),function(t,a,n){var r;r=c(a)?{observable:[{operators:Array(n).fill(void 0),coefficient:1}]}:a;var o="return ".concat(r.observable.map((function(t){var a=t.operators.map((function(t,a){return function(t,a){if(!t)return"qml.Identity(".concat(a,")");switch(t){case e.X:return"qml.PauliX(".concat(a,")");case e.Y:return"qml.PauliY(".concat(a,")");case e.Z:return"qml.PauliZ(".concat(a,")");default:throw new Error("applyObservableOperator: cannot apply unknown operator: ".concat(t))}}(t,a)}));return"qml.expval(".concat(t.coefficient," * ").concat(a.join(" @ "),")")})).join(", "));t.push(m+o),t.push(""),t.push("r = circuit()"),r.observable.length>2?t.push("print(sum(r))"):t.push("print(r)")}(r,n,t.size),r.join("\n")}function h(t){return t.has("rx")||t.has("ry")||t.has("rz")}function v(t,n){var r=[];return function(t,e){e&&t.push("from numpy import pi"),t.push("from qiskit import *"),t.push("from qiskit.opflow import X, Y, Z, I, StateFn, PauliExpectation, CircuitSampler"),t.push("from qiskit.opflow.expectations import AerPauliExpectation, MatrixExpectation"),t.push("from qiskit.opflow.state_fns import CircuitStateFn"),t.push("from qiskit.utils import QuantumInstance")}(r,h(s(t.circuit))),r.push(""),function(t,e){t.push("qc = QuantumCircuit()"),t.push("qr = QuantumRegister(".concat(e.size,", 'qreg')")),t.push("qc.add_register(qr)")}(r,t),r.push(""),function(t,n){n.circuit.forEach((function(n){n.forEach((function(n,r){if(n){var i=function(t,n){switch(t.type){case e.X:case e.Y:case e.Z:case e.H:case e.S:case e.T:return function(t,a){switch(t.type){case e.X:return"qc.x(qr[".concat(a,"])");case e.Y:return"qc.y(qr[".concat(a,"])");case e.Z:return"qc.z(qr[".concat(a,"])");case e.H:return"qc.h(qr[".concat(a,"])");case e.S:return"qc.s(qr[".concat(a,"])");case e.T:return"qc.t(qr[".concat(a,"])");default:throw new Error("applySingleGate: cannot apply unknown gate: ".concat(t.type))}}(t,n);case a.RX:case a.RY:case a.RZ:return function(t,e){var n=t.param;switch(t.type){case a.RX:return"qc.rx(pi * ".concat(n,", qr[").concat(e,"])");case a.RY:return"qc.ry(pi * ".concat(n,", qr[").concat(e,"])");case a.RZ:return"qc.rz(pi * ".concat(n,", qr[").concat(e,"])");default:throw new Error("applyParametricSingleGate: cannot apply unknown gate: ".concat(t.type))}}(t,n);case o.CNOT:case o.CCNOT:return function(t,e){switch(t.type){case o.CNOT:return"qc.cx(qr[".concat(t.controllQubitIndex[0],"], qr[").concat(e,"])");case o.CCNOT:var a=t.controllQubitIndex.map((function(t){return"qr[".concat(t,"]")})).join(", ");return"qc.ccx(".concat(a,", qr[").concat(e,"])");default:throw new Error("applyMultiGate: cannot apply unknown gate: ".concat(t.type))}}(t,n);default:return""}}(n,r);t.push(i)}}))}))}(r,t),r.push(""),function(t,e,a){var n;n=c(e)?{observable:[{operators:Array(a).fill(void 0),coefficient:1}]}:e,t.push("psi = CircuitStateFn(qc)"),t.push("vector_sim = Aer.get_backend('statevector_simulator')"),t.push("q_instance = QuantumInstance(vector_sim, shots=1)");var r="op = ".concat(n.observable.map((function(t){var e=t.operators.map((function(t){return t?t.toUpperCase():"I"})).reverse().join("^");return"(".concat(t.coefficient," * ").concat(e,")")})).join(" + "));t.push(r),t.push("measurable_expression = StateFn(op, is_measurement=True).compose(psi)"),t.push("expectation = AerPauliExpectation().convert(measurable_expression)"),t.push("sampler = CircuitSampler(vector_sim).convert(expectation)")}(r,n,t.size),r.push("print('Sampled:', sampler.eval().real)"),r.join("\n")}var b="from numpy import pi",y="from qulacs import QuantumState, QuantumCircuit, Observable",g="from qulacs import QuantumState, ParametricQuantumCircuit, Observable",x="from qulacs.gate import",_="circuit.update_quantum_state(state)",w="print(expectation_value)";function q(t,n){var r=s(t.circuit),u=h(r),l=[];return function(t,e,a){if(a?(t.push(b),t.push(g)):t.push(y),e.size>0){var n=x;Array.from(e).sort().forEach((function(t,a){var r=function(t){return t===i.CCNOT?"TOFFOLI":t.toUpperCase()}(t);n+=" ".concat(r),a<e.size-1&&(n+=",")})),t.push(n)}}(l,r,u),l.push(""),function(t,n,r){t.push(function(t){return"state = QuantumState(".concat(t,")\nstate.set_zero_state()")}(n.size)),t.push(function(t,e){return e?"circuit = ParametricQuantumCircuit(".concat(t,")"):"circuit = QuantumCircuit(".concat(t,")")}(n.size,r)),t.push(""),function(t,n){n.forEach((function(n){n.forEach((function(n,r){if(n){var i=function(t,n){switch(t.type){case e.X:case e.Y:case e.Z:case e.H:case e.S:case e.T:return function(t,a){switch(t.type){case e.X:return"circuit.add_gate(X(".concat(a,"))");case e.Y:return"circuit.add_gate(Y(".concat(a,"))");case e.Z:return"circuit.add_gate(Z(".concat(a,"))");case e.H:return"circuit.add_gate(H(".concat(a,"))");case e.S:return"circuit.add_gate(S(".concat(a,"))");case e.T:return"circuit.add_gate(T(".concat(a,"))");default:throw new Error("applySingleGate: cannot apply unknown gate: ".concat(t.type))}}(t,n);case a.RX:case a.RY:case a.RZ:return function(t,e){var n=t.param;switch(t.type){case a.RX:return"circuit.add_gate(RX(".concat(e,", pi * ").concat(n,"))");case a.RY:return"circuit.add_gate(RY(".concat(e,", pi * ").concat(n,"))");case a.RZ:return"circuit.add_gate(RZ(".concat(e,", pi * ").concat(n,"))");default:throw new Error("applyParametricSingleGate: cannot apply unknown gate: ".concat(t.type))}}(t,n);case o.CNOT:case o.CCNOT:return function(t,e){switch(t.type){case o.CNOT:return"circuit.add_gate(CNOT(".concat(t.controllQubitIndex[0],", ").concat(e,"))");case o.CCNOT:return"circuit.add_gate(TOFFOLI(".concat(t.controllQubitIndex.join(", "),", ").concat(e,"))");default:throw new Error("applyMultiGate: cannot apply unknown gate: ".concat(t.type))}}(t,n);default:return""}}(n,r);t.push(i)}}))}))}(t,n.circuit),t.push(_)}(l,t,u),l.push(""),function(t,e,a){var n;n=c(e)?{observable:[{operators:[],coefficient:1}]}:e,t.push("expectation_value = 0"),n.observable.forEach((function(e){t.push("copied_state = state.copy()"),t.push("observable = Observable(".concat(a,")"));var n="";e.operators.forEach((function(t,e){t&&(e>0&&n.length>0&&(n+=" "),n+="".concat(t.toUpperCase()," ").concat(e))})),t.push("observable.add_operator(".concat(e.coefficient,', "').concat(n,'")')),t.push("expectation_value += observable.get_expectation_value(copied_state)")}))}(l,n,t.size),l.push(w),l.join("\n")}function j(t){var e=[];return function(t,e){var a;(a=c(e)?{observable:[{operators:[void 0],coefficient:0}]}:e).observable.forEach((function(e,n){var r="";e.operators.forEach((function(t,e){t&&(e>0&&r.length>0&&(r+=" "),r+="".concat(t.toUpperCase()).concat(e))})),t.push("(".concat(e.coefficient,"+0j) [").concat(r,"]").concat(n===a.observable.length-1?"":" +"))}))}(e,t),e.join("\n")}var O={Qasm2:"qasm2"},C={OpenFermion:"openFermion"},R=function(t,e,a){if(a||2===arguments.length)for(var n,r=0,o=e.length;r<o;r++)!n&&r in e||(n||(n=Array.prototype.slice.call(e,0,r)),n[r]=e[r]);return t.concat(n||Array.prototype.slice.call(e))};var S=/^(x|y|z|h|t|s|rx|ry|rz|cx|ccx)(\((.+)\))* q\[/,k={isHeader:function(t){return-1!==t.indexOf("OPENQASM 2.0")},isInclude:function(t){return-1!==t.indexOf('include "qelib1.inc"')},isGate:function(t){return!!S.exec(t)}};function M(t){switch(t){case"x":return e.X;case"y":return e.Y;case"z":return e.Z;case"h":return e.H;case"t":return e.T;case"s":return e.S;case"rx":return a.RX;case"ry":return a.RY;case"rz":return a.RZ;case"cx":return o.CNOT;case"ccx":return o.CCNOT;default:throw new Error("unknown gate type")}}function E(t,e){var a=-1;return t.forEach((function(t,n){t.forEach((function(t,r){r===e&&t&&(a=Math.max(a,n))}))})),a}function T(t,e){t.push(Array(e).fill(void 0))}function I(t){try{var a=t.replace(/(\r\n|\n|\r)/gm,"\n").split("\n"),n=[];a.forEach((function(t){var e=/\((.+)\+0j\)\s*\[(.*)\]\s*\+*/.exec(t);if(e){var a=parseFloat(e[1]),r=Array.from(t.matchAll(/([X|Y|Z])(\d)/g),(function(t){return{gate:t[1],index:parseInt(t[2],10)}}));n.push({coefficient:a,operators:r})}}));var r=[];return n.forEach((function(t){var a=Math.max.apply(null,t.operators.map((function(t){return t.index})).concat(1)),n=Array(a).fill(void 0);t.operators.forEach((function(t){if(t){var a=function(t){switch(t){case"X":return e.X;case"Y":return e.Y;case"Z":return e.Z;default:return null}}(t.gate);a&&(n[t.index]=a)}}));var o={coefficient:t.coefficient,operators:n};r.push(o)})),{isSucceeded:!0,observable:{observable:r}}}catch(t){return{isSucceeded:!1}}}function Q(t){var e,a,n=(e=t.circuitType,a=t.text,e===O.Qasm2?function(t){var e=[];try{var a=t.replace(/(\r\n|\n|\r)/gm,"\n").split("\n"),n=a.find((function(t){return-1!==t.indexOf("qreg")})),r=parseInt(/qreg\s+q\[(.*)\]/.exec(n)[1],10);a.forEach((function(t){var a=function(t){var e=function(t){return/^\s*(.*)/.exec(t)[1].replace("'",'"')}(t);return k.isGate(e)?function(t){var e=S.exec(t),a=e[1],n=e[3]?function(t){var e=t.replace("pi","1");if(/[^\d+\-*/\s.]/.exec(e))throw new Error("theta include illegal string: ".concat(t));for(var a=Array.from(e.matchAll(/([\d.]+|\+|-|\*|\/)/g),(function(t){return t[0]})),n=parseFloat(a[0]),r=1;r<a.length;r+=1){switch(a[r]){case"+":n+=parseFloat(a[r+1]);break;case"-":n-=parseFloat(a[r+1]);break;case"*":n*=parseFloat(a[r+1]);break;case"/":n/=parseFloat(a[r+1]);break;default:continue}r+=1}return-1===t.indexOf("pi")&&(n/=Math.PI),n}(e[3]):void 0,r=Array.from(t.matchAll(/q\[(\d)\]/g),(function(t){return parseInt(t[1],10)}));return{gate:M(a),qubitIndex:r,param:n}}(e):null}(t);a&&e.push(a)}));var o=[Array(r).fill(void 0)];return e.forEach((function(t){!function(t,e,a){var n,r=Array(a).fill(void 0),o=e.qubitIndex[e.qubitIndex.length-1],i=e.gate;(n=l(i)?{type:i,size:1}:p(i)?{type:i,size:1,param:e.param}:d(i)?{type:i,size:e.qubitIndex.length,controllQubitIndex:e.qubitIndex.slice(0,e.qubitIndex.length-1)}:null)&&(r[o]=n),t.push(r)}(o,t,r)})),{isSucceeded:!0,circuit:{circuit:function(t,e){var a=[];return T(a,e),t.forEach((function(t){t.forEach((function(t,n){if(t)if(l(t.type)||p(t.type)){for(var r=E(a,n);a.length<=r+1;)T(a,e);a[r+1][n]=t}else if(d(t.type)){var o=R([],Array(e),!0).map((function(t,e){return e})),i=t.controllQubitIndex.concat(n),u=Math.max.apply(null,i),s=Math.min.apply(null,i);i=o.slice(s,u+1);for(var c=Math.max.apply(null,i.map((function(t){return E(a,t)})));a.length<=c+1;)T(a,e);i.forEach((function(e){if(a[c+1][e]=t,e!==n){var r=JSON.parse(JSON.stringify(t));r.controllQubitIndex=[],a[c+1][e]=r}}))}}))})),a.forEach((function(t,e){t.forEach((function(t,n){t&&d(t.type)&&0===t.controllQubitIndex.length&&(a[e][n]=void 0)}))})),a}(o,r),size:r}}}catch(t){return{isSucceeded:!1}}}(a):{isSucceeded:!1});return n.isSucceeded?Promise.resolve(n.circuit):Promise.reject()}var Z=n(458);function N(t,n,r){switch(t.type){case e.X:n.x();break;case e.Y:n.y();break;case e.Z:n.z();break;case e.H:n.h();break;case e.T:n.t();break;case e.S:n.s();break;case a.RX:n.rotateX(t.param*Math.PI);break;case a.RY:n.rotateY(t.param*Math.PI);break;case a.RZ:n.rotateZ(t.param*Math.PI);break;case o.CNOT:var i=t.controllQubitIndex[0];n.cnot(r[i]);break;case o.CCNOT:var u=t.controllQubitIndex[0],s=t.controllQubitIndex[1];n.toffoli(r[u],r[s])}}var G,P=(G=function(t,e){return G=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])},G(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function a(){this.constructor=t}G(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}),A=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return P(e,t),e.prototype.getStateVectorWithExpectationValue=function(t,e){var a=V(t);return{stateVector:a[0].simulated.getStateVector(),expectationValue:L(a,e)}},e.prototype.getExpectationValueMap=function(t,e,a,n,r){if(n<0)throw new Error("QramanaComputeDriver#getExpectationValueMap: invalid steps");if(0===n)return[];var o=[];function i(n){var r=L(V(t,{position:a,param:n}),e);o.push({param:n,expectationValue:r})}i(0);for(var u=1;u<n;u+=1)i(u/(n-1)*r);return o},e.prototype.runShotTask=function(t,e){for(var a=Math.pow(2,t.size),n=new Array(a).fill(0),r=V(t),o=function(t){var e=r[0].simulated.clone().qubits.map((function(t){return t.measure()})),a=0;e.forEach((function(t,n){if(0!==t){var r=e.length-n-1;a+=Math.pow(2,r)}})),n[a]+=1},i=0;i<e;i+=1)o();return n},e}((function(){}));function V(t,e){var a=function(t){for(var e=[new Z.xz({value:0})],a=1;a<t;a+=1){var n=new Z.xz({value:0});e[0].simulated.mergeStateVector(n),e.push(n)}return e}(t.size);return t.circuit.forEach((function(t,n){t.forEach((function(t,r){if(t){var o=a[r];e&&n===e.position.step&&r===e.position.index?N({size:1,type:t.type,param:e.param},o,a):N(t,o,a)}}))})),a}function L(t,e){var a;a=c(e)?{observable:[{operators:[],coefficient:1}]}:e;var n=0;return a.observable.forEach((function(e){var a=t[0].simulated.clone().qubits,r=a[0].simulated.getStateVector();e.operators.forEach((function(t,e){t&&N({type:t,size:1},a[e],a)}));var o,i,u,s=(o=r,i=a[0].simulated.getStateVector(),u={re:0,im:0},o.forEach((function(t,e){var a,n;u=function(t,e){return{re:t.re+e.re,im:t.im+e.im}}((a={re:t.re,im:-1*t.im},n=i[e],{re:a.re*n.re-a.im*n.im,im:a.re*n.im+a.im*n.re}),u)})),u).re;n+=s*e.coefficient})),n}var D=function(){var t=function(e,a){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])},t(e,a)};return function(e,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function n(){this.constructor=e}t(e,a),e.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}(),Y=function(t){function e(e){var a=t.call(this,e)||this;return a.computeDriver=new A,a}return D(e,t),e.prototype.validate=function(t){return a=(e=t).circuitInformation.size,n=0,r=0,e.circuitInformation.circuit.forEach((function(t){t&&(n=Math.max(n,t.length))})),e.observableInformation.observable.forEach((function(t){t&&t.operators&&(r=Math.max(r,t.operators.length))})),!(a<n||a<r);var e,a,n,r},e.prototype.update=function(t){if(!this.validate(t))return Promise.reject(new Error("invalid uiState"));this.uiState=t;var e,a,n=this.computeDriver.getStateVectorWithExpectationValue(t.circuitInformation,t.observableInformation),r=n.stateVector.map((function(t){return e=t,Math.sqrt(Math.pow(e.re,2)+Math.pow(e.im,2));var e}));return Promise.resolve({expectationValue:n.expectationValue,stateVector:n.stateVector,stateVectorAbsoluted:r,stateVectorArgument:n.stateVector.map((function(t){return e=t,Math.atan2(e.im,e.re)/Math.PI;var e})),probabilityVector:r.map((function(t){return Math.pow(t,2)})),codes:{translateCodes:(e=t.circuitInformation,a=t.observableInformation,{qulacs:q(e,a),qiskit:v(e,a),pennylane:f(e,a)}),circuitCodes:z(t.circuitInformation),observableCodes:B(t.observableInformation)}})},e.prototype.requestParametricExpectedValues=function(t){if(!this.uiState)return Promise.reject(new Error("Need Circuit information before request expected values"));var e=this.computeDriver.getExpectationValueMap(this.uiState.circuitInformation,this.uiState.observableInformation,t.position,t.steps,this.parametricGateRange);return Promise.resolve({steps:t.steps,expectationValueMap:e})},e.prototype.startShot=function(t){if(!this.uiState)return Promise.reject(new Error("Need Circuit information before request start shots"));var e=this.computeDriver.runShotTask(this.uiState.circuitInformation,t.shot),a=new Array(Math.pow(2,this.uiState.circuitInformation.size)).fill(0);return e.forEach((function(t){a[t]+=1})),a=a.map((function(e){return e/t.shot})),Promise.resolve({samplingMap:e,samplingProbabilityMap:a})},e.prototype.textToCircuitInformation=function(t){return Q(t)},e.prototype.textToObservableInformation=function(t){return function(t){var e,a,n=(e=t.observableType,a=t.text,e===C.OpenFermion?I(a):{isSucceeded:!1});return n.isSucceeded?Promise.resolve(n.observable):Promise.reject()}(t)},e}((function(t){var e;this.parametricGateRange=null!==(e=t.parametricGateRange)&&void 0!==e?e:2}));function z(t){return{qasm2:u(t)}}function B(t){return{openFermion:j(t)}}})(),e.v=r})()}},function(t){t.O(0,[401,601,774,888,179],(function(){return e=87314,t(t.s=e);var e}));var e=t.O();_N_E=e}]);