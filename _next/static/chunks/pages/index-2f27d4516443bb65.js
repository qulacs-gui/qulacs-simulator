/*! For license information please see index-2f27d4516443bb65.js.LICENSE.txt */
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8738:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(98443)}])},98443:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return mo}});var r=n(52322),a=n(2784),o=n(2732),u=n(76539),i=n(79162);function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){c(t,e,n[e])}))}return t}var s={EMPTY:{type:"empty",size:1}},f={CONTROL_QUBIT:{type:"control_qubit",connectedMultiGate:{type:"cnot",position:[0,0]},size:1}},p={X:{type:"x",size:1},Y:{type:"y",size:1},Z:{type:"z",size:1}},m=l({},p,{H:{type:"h",size:1},T:{type:"t",size:1},S:{type:"s",size:1}}),d={RX:{type:"rx",param:0,size:1},RY:{type:"ry",param:0,size:1},RZ:{type:"rz",param:0,size:1}},h={CNOT:{type:"cnot",controllQubitIndex:[0],size:2},CCNOT:{type:"ccnot",controllQubitIndex:[0],size:3}},v=l({},s,p),y=l({},s,f,m,d,h);function b(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function g(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){b(t,e,n[e])}))}return t}var x=function(t){return"empty"===t.type},w=function(t){return"rx"===t.type||"ry"===t.type||"rz"===t.type},_=function(t){return"cnot"===t.type||"ccnot"===t.type},O=function(t){return"control_qubit"===t.type},j=function(t){return!x(t.item)&&"control_qubit"!==t.item.type},S=function(t){return{item:t,id:(0,i.x0)()}},q=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:y.EMPTY;return new Array(t).fill("").map((function(){return S(e)}))};var C=(0,o.cn)({key:"circuitGateItemsAtom",default:[q(1)],dangerouslyAllowMutability:!0}),R=(0,o.cn)({key:"circuitSelectedParametricGateState",default:null}),k=(0,o.nZ)({key:"circuiteGateItemsState",get:function(t){return(0,t.get)(C)},set:function(t,e){var n,r,a=t.set;if(n=e,!(null!=(r=o.nY)&&"undefined"!=typeof Symbol&&r[Symbol.hasInstance]?r[Symbol.hasInstance](n):n instanceof r))if(e[e.length-1].some((function(t){var e=t.item;return!x(e)})))e.push(q(e[0].length));else for(var u=e.length-1;u>0;u-=1){if(!e[u-1].every((function(t){var e=t.item;return x(e)})))break;e.pop()}a(C,e)},dangerouslyAllowMutability:!0});var I=(0,o.cn)({key:"observableGateItemsAtom",default:[q(1)],dangerouslyAllowMutability:!0}),E=(0,o.cn)({key:"observableCoefficientsState",default:[0],dangerouslyAllowMutability:!0}),M=(0,o.nZ)({key:"observableeGateItemsState",get:function(t){return(0,t.get)(I)},set:function(t,e){var n,r,a=t.get,u=t.set,i=a(E).slice();if(n=e,!(null!=(r=o.nY)&&"undefined"!=typeof Symbol&&r[Symbol.hasInstance]?r[Symbol.hasInstance](n):n instanceof r))if(e[e.length-1].some((function(t){var e=t.item;return!x(e)})))e.push(q(e[0].length)),i.push(0);else for(var c=e.length-1;c>0;c-=1){if(!e[c-1].every((function(t){var e=t.item;return x(e)})))break;e.pop(),i.pop()}u(E,i),u(I,e)},dangerouslyAllowMutability:!0});function T(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function A(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,a,o=[],u=!0,i=!1;try{for(n=n.call(t);!(u=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);u=!0);}catch(t){i=!0,a=t}finally{try{u||null==n.return||n.return()}finally{if(i)throw a}}return o}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return T(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return T(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var P=function(t,e,n){var r,a=t,o=A(e,2),u=o[0],i=o[1],c=A(n,2),l=c[0],s=c[1];return r=[a[l][s],a[u][i]],a[u][i]=r[0],a[l][s]=r[1],a};function Q(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Z(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,a,o=[],u=!0,i=!1;try{for(n=n.call(t);!(u=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);u=!0);}catch(t){i=!0,a=t}finally{try{u||null==n.return||n.return()}finally{if(i)throw a}}return o}}(t,e)||G(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(t){return function(t){if(Array.isArray(t))return Q(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||G(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G(t,e){if(t){if("string"==typeof t)return Q(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Q(t,e):void 0}}var V=function(t){return"desc"===t?function(t,e){return e-t}:function(t,e){return t-e}},L=function(t,e,n,r){var a=Z(n,2),o=a[0],u=a[1],i=e.type,c=null!=r?r:function(t,e,n){var r=Z(n,2),a=r[0],o=t[r[1]],u=function(t){return t.every((function(t){var e;return"empty"===(null===(e=o[t])||void 0===e?void 0:e.item.type)}))},i=new Array(e.size-1).fill(""),c=i.map((function(t,e){return a-(e+1)})),l=i.map((function(t,e){return a+(e+1)}));if(u(c))return c;if(u(l))return l;var s=[a-1,a+1];return"ccnot"===e.type&&u(s)?s:[]}(t,e,n).sort(V("asc"));return t[u]=t[u].map((function(t,e){return c.includes(e)?S(g({},f.CONTROL_QUBIT,{connectedMultiGate:{position:n,type:i}})):e===o?function(t,e){var n="cnot"===t?y.CNOT:y.CCNOT;return S(g({},n,{controllQubitIndex:e}))}(i,c):t})),t},D=function(t,e,n){var r=Z(n,2),a=r[0],o=r[1],u=t.slice();return u[o].splice(a,1,e),u},Y=function(t,e,n){var r=D(t,S(e),n);return _(e)?L(r,e,n):r},z=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return t.map((function(t){return N(t).concat(N(q(e,y.EMPTY)))}))},B=function(t,e,n){var r=D(t,S(y.EMPTY),n);if(_(e))for(var a=Z(n,2)[1],o=Z(e.controllQubitIndex,2),u=o[0],i=o[1],c=u;c<=(null!=i?i:u);c+=1)r[a].splice(c,1,S(y.EMPTY));if(O(e)){var l=Z(e.connectedMultiGate.position,2),s=l[0],f=l[1];B(t,t[f][s].item,[s,f])}return r},X=function(t){var e=t.slice();return t.forEach((function(t,n){if(t.length>1){var r=t.length-1;e=B(e,t[r].item,[r,n])}})),e.forEach((function(t){t.pop()})),e},F=function(t,e,n,r){if(_(e))return Y(B(t,e,n),e,r);if(O(e))return function(t,e,n,r){var a=Z(n,1)[0],o=Z(r,1)[0],u=e.connectedMultiGate.position,i=Z(u,2),c=i[0],l=t[i[1]][c].item;if(!_(l))throw new Error("Update item is NOT MultiGate type. target:".concat(l.type));var s=l.controllQubitIndex.findIndex((function(t){return t===a})),f=l.controllQubitIndex.map((function(t,e){return e===s?o:t})).sort(V("asc")),p=D(B(t,l,u),S(l),u);return L(p,l,u,f),p}(t,e,n,r);var a=Z(n,2),o=a[0],u=a[1],i=Z(r,2),c=i[0],l=i[1];return P(t.slice(),[u,o],[l,c])};function U(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function H(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,a,o=[],u=!0,i=!1;try{for(n=n.call(t);!(u=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);u=!0);}catch(t){i=!0,a=t}finally{try{u||null==n.return||n.return()}finally{if(i)throw a}}return o}}(t,e)||$(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function W(t){return function(t){if(Array.isArray(t))return U(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||$(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $(t,e){if(t){if("string"==typeof t)return U(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?U(t,e):void 0}}var K=function(t,e,n){var r=H(n,2),a=r[0],o=r[1],u=t.slice();return u[o].splice(a,1,e),u},J=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return t.map((function(t){return W(t).concat(W(q(e,v.EMPTY)))}))},tt=function(t){var e=t.slice();return e.forEach((function(t){t.length>1&&t.pop()})),e};function et(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function nt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,a,o=[],u=!0,i=!1;try{for(n=n.call(t);!(u=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);u=!0);}catch(t){i=!0,a=t}finally{try{u||null==n.return||n.return()}finally{if(i)throw a}}return o}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return et(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return et(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var rt=a.createContext(null),at=function(){return(0,a.useContext)(rt)},ot=function(t){var e=t.children,n=nt((0,o.FV)(R),2),i=n[0],c=n[1],l=(0,o.Zl)(M),s=nt((0,o.FV)(k),2),f=s[0],p=s[1],m=(0,a.useMemo)((function(){return{gateItemsColumnLength:f.length,gateItemsRowLength:f[0].length}}),[f]),d=m.gateItemsColumnLength,h=m.gateItemsRowLength,v=(0,u.Z)(h),y=(0,a.useCallback)((function(){h>=5||p((function(t){return z(t)}))}),[p,h]),b=(0,a.useCallback)((function(){h<=1||p((function(t){return X(t)}))}),[p,h]),g=(0,a.useCallback)((function(t,e){p((function(n){return Y(n,t,e)}))}),[p]),x=(0,a.useCallback)((function(t,e){p((function(n){return B(n,t,e)}))}),[p]),w=(0,a.useCallback)((function(t,e,n){p((function(r){return F(r,t,e,n)}))}),[p]),_=(0,a.useCallback)((function(t,e){p((function(n){return function(t,e,n){return D(t,S(e),n)}(n,t,e)}))}),[p]),O=(0,a.useCallback)((function(t){var e=t.gateItems,n=e[0].length;p(e),l((function(t){return t[0].length<n?J(t,n-t[0].length):t}))}),[p,l]),j=(0,a.useCallback)((function(){c(null),p([q(h)])}),[c,p,h]),C=(0,a.useMemo)((function(){return{selectedParametricGate:i,gateItems:f,gateItemsColumnLength:d,gateItemsRowLength:h,updateSelectedParametricGate:c,addGateItemsRow:y,removeGateItemsRow:b,addGateItem:g,removeGateItem:x,moveGateItem:w,updateGateItem:_,replace:O,reset:j}}),[i,f,d,h,c,y,b,g,x,w,_,O,j]);return(0,a.useEffect)((function(){null!=v&&h!==v&&l((function(t){return t[0].length>h?tt(t):t}))}),[h]),(0,r.jsx)(rt.Provider,{value:C,children:e})};function ut(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function it(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,a,o=[],u=!0,i=!1;try{for(n=n.call(t);!(u=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);u=!0);}catch(t){i=!0,a=t}finally{try{u||null==n.return||n.return()}finally{if(i)throw a}}return o}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return ut(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ut(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ct=a.createContext(null),lt=function(){return(0,a.useContext)(ct)},st=function(t){var e=t.children,n=it((0,o.FV)(E),2),i=n[0],c=n[1],l=(0,o.Zl)(k),s=it((0,o.FV)(M),2),f=s[0],p=s[1],m=(0,a.useMemo)((function(){return{gateItemsColumnLength:f.length,gateItemsRowLength:f[0].length}}),[f]),d=m.gateItemsColumnLength,h=m.gateItemsRowLength,y=(0,u.Z)(h),b=(0,a.useCallback)((function(t,e){c((function(n){var r=n.slice();return r.splice(t,1,e),r}))}),[c]),g=(0,a.useCallback)((function(){h>=5||p((function(t){return J(t)}))}),[p,h]),x=(0,a.useCallback)((function(){h<=1||p((function(t){return tt(t)}))}),[p,h]),w=(0,a.useCallback)((function(t,e){p((function(n){return function(t,e,n){return K(t,S(e),n)}(n,t,e)}))}),[p]),_=(0,a.useCallback)((function(t){p((function(e){return function(t,e){return K(t,S(v.EMPTY),e)}(e,t)}))}),[p]),O=(0,a.useCallback)((function(t,e){p((function(n){return function(t,e,n){var r=H(e,2),a=r[0],o=r[1],u=H(n,2),i=u[0],c=u[1];return P(t.slice(),[o,a],[c,i])}(n,t,e)}))}),[p]),j=(0,a.useCallback)((function(t){var e=t.gateItems,n=e[0].length;c(t.coefficients),p(e),l((function(t){return t[0].length<n?z(t,n-t[0].length):t}))}),[c,p,l]),C=(0,a.useCallback)((function(){c([0]),p([q(h)])}),[h,c,p]),R=(0,a.useMemo)((function(){return{coefficients:i,updateCoefficients:b,gateItems:f,gateItemsColumnLength:d,gateItemsRowLength:h,addGateItemsRow:g,removeGateItemsRow:x,addGateItem:w,removeGateItem:_,moveGateItem:O,replace:j,reset:C}}),[i,b,f,d,h,g,x,w,_,O,j,C]);return(0,a.useEffect)((function(){null!=y&&h!==y&&l((function(t){return t[0].length>h?X(t):t}))}),[h]),(0,r.jsx)(ct.Provider,{value:R,children:e})},ft=n(79520),pt=n(52499),mt=n(6897),dt=n(62048),ht=n(15923),vt=n(25665),yt=n(69825);function bt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function gt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,a,o=[],u=!0,i=!1;try{for(n=n.call(t);!(u=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);u=!0);}catch(t){i=!0,a=t}finally{try{u||null==n.return||n.return()}finally{if(i)throw a}}return o}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return bt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return bt(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var wt=(0,o.cn)({key:"appUIState",default:{isCodeViewTabOpened:!1}}),_t=function(){var t=xt((0,o.FV)(wt),2),e=t[0],n=t[1],r=(0,a.useCallback)((function(t){n((function(e){return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){gt(t,e,n[e])}))}return t}({},e,t)}))}),[n]);return{appUIState:e,setAppUIState:r}},Ot=n(10713),jt=n.n(Ot),St=(0,ht.ZP)(dt.Z)({color:"#fff"}),qt=function(){var t=_t().setAppUIState,e=(0,a.useCallback)((function(){t({isCodeViewTabOpened:!0})}),[t]);return(0,r.jsx)(mt.Z,{position:"static",children:(0,r.jsxs)(vt.Z,{variant:"dense",children:[(0,r.jsx)("div",{className:jt().heading,children:(0,r.jsx)(yt.Z,{variant:"h6",noWrap:!0,children:"Qulacs Simulator"})}),(0,r.jsxs)(St,{onClick:e,children:[(0,r.jsx)(pt.Z,{}),(0,r.jsx)(yt.Z,{sx:{ml:1},variant:"overline",children:"show code"})]})]})})},Ct=n(92096),Rt=function(t,e){return Math.round(t*Math.pow(10,e))/Math.pow(10,e)},kt=function(t,e){return"0000".concat(t.toString(2)).slice(-e)},It=n(18205),Et=n(80739),Mt=n(55484),Tt=n(25556),At=n(81224),Pt=n(3131),Qt=n(47857),Zt=n(24908),Nt=n(11011),Gt=n(6884),Vt=n.n(Gt),Lt=function(t){var e,n=t.active,a=t.payload;if(n&&null!=a&&a.length>0){var o=a[0].payload;return(0,r.jsxs)("div",{className:Vt().tooltipWrapper,children:[(0,r.jsx)("p",{className:Vt().tooltipLabel,children:o.name}),(0,r.jsxs)("div",{className:Vt().tooltipValue,children:[(0,r.jsx)("p",{className:Vt().tooltipLabel,children:"stateVectorAbsoluted: ".concat(o.stateVectorAbsoluted)}),(0,r.jsx)("p",{className:Vt().tooltipLabel,children:"stateVectorArgument: ".concat(o.stateVectorArgument)}),(0,r.jsx)("p",{className:Vt().tooltipLabel,children:"stateVector: ".concat(o.stateVector.re).concat((e=o.stateVector.im,e>=0?"+".concat(e):e),"i")})]})]})}return null},Dt=function(t){var e=t.data;return(0,r.jsx)(It.h,{width:"100%",height:"100%",children:(0,r.jsxs)(Et.v,{data:e,children:[(0,r.jsx)(Mt.q,{strokeDasharray:"3 3"}),(0,r.jsx)(Tt.K,{dataKey:"name",children:(0,r.jsx)(At._,{value:"Computational basis states",offset:0,position:"insideBottom"})}),(0,r.jsx)(Pt.B,{domain:[0,1],children:(0,r.jsx)(At._,{value:"Amplitude Value",angle:-90,position:"insideBottomLeft"})}),(0,r.jsx)(Qt.u,{content:(0,r.jsx)(Lt,{})}),(0,r.jsx)(Zt.$,{dataKey:"stateVectorAbsoluted",children:e.map((function(t){var e,n=t.name,a=t.stateVectorArgument;return(0,r.jsx)(Nt.b,{fill:(e=a,"hsl(".concat(180*e,", 100%, 70%)"))},"cell-".concat(n))}))})]})})},Yt=function(t,e){return t.updateResult===e.updateResult},zt=a.memo((function(t){var e=t.updateResult,n=at().gateItemsRowLength,o=(0,a.useMemo)((function(){for(var t=[],r=0;r<e.stateVectorAbsoluted.length;r+=1)t.push({name:kt(r,n),stateVector:{re:Rt(e.stateVector[r].re,5),im:Rt(e.stateVector[r].im,5)},stateVectorAbsoluted:Rt(e.stateVectorAbsoluted[r],5),stateVectorArgument:Rt(e.stateVectorArgument[r],5)});return t}),[e,n]);return(0,r.jsx)(Dt,{data:o})}),Yt),Bt=n(90734),Xt=n.n(Bt),Ft=n(60995),Ut=n(36197),Ht=n(30840),Wt=n(63004),$t=function(t){var e=t.data,n=t.onRequestChangeParam,o=(0,a.useMemo)((function(){var t;return null===(t=e.find((function(t){return null!=t.currentExpectationValue})))||void 0===t?void 0:t.param}),[e]),u=(0,a.useMemo)((function(){return e.length>0?["auto","auto"]:[0,1]}),[e.length]),i=(0,a.useCallback)((function(t,e){var r=e.payload;null!=(null==r?void 0:r.param)&&n(r.param)}),[n]);return(0,r.jsx)(It.h,{width:"100%",height:"100%",children:(0,r.jsxs)(Ft.c,{data:e,children:[(0,r.jsx)(Mt.q,{strokeDasharray:"3 3"}),(0,r.jsx)(Tt.K,{dataKey:"param",domain:[0,2],unit:"Ï€",type:"number",children:(0,r.jsx)(At._,{value:"Angle",offset:0,position:"insideBottom"})}),(0,r.jsx)(Pt.B,{domain:u,children:(0,r.jsx)(At._,{value:"Expectation Value",angle:-90,position:"insideBottomLeft"})}),(0,r.jsx)(Qt.u,{}),(0,r.jsx)(Ut.b,{dataKey:"currentExpectationValue",fill:"#ff7300"}),null!=o&&(0,r.jsx)(Ht.d,{x:o,stroke:"#ff7300"}),(0,r.jsx)(Wt.x,{dataKey:"expectationValue",type:"monotone",dot:!1,activeDot:{onClick:i,r:5}})]})})};function Kt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Jt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function te(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,a,o=[],u=!0,i=!1;try{for(n=n.call(t);!(u=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);u=!0);}catch(t){i=!0,a=t}finally{try{u||null==n.return||n.return()}finally{if(i)throw a}}return o}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Kt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Kt(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ee=[],ne=function(t,e){return t.currentExpectationValue===e.currentExpectationValue&&t.parametricExpectedValueResult===e.parametricExpectedValueResult},re=a.memo((function(t){var e=t.currentExpectationValue,n=t.parametricExpectedValueResult,o=at(),u=o.gateItems,i=o.selectedParametricGate,c=o.updateGateItem,l=o.updateSelectedParametricGate,s=(0,a.useState)(ee),f=s[0],p=s[1];(0,a.useEffect)((function(){var t=function(t,e,n){var r;if(null==e)return null;var a,o=te(e,2),u=o[0],i=null===(r=(null!==(a=t[o[1]])&&void 0!==a?a:[])[u])||void 0===r?void 0:r.item;if(null==i||!w(i))return null;var c=Rt(n,5);return{param:i.param,expectationValue:c,currentExpectationValue:c}}(u,i,e);if(null==t)return l(null),void p(ee);for(var r=[],a=n.expectationValueMap,o=0;o<a.length;o+=1){var c=a[o],s=c.param,f=c.expectationValue;r.push({param:s,expectationValue:Rt(f,5)}),s===t.param?r[r.length-1].currentExpectationValue=t.currentExpectationValue:o<a.length-1&&Xt()(t.param,s,a[o+1].param)&&r.push(t)}p(r)}),[u,i,e,n,l]);var m=(0,a.useCallback)((function(t){if(null!=i){var e=te(i,2),n=e[0],r=e[1],a=u[r][n].item;w(a)&&c(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){Jt(t,e,n[e])}))}return t}({},a,{param:t}),i)}}),[u,i,c]);return(0,r.jsx)($t,{data:f,onRequestChangeParam:m})}),ne),ae=function(t){var e=t.data,n=t.scale,a=void 0===n?"auto":n;return(0,r.jsx)(It.h,{width:"100%",height:240,children:(0,r.jsxs)(Ft.c,{data:e,children:[(0,r.jsx)(Mt.q,{strokeDasharray:"3 3"}),(0,r.jsx)(Tt.K,{dataKey:"name",children:(0,r.jsx)(At._,{value:"Computational basis states",offset:0,position:"insideBottom"})}),(0,r.jsx)(Pt.B,{yAxisId:"1",domain:["auto","auto"],scale:a,children:(0,r.jsx)(At._,{value:"Probability Value",angle:-90,position:"insideBottomLeft"})}),(0,r.jsx)(Pt.B,{yAxisId:"2",orientation:"right",hide:!0}),(0,r.jsx)(Qt.u,{}),(0,r.jsx)(Zt.$,{dataKey:"samplingMap",yAxisId:"2",fill:"#82ca9d",fillOpacity:"0.4"}),(0,r.jsx)(Wt.x,{type:"linear",dataKey:"probabilityVector",yAxisId:"1",dot:!1})]})})},oe=n(94776),ue=n.n(oe),ie=n(17952);function ce(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var le,se,fe="observableInformation",pe="selectedParametricQuantumGatePosition",me=(ce(le={},"circuitInformation",{gateItems:[q()]}),ce(le,fe,{coefficients:[0],gateItems:[q()]}),ce(le,pe,null),"shotResult"),de="parametricExpectedValueResult",he=(ce(se={},"updateResult",{expectationValue:0,stateVector:[],stateVectorAbsoluted:[],stateVectorArgument:[],probabilityVector:[],codes:{translateCodes:{qiskit:"",qulacs:"",pennylane:""},observableCodes:{openFermion:""},circuitCodes:{qasm2:""}}}),ce(se,me,{samplingMap:[]}),ce(se,de,{steps:10,expectationValueMap:[]}),se),ve=n(59186);function ye(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function be(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,a,o=[],u=!0,i=!1;try{for(n=n.call(t);!(u=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);u=!0);}catch(t){i=!0,a=t}finally{try{u||null==n.return||n.return()}finally{if(i)throw a}}return o}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return ye(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ye(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ge=function(t){return{circuitInformation:(r=t.circuitInformation,a=r.gateItems.map((function(t){return t.map((function(t){return j(t)?t.item:void 0}))})),{circuit:a,size:a[0].length}),observableInformation:(e=t.observableInformation,n=e.coefficients,{observable:e.gateItems.map((function(t,e){return{operators:t.map((function(t){return j(t)?t.item.type:void 0})),coefficient:n[e]}}))})};var e,n,r,a},xe=function(t){var e=t.circuit.reduce((function(t,e){return e.length>t?e.length:t}),0),n=t.circuit.map((function(t){return t.length>0?t.map((function(t){return S(null!=t?t:y.EMPTY)})).concat(q(e-t.length)):[S(y.EMPTY)]}));return n.forEach((function(t,e){return t.forEach((function(t,r){var a=t.item;_(a)&&L(n,a,[r,e],a.controllQubitIndex)}))})),{gateItems:n}},we=function(t,e){var n=Math.max(e,t.observable.reduce((function(t,e){return e.operators.length>t?e.operators.length:t}),0));return{gateItems:t.observable.map((function(t){var e=t.operators;return e.length>0?e.map((function(t){return S(null!=t?v[t.toUpperCase()]:v.EMPTY)})).concat(q(n-e.length)):[S(v.EMPTY)]})),coefficients:t.observable.map((function(t){return t.coefficient}))}},_e=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:51,n=be(t,2),r=n[0],a=n[1];return{steps:e,position:{step:a,index:r}}};function Oe(t,e,n,r,a,o,u){try{var i=t[o](u),c=i.value}catch(t){return void n(t)}i.done?e(c):Promise.resolve(c).then(r,a)}function je(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Se(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){je(t,e,n[e])}))}return t}var qe,Ce,Re=new(0,ve.v.BrowserUIClient)({parametricGateRange:2}),ke=(0,o.nZ)({key:"clientDataState",get:function(t){var e=t.get,n=e(k),r=e(M);return{circuitInformation:{gateItems:n},observableInformation:{coefficients:e(E),gateItems:r}}},dangerouslyAllowMutability:!0}),Ie=(0,o.cn)({key:"simulatorResultAtom",default:he}),Ee=(0,o.nZ)({key:"simulatorResultState",get:(qe=ue().mark((function t(e){var n,r,a,o,u,i,c;return ue().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.get,r=n(Ie),a=n(ke),t.prev=3,o=ge(a),Re.validate(o)){t.next=7;break}return t.abrupt("return",r);case 7:return t.next=9,Re.update(o);case 9:if(u=t.sent,null==(i=n(R))){t.next=16;break}return t.next=14,Re.requestParametricExpectedValues(_e(i));case 14:return c=t.sent,t.abrupt("return",Se({},r,{updateResult:u,parametricExpectedValueResult:c}));case 16:return t.abrupt("return",Se({},r,{updateResult:u,parametricExpectedValueResult:he.parametricExpectedValueResult}));case 19:t.prev=19,t.t0=t.catch(3);case 22:return t.abrupt("return",r);case 23:case"end":return t.stop()}}),t,null,[[3,19]])})),Ce=function(){var t=this,e=arguments;return new Promise((function(n,r){var a=qe.apply(t,e);function o(t){Oe(a,n,r,o,u,"next",t)}function u(t){Oe(a,n,r,o,u,"throw",t)}o(void 0)}))},function(t){return Ce.apply(this,arguments)}),set:function(t,e){return(0,t.set)(Ie,e)}});function Me(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Te=a.createContext(null),Ae=function(){return(0,a.useContext)(Te)},Pe=function(t){var e=t.children,n=(0,o.$P)(Ee),u=(0,a.useState)(he),i=u[0],c=u[1],l=(0,a.useRef)(),s=(0,a.useMemo)((function(){return"loading"===n.state}),[n.state]),f=(0,a.useCallback)((function(t){c((function(e){return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){Me(t,e,n[e])}))}return t}({},e,{shotResult:t})}))}),[]);(0,a.useEffect)((function(){n.state!==l.current&&"hasValue"===n.state&&c(n.contents),l.current=n.state}),[n.state]);var p=(0,a.useMemo)((function(){return{simulatorResult:i,isLoading:s,updateShotResult:f}}),[i,s,f]);return(0,r.jsx)(Te.Provider,{value:p,children:e})},Qe=n(30790),Ze=n.n(Qe);function Ne(t,e,n,r,a,o,u){try{var i=t[o](u),c=i.value}catch(t){return void n(t)}i.done?e(c):Promise.resolve(c).then(r,a)}var Ge=1e3,Ve=(0,ht.ZP)(yt.Z)({marginRight:"5px"}),Le=(0,ht.ZP)(ie.Z)({width:"60px"}),De=(0,ht.ZP)(dt.Z)({marginLeft:"10px"}),Ye=function(){var t=Ae().updateShotResult,e=(0,a.useState)(!1),n=e[0],o=e[1],u=(0,a.useState)(0),i=u[0],c=u[1],l=(0,a.useMemo)((function(){return"number"!=typeof i||n}),[i,n]),s=(0,a.useCallback)((function(t){var e=t.target.value;c(""===e?"":parseInt(e,10))}),[]),f=(0,a.useCallback)(function(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function u(t){Ne(o,r,a,u,i,"next",t)}function i(t){Ne(o,r,a,u,i,"throw",t)}u(void 0)}))}}(ue().mark((function e(){var n;return ue().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"number"==typeof i){e.next=3;break}return e.abrupt("return");case 3:return o(!0),e.next=6,Re.startShot({shot:i});case 6:n=e.sent,t(n),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0);case 13:return e.prev=13,o(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[0,10,13,16]])}))),[i,t]),p=(0,a.useCallback)((function(){"number"!=typeof i||i<0?c(0):i>Ge&&c(Ge)}),[i]);return(0,r.jsxs)("div",{className:Ze().wrapper,children:[(0,r.jsx)(Ve,{variant:"caption",children:"Sampling Count:"}),(0,r.jsx)(Le,{value:i,onChange:s,onBlur:p,inputProps:{min:0,max:Ge,step:1,type:"number"}}),(0,r.jsx)(De,{variant:"outlined",color:"primary",size:"small",disabled:l,onClick:f,children:"Run"})]})},ze=n(88110),Be=n(11782),Xe=(0,ht.ZP)(yt.Z)({marginRight:"5px"}),Fe=function(t,e){return t.value===e.value},Ue=a.memo((function(t){var e=t.value,n=t.onChange,o=(0,a.useCallback)((function(t){var e=t.target.value;(function(t){return"string"==typeof t})(e)&&n(e)}),[n]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(Xe,{variant:"caption",children:"Scale:"}),(0,r.jsxs)(Be.Z,{variant:"standard",value:e,onChange:o,children:[(0,r.jsx)(ze.Z,{value:"auto",children:"Auto"}),(0,r.jsx)(ze.Z,{value:"log",children:"Log"})]})]})}),Fe),He=n(95533),We=n.n(He),$e=function(t){var e=t.data,n=(0,a.useState)("auto"),o=n[0],u=n[1];return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ae,{data:e,scale:o}),(0,r.jsxs)("div",{className:We().control,children:[(0,r.jsx)(Ue,{value:o,onChange:u}),(0,r.jsx)(Ye,{})]})]})},Ke=function(t,e){return t.updateResult===e.updateResult&&t.shotResult===e.shotResult},Je=a.memo((function(t){var e=t.updateResult,n=t.shotResult,o=at().gateItemsRowLength,u=(0,a.useMemo)((function(){for(var t=[],r=0;r<e.stateVectorAbsoluted.length;r+=1)t.push({name:kt(r,o),probabilityVector:Rt(e.probabilityVector[r],5),samplingMap:n.samplingMap[r]});return t}),[e,n,o]);return(0,r.jsx)($e,{data:u})}),Ke),tn=n(69350),en=n.n(tn),nn=(0,ht.ZP)(Ct.Z)({height:"100%",padding:"8px 15px",overflowY:"auto"}),rn=function(){var t=Ae().simulatorResult,e=t.updateResult,n=t.parametricExpectedValueResult,a=t.shotResult;return(0,r.jsxs)("div",{className:en().wrapper,children:[(0,r.jsx)("div",{className:en().tab,children:(0,r.jsx)(nn,{variant:"outlined",children:(0,r.jsx)(zt,{updateResult:e})})}),(0,r.jsx)("div",{className:en().tab,children:(0,r.jsx)(nn,{variant:"outlined",children:(0,r.jsx)(Je,{updateResult:e,shotResult:a})})}),(0,r.jsx)("div",{className:en().tab,children:(0,r.jsx)(nn,{variant:"outlined",children:(0,r.jsx)(re,{currentExpectationValue:e.expectationValue,parametricExpectedValueResult:n})})})]})},an=n(6060),on=n(13091),un=n(92794),cn=n(25674),ln=n(5971),sn=n(35936),fn=n(93087),pn=n(25237),mn=n(7522),dn=function(t,e){return t.value===e.value},hn=a.memo((function(t){var e=t.value,n=(0,ft.Ds)().enqueueSnackbar,o=(0,a.useCallback)((function(){null!=navigator.clipboard&&(navigator.clipboard.writeText(e),n("Copied!",{variant:"success"}))}),[e,n]);return(0,r.jsx)(dt.Z,{variant:"outlined",size:"small",startIcon:(0,r.jsx)(mn.Z,{}),onClick:o,children:"copy"})}),dn),vn=(0,pn.default)((function(){return Promise.all([n.e(32),n.e(220),n.e(648)]).then(n.bind(n,52648)).then((function(t){return t.CodeEditor}))}),{loadableGenerated:{webpack:function(){return[52648]}},ssr:!1,loading:function(){return(0,r.jsx)("div",{style:{width:"100%",height:"500px",backgroundColor:"#272822"}})}}),yn=(0,fn.Z)(sn.Z)({display:"flex",justifyContent:"space-between"}),bn=function(t){var e=t.isOpened,n=t.defaultValue,o=t.onSave,u=t.onRequestClose,i=(0,a.useState)(n),c=i[0],l=i[1],s=(0,a.useCallback)((function(t){l(t)}),[]),f=(0,a.useCallback)((function(){o(c)}),[c,o]);return(0,a.useEffect)((function(){l(n)}),[n]),(0,r.jsxs)(on.Z,{open:e,maxWidth:"md",fullWidth:!0,onClose:u,children:[(0,r.jsxs)(yn,{children:["Edit Code",(0,r.jsx)(hn,{value:c})]}),(0,r.jsx)(an.Z,{children:(0,r.jsx)(vn,{value:c,onChange:s})}),(0,r.jsxs)(ln.Z,{children:[(0,r.jsx)(dt.Z,{onClick:u,color:"primary",children:"Cancel"}),(0,r.jsx)(dt.Z,{onClick:f,color:"primary",autoFocus:!0,children:"Save"})]})]})},gn=n(12622),xn=n.n(gn),wn=function(t,e){return t.isOpened===e.isOpened},_n=a.memo((function(t){var e=t.isOpened,n=t.codes,o=t.onRequestClose,u=(0,a.useState)("qulacs"),i=u[0],c=u[1],l=(0,a.useMemo)((function(){return n.translateCodes[i]}),[n,i]),s=(0,a.useCallback)((function(t,e){c(e)}),[]);return(0,r.jsx)(on.Z,{open:e,maxWidth:"md",fullWidth:!0,onClose:o,children:(0,r.jsxs)(an.Z,{children:[(0,r.jsxs)("div",{className:xn().heading,children:[(0,r.jsxs)(cn.Z,{color:"primary",size:"small",value:i,exclusive:!0,onChange:s,children:[(0,r.jsx)(un.Z,{value:"qulacs",children:"Qulacs"}),(0,r.jsx)(un.Z,{value:"qiskit",children:"Qiskit"}),(0,r.jsx)(un.Z,{value:"pennylane",children:"Pennylane"})]}),(0,r.jsx)(hn,{value:l})]}),(0,r.jsx)(vn,{value:l})]})})}),wn),On=function(){var t=_t(),e=t.appUIState,n=t.setAppUIState,o=Ae().simulatorResult.updateResult,u=(0,a.useCallback)((function(){n({isCodeViewTabOpened:!1})}),[n]);return(0,r.jsx)(_n,{isOpened:e.isCodeViewTabOpened,codes:o.codes,onRequestClose:u})},jn=n(72779),Sn=n.n(jn),qn=n(74974),Cn=n(85801),Rn=n(44195),kn=function(t){var e=t.onClick,n=(0,a.useCallback)((function(){e()}),[e]);return(0,r.jsx)(Rn.Z,{title:"Reset",arrow:!0,children:(0,r.jsx)(Cn.Z,{color:"primary",size:"small",onClick:n,children:(0,r.jsx)(qn.Z,{})})})},In=function(t){var e=t.onClick;return(0,r.jsx)(Rn.Z,{title:"Show code",arrow:!0,children:(0,r.jsx)(Cn.Z,{color:"primary",size:"small",onClick:e,children:(0,r.jsx)(pt.Z,{})})})},En=function(){var t=(0,a.useState)(!1),e=t[0],n=t[1];return{isOpened:e,open:(0,a.useCallback)((function(){n(!0)}),[]),close:(0,a.useCallback)((function(){n(!1)}),[])}};function Mn(t,e,n,r,a,o,u){try{var i=t[o](u),c=i.value}catch(t){return void n(t)}i.done?e(c):Promise.resolve(c).then(r,a)}var Tn=function(t,e){return t.isOpened===e.isOpened},An=a.memo((function(t){var e=t.isOpened,n=t.onRequestClose,o=(0,ft.Ds)().enqueueSnackbar,u=Ae().simulatorResult,i=at().gateItemsRowLength,c=lt().replace,l=(0,a.useCallback)(function(){var t=function(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function u(t){Mn(o,r,a,u,i,"next",t)}function i(t){Mn(o,r,a,u,i,"throw",t)}u(void 0)}))}}(ue().mark((function t(e){var r;return ue().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Re.textToObservableInformation({observableType:"openFermion",text:e,size:5});case 3:r=t.sent,c(we(r,i)),n(),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),o("Parse error: syntax error",{variant:"error"});case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}(),[i,o,n,c]);return(0,r.jsx)(bn,{isOpened:e,defaultValue:u.updateResult.codes.observableCodes.openFermion,onSave:l,onRequestClose:n})}),Tn),Pn=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{async:!0,onLoad:null};if(null==document.querySelector('script[src="'.concat(t,'"]'))){var n,r,a=document.head,o=document.createElement("script");o.src=t,o.async=null===(n=e.async)||void 0===n||n,o.onload=null!==(r=e.onLoad)&&void 0!==r?r:null,a.appendChild(o)}};function Qn(t,e,n,r,a,o,u){try{var i=t[o](u),c=i.value}catch(t){return void n(t)}i.done?e(c):Promise.resolve(c).then(r,a)}function Zn(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function u(t){Qn(o,r,a,u,i,"next",t)}function i(t){Qn(o,r,a,u,i,"throw",t)}u(void 0)}))}}var Nn=function(t,e){return t.coefficients===e.coefficients&&t.itemMatrix===e.itemMatrix},Gn=a.memo((function(t){var e=t.coefficients,n=t.itemMatrix,o=Ae().simulatorResult,u=(0,a.useState)(!1),i=u[0],c=u[1],l=(0,a.useRef)(null),s=(0,a.useMemo)((function(){var t=n.map((function(t,n){var r=e[n],a=t.reduce((function(t,e,n){return x(e.item)||t.push("".concat(e.item.type.toUpperCase(),"_").concat(n)),t}),[]);return 0===a.length||0===r?"":"".concat(function(t){return t<0?"-":"+"}(r)).concat(Math.abs(r)).concat(a.join(""))})).join("").slice(1);return""!==t?t:"I"}),[e,n]);return(0,a.useEffect)((function(){var t=function(){var t=Zn(ue().mark((function t(){return ue().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!i||null==window.MathJax||null==l.current){t.next=3;break}return t.next=3,window.MathJax.typesetPromise([l.current]);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}),[s,i,o.updateResult.expectationValue]),(0,a.useEffect)((function(){var t=function(){var t=Zn(ue().mark((function t(){return ue().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Pn("https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js",{onLoad:function(){c(!0)}});case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}),[]),(0,r.jsxs)("div",{ref:l,children:[(0,r.jsx)("div",{children:"$H = ".concat(s,"$")}),(0,r.jsx)("div",{children:"$\\langle H \\rangle = ".concat(o.updateResult.expectationValue,"$")})]})}),Nn),Vn="#2196f3",Ln="#e91e63",Dn="#673ab7",Yn="draggable_quantum_gate",zn="droppable_quantum_gate",Bn="droppable_multi_quantum_gate",Xn="draggable_observable_gate",Fn="droppable_observable_gate",Un="draggable_control_qubit_gate",Hn=n(23435);function Wn(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function $n(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,a,o=[],u=!0,i=!1;try{for(n=n.call(t);!(u=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);u=!0);}catch(t){i=!0,a=t}finally{try{u||null==n.return||n.return()}finally{if(i)throw a}}return o}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Wn(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Wn(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Kn=n(93553),Jn=n(56720),tr=n.n(Jn);function er(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var nr=(0,ht.ZP)(yt.Z)({fontSize:"1rem"}),rr=a.forwardRef((function(t,e){var n,o=t.gateType,u=t.isDragging,i=t.color,c=t.canDrop,l=void 0!==c&&c,s=t.parametricValue,f=(0,a.useMemo)((function(){return"cnot"===o||"ccnot"===o}),[o]),p=(0,a.useMemo)((function(){return null!=s?"(".concat(s,")"):null}),[s]),m=(0,a.useMemo)((function(){return"control_qubit"===o?null:f?l?(0,r.jsx)(Kn.Z,{}):(0,r.jsx)(nr,{children:o.toUpperCase()}):(0,r.jsx)(yt.Z,{children:o.toUpperCase()})}),[o,l,f]);return(0,r.jsxs)("div",{className:Sn()(tr().wrapper,(n={},er(n,tr().isDragging,u),er(n,tr().multiGate,l&&f),er(n,tr().controlQubitGate,"control_qubit"===o),n)),style:{backgroundColor:i},ref:e,children:[m,null!=s&&(0,r.jsx)("div",{className:tr().parametricValue,children:p})]})})),ar=n(41755),or=n.n(ar),ur=function(t){var e=t.gate,n=t.type,o=t.color,u=function(t){var e=t.gate,n=t.type,r=(0,a.useRef)(null),o=$n((0,Hn.c)((function(){return{type:n,item:{gate:e,type:n},collect:function(t){return{isDragging:t.isDragging()}}}}),[e,n]),2),u=o[0].isDragging;return(0,o[1])(r),{ref:r,isDragging:u}}({gate:e,type:n}),i=u.ref,c=u.isDragging;return(0,r.jsx)("div",{className:or().wrapper,children:(0,r.jsx)(rr,{ref:i,gateType:e.type,color:o,isDragging:c})})},ir=n(33502),cr=n.n(ir),lr=function(){return(0,r.jsx)("div",{className:cr().wrapper,children:Object.values(p).map((function(t){return(0,r.jsx)("div",{className:cr().item,children:(0,r.jsx)(ur,{gate:t,color:Vn,type:Xn})},t.type)}))})},sr=n(27508),fr=function(t){var e=t.isDisabled,n=void 0!==e&&e,o=at().addGateItemsRow,u=lt().addGateItemsRow,i=(0,a.useCallback)((function(){o(),u()}),[o,u]);return(0,r.jsx)(Rn.Z,{title:"Add",placement:"bottom",arrow:!0,children:(0,r.jsx)(Cn.Z,{disabled:n,onClick:i,children:(0,r.jsx)(sr.Z,{})})})},pr=n(62840),mr=n.n(pr),dr=n(75874),hr=function(t){var e=t.isDisabled,n=void 0!==e&&e,o=t.onClick,u=(0,a.useCallback)((function(){o()}),[o]);return(0,r.jsx)(Rn.Z,{title:"Remove",placement:"top",arrow:!0,children:(0,r.jsx)(Cn.Z,{disabled:n,onClick:u,children:(0,r.jsx)(dr.Z,{})})})};function vr(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yr(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){vr(t,e,n[e])}))}return t}var br=function(t){var e=t.gateItemsColumnLength,n=t.gateItemsRowLength,o=t.showMeasureIcon,u=void 0!==o&&o,i=t.onRequestRemoveRow,c=(0,a.useMemo)((function(){return n>=5}),[n]),l=(0,a.useMemo)((function(){return new Array(n).fill("").map((function(t,e){return e+1}))}),[n]);return(0,r.jsxs)(r.Fragment,{children:[n>1&&(0,r.jsx)("div",{className:mr().removeButton,children:(0,r.jsx)(hr,{onClick:i})}),l.map((function(t){var n={gridRow:t};return(0,r.jsxs)(a.Fragment,{children:[(0,r.jsxs)("div",{className:mr().label,style:n,children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{children:"q"}),(0,r.jsx)("span",{className:mr().labelIndex,children:t-1})]}),t===l.length&&!c&&(0,r.jsx)("div",{className:mr().addButton,children:(0,r.jsx)(fr,{})})]}),(0,r.jsx)("div",{className:mr().line,style:yr({},n,{gridColumn:"2 / ".concat(2+e)}),"aria-hidden":"true"}),u&&(0,r.jsx)("div",{className:mr().label,style:yr({},n,{gridColumn:3+e}),children:(0,r.jsx)("img",{src:"measurement.svg",width:"25",height:"14",alt:""})})]},t)}))]})};function gr(t){throw new Error('"'.concat(t,'" is Unexpected value. Should have been never.'))}function xr(t,e){if(null==t){var n=null!=e?e:"Expected 'value' to be defined, but received ".concat(t);throw new Error(n)}}var wr=n(73510),_r=n.n(wr),Or=n(44715);function jr(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Sr(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,a,o=[],u=!0,i=!1;try{for(n=n.call(t);!(u=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);u=!0);}catch(t){i=!0,a=t}finally{try{u||null==n.return||n.return()}finally{if(i)throw a}}return o}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return jr(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jr(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var qr=n(19986),Cr=n(40436),Rr=n.n(Cr),kr={x:null,y:null},Ir=function(t){var e=t.menuItems,n=t.children,o=(0,a.useState)(kr),u=o[0],i=o[1],c=(0,a.useCallback)((function(t){t.preventDefault(),i({x:t.clientX-2,y:t.clientY-4})}),[]),l=(0,a.useCallback)((function(){i(kr)}),[]),s=(0,a.useCallback)((function(t){return function(e){t(e),l()}}),[l]);return(0,r.jsxs)("div",{className:Rr().wrapper,onContextMenu:c,children:[n,(0,r.jsx)(qr.Z,{keepMounted:!0,open:null!=u.y,onClose:l,anchorReference:"anchorPosition",anchorPosition:null!=u.y&&null!=u.x?{top:u.y,left:u.x}:void 0,children:e.map((function(t){var e=t.text,n=t.onClick;return(0,r.jsx)(ze.Z,{onClick:s(n),children:e},e)}))})]})};function Er(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Mr(t){return function(t){if(Array.isArray(t))return Er(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Er(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Er(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Tr=function(t){var e=t.gate,n=t.position,o=t.type,u=t.color,i=t.menuItems,c=void 0===i?[]:i,l=t.onRequestMoveGate,s=t.onRequestRemoveGate,f=function(t){var e=t.accept,n=t.gate,r=t.position,o=t.type,u=t.onDrop,i=(0,a.useRef)(null),c=Sr((0,Or.L)({accept:e,drop:u}),2)[1],l=Sr((0,Hn.c)((function(){return{type:o,item:{gate:n,position:r,type:o},collect:function(t){return{isDragging:t.isDragging()}}}}),[n,r,o]),2),s=l[0].isDragging;return(0,l[1])(c(i)),{ref:i,isDragging:s}}({gate:e,position:n,type:o,accept:[o],onDrop:function(t){switch(t.type){case"droppable_quantum_gate":case"droppable_observable_gate":l(t,n);break;case"droppable_multi_quantum_gate":break;default:gr(t.type)}}}),p=f.ref,m=f.isDragging,d=(0,a.useMemo)((function(){return function(t){return"rx"===t.type||"ry"===t.type||"rz"===t.type}(e)?e.param:void 0}),[e]),h=(0,a.useCallback)((function(t){t.stopPropagation(),s(e,n)}),[e,n,s]),v=(0,a.useMemo)((function(){return Mr(c).concat([{text:"Delete Gate",onClick:h}])}),[c,h]);return(0,r.jsx)(Ir,{menuItems:v,children:(0,r.jsx)(rr,{ref:p,gateType:e.type,color:u,isDragging:m,parametricValue:d,canDrop:!0})})},Ar=n(99643),Pr=n.n(Ar);function Qr(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Zr(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Nr(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,a,o=[],u=!0,i=!1;try{for(n=n.call(t);!(u=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);u=!0);}catch(t){i=!0,a=t}finally{try{u||null==n.return||n.return()}finally{if(i)throw a}}return o}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Qr(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Qr(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Gr=function(t){var e,n=t.position,o=t.onRequestAddGate,u=t.onRequestMoveGate,i=Nr((0,Or.L)({accept:[Xn,Fn],drop:function(t){switch(t.type){case"draggable_observable_gate":o(t,n);break;case"droppable_observable_gate":u(t,n);break;default:gr(t.type)}},collect:function(t){return{isOver:t.isOver(),canDrop:t.canDrop()}}}),2),c=i[0],l=c.isOver,s=c.canDrop,f=i[1],p=(0,a.useMemo)((function(){return l&&s}),[l,s]);return(0,r.jsx)("div",{ref:f,className:Sn()(Pr().wrapper,(e={},Zr(e,Pr().isActive,p),Zr(e,Pr().canDrop,!p&&s),e))})},Vr=function(t){var e=t.gate,n=t.position,o=t.onRequestAddGate,u=t.onRequestMoveGate,i=t.onRequestRemoveGate,c=(0,a.useMemo)((function(){switch(e.type){case"empty":return(0,r.jsx)(Gr,{position:n,onRequestAddGate:o,onRequestMoveGate:u});case"x":case"y":case"z":return(0,r.jsx)(Tr,{gate:e,position:n,type:Fn,color:Vn,onRequestMoveGate:u,onRequestRemoveGate:i});default:return gr(e)}}),[e,n,o,u,i]);return(0,r.jsx)(r.Fragment,{children:c})},Lr=function(t,e){return{gridRow:t+1,gridColumn:e+1}},Dr=function(t,e){return t.itemMatrix===e.itemMatrix},Yr=a.memo((function(t){var e=t.itemMatrix,n=lt(),o=n.gateItemsColumnLength,u=n.gateItemsRowLength,i=n.addGateItem,c=n.moveGateItem,l=n.removeGateItem,s=n.removeGateItemsRow,f=(0,a.useCallback)((function(t,e){i(t.gate,e)}),[]),p=(0,a.useCallback)((function(t,e){var n=t.position;xr(n),c(n,e)}),[]),m=(0,a.useCallback)((function(t,e){l(e)}),[]);return(0,r.jsxs)("div",{className:_r().wrapper,children:[(0,r.jsx)(br,{gateItemsColumnLength:o,gateItemsRowLength:u,onRequestRemoveRow:s}),e.map((function(t,e){return(0,r.jsx)(a.Fragment,{children:t.map((function(t,n){return(0,r.jsx)("div",{className:_r().gateCell,style:Lr(n,e+1),children:(0,r.jsx)(Vr,{gate:t.item,position:[n,e],onRequestAddGate:f,onRequestMoveGate:p,onRequestRemoveGate:m})},t.id)}))},e)}))]})}),Dr);function zr(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Br(t,e){if(null==t)return{};var n,r,a=function(t,e){if(null==t)return{};var n,r,a={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(a[n]=t[n]);return a}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}var Xr=function(t,e){return t.value===e.value},Fr=a.memo((function(t){var e=t.value,n=t.onChange,o=Br(t,["value","onChange"]),u=(0,a.useState)(e),i=u[0],c=u[1],l=(0,a.useCallback)((function(t){var e=t.currentTarget.value;c(""===e?"":parseFloat(e))}),[]),s=(0,a.useCallback)((function(){"number"!=typeof i?(c(0),n(0)):n(i)}),[i,n]);return(0,a.useEffect)((function(){c(e)}),[e]),(0,r.jsx)(ie.Z,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){zr(t,e,n[e])}))}return t}({value:i,onChange:l,onBlur:s},o))}),Xr),Ur=n(70865),Hr=n.n(Ur),Wr=function(t){var e=t.coefficients,n=t.onChange,o=(0,a.useCallback)((function(t){return function(e){n(t,e)}}),[n]);return(0,r.jsx)("div",{className:Hr().wrapper,children:e.map((function(t,e){return(0,r.jsx)("div",{className:Hr().item,children:(0,r.jsx)(Fr,{type:"number",value:t,inputProps:{step:"0.01"},onChange:o(e),fullWidth:!0})},e)}))})},$r=n(25377),Kr=n.n($r),Jr=function(){var t=En(),e=lt(),n=e.coefficients,a=e.gateItems,o=e.updateCoefficients,u=e.reset;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:Kr().wrapper,children:[(0,r.jsxs)("div",{className:Kr().heading,children:[(0,r.jsx)(yt.Z,{variant:"overline",children:"Observable"}),(0,r.jsxs)("div",{className:Kr().actions,children:[(0,r.jsx)(In,{onClick:t.open}),(0,r.jsx)(kn,{onClick:u})]})]}),(0,r.jsx)("div",{children:(0,r.jsx)(lr,{})}),(0,r.jsxs)("div",{className:Kr().composer,children:[(0,r.jsx)(Wr,{coefficients:n,onChange:o}),(0,r.jsx)(Yr,{itemMatrix:a})]}),(0,r.jsx)(Gn,{coefficients:n,itemMatrix:a})]}),(0,r.jsx)(An,{isOpened:t.isOpened,onRequestClose:t.close})]})},ta=n(46983),ea=n.n(ta),na=function(){return(0,r.jsxs)("div",{className:ea().wrapper,children:[Object.values(m).map((function(t){return(0,r.jsx)("div",{className:ea().item,children:(0,r.jsx)(ur,{gate:t,color:Vn,type:Yn})},t.type)})),Object.values(d).map((function(t){return(0,r.jsx)("div",{className:ea().item,children:(0,r.jsx)(ur,{gate:t,color:Ln,type:Yn})},t.type)})),Object.values(h).map((function(t){return(0,r.jsx)("div",{className:ea().item,children:(0,r.jsx)(ur,{gate:t,color:Dn,type:Yn})},t.type)}))]})},ra=n(96258),aa=n.n(ra),oa=n(34909),ua=n.n(oa);function ia(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ca(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function la(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){ca(t,e,n[e])}))}return t}function sa(t,e){if(null==t)return{};var n,r,a=function(t,e){if(null==t)return{};var n,r,a={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(a[n]=t[n]);return a}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function fa(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,a,o=[],u=!0,i=!1;try{for(n=n.call(t);!(u=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);u=!0);}catch(t){i=!0,a=t}finally{try{u||null==n.return||n.return()}finally{if(i)throw a}}return o}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return ia(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ia(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var pa=function(t){var e=t.gate,n=t.position,o=sa(t,["gate","position"]),u=(0,a.useMemo)((function(){return _(e)?e.controllQubitIndex:[]}),[e]),i=(0,a.useCallback)((function(t){var e=fa(n,1)[0];return{style:{height:"".concat(50*(Math.abs(e-t)-1)+20,"px")},"data-direction":e>t?"upper":"lower"}}),[n]);return(0,r.jsxs)("div",{className:ua().wrapper,children:[u.map((function(t){return(0,r.jsx)("div",la({className:ua().connectedLine},i(t),{"aria-hidden":!0}),t)})),(0,r.jsx)(Tr,la({gate:e,position:n,type:Bn,color:Dn},o))]})};function ma(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function da(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,a,o=[],u=!0,i=!1;try{for(n=n.call(t);!(u=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);u=!0);}catch(t){i=!0,a=t}finally{try{u||null==n.return||n.return()}finally{if(i)throw a}}return o}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return ma(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ma(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ha=n(9225),va=n.n(ha);var ya=function(t){var e,n,o,u=t.gate,i=t.position,c=t.onRequestMoveGate,l=t.onRequestRemoveGate,s=Ua(),f=at(),p=f.selectedParametricGate,m=f.updateSelectedParametricGate,d=(0,a.useMemo)((function(){return null!=p&&(t=p,e=da(i,2),n=e[0],r=e[1],a=da(t,2),o=a[0],u=a[1],n===o&&r===u);var t,e,n,r,a,o,u}),[i,p]),h=(0,a.useMemo)((function(){return[{text:"Edit Gate",onClick:function(t){t.stopPropagation(),s(u,i)}}]}),[s,u,i]),v=(0,a.useCallback)((function(){m(i)}),[m,i]),y=(0,a.useCallback)((function(t,e){m(e),c(t,e)}),[m,c]),b=(0,a.useCallback)((function(t,e){p===e&&m(null),l(t,e)}),[p,m,l]);return(0,r.jsx)("div",{className:Sn()(va().wrapper,(e={},n=va().isSelected,o=d,n in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o,e)),role:"button",tabIndex:-1,onClick:v,children:(0,r.jsx)(Tr,{gate:u,position:i,type:zn,color:Ln,menuItems:h,onRequestMoveGate:y,onRequestRemoveGate:b})})},ba=n(33291),ga=n.n(ba);function xa(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function wa(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _a(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,a,o=[],u=!0,i=!1;try{for(n=n.call(t);!(u=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);u=!0);}catch(t){i=!0,a=t}finally{try{u||null==n.return||n.return()}finally{if(i)throw a}}return o}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return xa(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xa(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Oa=function(t,e){var n=_a(e,2),r=n[0],a=t[n[1]].reduce((function(t,e,n){var r=e.item;return _(r)&&t.push(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){wa(t,e,n[e])}))}return t}({index:n},r)),t}),[]);return 0===a.length||a.every((function(t){return t.controllQubitIndex.every((function(e){return t.index>e?!Xt()(r,e,t.index):!Xt()(r,t.index,e)}))}))},ja=function(t){var e,n=t.position,o=t.onRequestAddGate,u=t.onRequestMoveGate,i=at().gateItems,c=(0,a.useCallback)((function(t){var e=t.gate;return O(e)?function(t,e,n){var r=_a(n,2),a=r[0],o=r[1],u=_a(e.connectedMultiGate.position,2),i=u[0],c=u[1];if(c!==o)return!1;var l=t[c];return(a>i?l.slice(i+1,a+1):l.slice(a,i)).every((function(t){var e=t.item;return x(e)||O(e)}))}(i,e,n):!!Oa(i,n)&&(!_(e)||function(t,e,n){var r=_a(n,2),a=r[0],o=t[r[1]],u=function(t){return t.every((function(t){var e;return"empty"===(null===(e=o[t])||void 0===e?void 0:e.item.type)}))},i=new Array(e.size-1).fill(""),c=i.map((function(t,e){return a-(e+1)})),l=i.map((function(t,e){return a+(e+1)}));return u(c)||u(l)||"ccnot"===e.type&&u([a-1,a+1])}(i,e,n))}),[i,n]),l=_a((0,Or.L)({accept:[Yn,Un,zn,Bn],canDrop:c,drop:function(t){switch(t.type){case"draggable_quantum_gate":o(t,n);break;case"draggable_control_qubit_gate":case"droppable_quantum_gate":case"droppable_multi_quantum_gate":u(t,n);break;default:gr(t.type)}},collect:function(t){return{isOver:t.isOver(),canDrop:t.canDrop()}}}),2),s=l[0],f=s.isOver,p=s.canDrop,m=l[1],d=(0,a.useMemo)((function(){return f&&p}),[f,p]);return(0,r.jsx)("div",{ref:m,className:Sn()(ga().wrapper,(e={},wa(e,ga().isActive,d),wa(e,ga().canDrop,!d&&p),e))})},Sa=n(14735),qa=n.n(Sa);function Ca(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Ra(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,a,o=[],u=!0,i=!1;try{for(n=n.call(t);!(u=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);u=!0);}catch(t){i=!0,a=t}finally{try{u||null==n.return||n.return()}finally{if(i)throw a}}return o}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Ca(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ca(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ka=function(t){var e=t.gate,n=t.position,o=(0,a.useRef)(null),u=Ra((0,Hn.c)((function(){return{type:Un,item:{gate:e,position:n,type:Un},collect:function(t){return{isDragging:t.isDragging()}}}}),[e,n]),2),i=u[0].isDragging;return(0,u[1])(o),(0,r.jsx)("div",{className:qa().wrapper,children:(0,r.jsx)(rr,{ref:o,gateType:e.type,color:"transparent",isDragging:i})})},Ia=function(t){var e=t.gate,n=t.position,o=t.onRequestAddGate,u=t.onRequestMoveGate,i=t.onRequestRemoveGate,c=(0,a.useMemo)((function(){switch(e.type){case"empty":return(0,r.jsx)(ja,{position:n,onRequestAddGate:o,onRequestMoveGate:u});case"control_qubit":return(0,r.jsx)(ka,{gate:e,position:n});case"x":case"y":case"z":case"h":case"t":case"s":return(0,r.jsx)(Tr,{gate:e,position:n,type:zn,color:Vn,onRequestMoveGate:u,onRequestRemoveGate:i});case"rx":case"ry":case"rz":return(0,r.jsx)(ya,{gate:e,position:n,onRequestMoveGate:u,onRequestRemoveGate:i});case"cnot":case"ccnot":return(0,r.jsx)(pa,{gate:e,position:n,onRequestMoveGate:u,onRequestRemoveGate:i});default:return gr(e)}}),[e,n,o,u,i]);return(0,r.jsx)(r.Fragment,{children:c})},Ea=function(t,e){return{gridRow:t+1,gridColumn:e+1}},Ma=function(t,e){return t.itemMatrix===e.itemMatrix},Ta=a.memo((function(t){var e=t.itemMatrix,n=at(),o=n.gateItemsColumnLength,u=n.gateItemsRowLength,i=n.addGateItem,c=n.removeGateItem,l=n.moveGateItem,s=n.removeGateItemsRow,f=(0,a.useCallback)((function(t,e){i(t.gate,e)}),[]),p=(0,a.useCallback)((function(t,e){var n=t.gate,r=t.position;xr(r),l(n,r,e)}),[]),m=(0,a.useCallback)((function(t,e){c(t,e)}),[]);return(0,r.jsxs)("div",{className:aa().wrapper,children:[(0,r.jsx)(br,{gateItemsColumnLength:o,gateItemsRowLength:u,onRequestRemoveRow:s,showMeasureIcon:!0}),e.map((function(t,e){return(0,r.jsx)(a.Fragment,{children:t.map((function(t,n){return(0,r.jsx)("div",{className:aa().gateCell,style:Ea(n,e+1),children:(0,r.jsx)(Ia,{gate:t.item,position:[n,e],onRequestAddGate:f,onRequestMoveGate:p,onRequestRemoveGate:m})},t.id)}))},e)}))]})}),Ma);function Aa(t,e,n,r,a,o,u){try{var i=t[o](u),c=i.value}catch(t){return void n(t)}i.done?e(c):Promise.resolve(c).then(r,a)}var Pa=function(t,e){return t.isOpened===e.isOpened},Qa=a.memo((function(t){var e=t.isOpened,n=t.onRequestClose,o=(0,ft.Ds)().enqueueSnackbar,u=Ae().simulatorResult,i=at().replace,c=(0,a.useCallback)(function(){var t=function(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function u(t){Aa(o,r,a,u,i,"next",t)}function i(t){Aa(o,r,a,u,i,"throw",t)}u(void 0)}))}}(ue().mark((function t(e){var r;return ue().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Re.textToCircuitInformation({circuitType:"qasm2",text:e});case 3:r=t.sent,i(xe(r)),n(),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),o("Parse error: syntax error",{variant:"error"});case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}(),[n,o,i]);return(0,r.jsx)(bn,{isOpened:e,defaultValue:u.updateResult.codes.circuitCodes.qasm2,onSave:c,onRequestClose:n})}),Pa),Za=n(34445),Na=n(97910),Ga=n.n(Na),Va=(0,ht.ZP)(ie.Z)({minWidth:"80px"}),La=function(t){var e=t.initialValue,n=t.onChange,o=(0,a.useState)(e),u=o[0],i=o[1],c=(0,a.useCallback)((function(t,e){"number"==typeof e&&i(e)}),[]),l=(0,a.useCallback)((function(t){var e=t.target.value;i(""===e?"":parseFloat(e))}),[]),s=(0,a.useCallback)((function(){"number"!=typeof u||u<0?i(0):u>2&&i(2)}),[u]);return(0,a.useEffect)((function(){"number"==typeof u&&n(u)}),[u,n]),(0,r.jsxs)("div",{className:Ga().wrapper,children:[(0,r.jsx)(Za.ZP,{min:0,max:2,step:.01,size:"small",value:"number"==typeof u?u:0,onChange:c}),(0,r.jsx)("div",{className:Ga().inputWrapper,children:(0,r.jsx)(Va,{value:u,onChange:l,onBlur:s,inputProps:{min:0,max:2,step:.01,type:"number"}})})]})};function Da(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Ya=function(t,e){return t.isOpened===e.isOpened},za=a.memo((function(t){var e=t.isOpened,n=t.gateItem,o=t.onClose,u=n.gate,i=n.position,c=at().updateGateItem,l=(0,a.useState)(u.param),s=l[0],f=l[1],p=(0,a.useCallback)((function(t){f(t)}),[]),m=(0,a.useCallback)((function(){c(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){Da(t,e,n[e])}))}return t}({},u,{param:s}),i),o()}),[u,i,s,o,c]);return(0,r.jsxs)(on.Z,{open:e,onClose:o,children:[(0,r.jsx)(sn.Z,{children:"Edit ".concat(u.type.toUpperCase()," Gate")}),(0,r.jsx)(an.Z,{children:(0,r.jsx)(La,{initialValue:u.param,onChange:p})}),(0,r.jsxs)(ln.Z,{children:[(0,r.jsx)(dt.Z,{onClick:o,color:"primary",children:"Cancel"}),(0,r.jsx)(dt.Z,{onClick:m,color:"primary",autoFocus:!0,children:"Save"})]})]})}),Ya),Ba=n(73818),Xa=n.n(Ba),Fa=a.createContext(null),Ua=function(){return(0,a.useContext)(Fa)},Ha=function(){var t=En(),e=function(){var t=(0,a.useState)(!1),e=t[0],n=t[1],r=(0,a.useState)(),o=r[0],u=r[1];return{isOpened:e,gateItem:o,open:(0,a.useCallback)((function(t,e){u({gate:t,position:e}),n(!0)}),[]),close:(0,a.useCallback)((function(){n(!1)}),[])}}(),n=at(),o=n.gateItems,u=n.reset;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:Xa().wrapper,children:[(0,r.jsxs)("div",{className:Xa().heading,children:[(0,r.jsx)(yt.Z,{variant:"overline",children:"Quantum Circuit"}),(0,r.jsxs)("div",{className:Xa().actions,children:[(0,r.jsx)(In,{onClick:t.open}),(0,r.jsx)(kn,{onClick:u})]})]}),(0,r.jsx)("div",{children:(0,r.jsx)(na,{})}),(0,r.jsx)(Fa.Provider,{value:e.open,children:(0,r.jsx)("div",{className:Xa().composer,children:(0,r.jsx)(Ta,{itemMatrix:o})})})]}),(0,r.jsx)(Qa,{isOpened:t.isOpened,onRequestClose:t.close}),null!=e.gateItem&&(0,r.jsx)(za,{isOpened:e.isOpened,gateItem:e.gateItem,onClose:e.close})]})},Wa=n(87687),$a=n(66403),Ka=function(t){var e=t.children;return(0,r.jsx)(Wa.W,{backend:$a.PD,children:e})},Ja=n(27835),to=n.n(Ja),eo=(0,ht.ZP)(Ct.Z)({height:"100%",padding:"8px 15px",overflow:"auto"}),no=function(){return(0,r.jsx)("div",{className:to().wrapper,children:(0,r.jsxs)(Ka,{children:[(0,r.jsx)("div",{className:Sn()(to().tab,to().circuitTab),children:(0,r.jsx)(eo,{variant:"outlined",children:(0,r.jsx)(Ha,{})})}),(0,r.jsx)("div",{className:Sn()(to().tab,to().observableTab),children:(0,r.jsx)(eo,{variant:"outlined",children:(0,r.jsx)(Jr,{})})})]})})};function ro(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ao(t){return ao=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},ao(t)}function oo(t,e){return!e||"object"!==io(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function uo(t,e){return uo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},uo(t,e)}var io=function(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function co(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ao(t);if(e){var a=ao(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return oo(this,n)}}var lo=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&uo(t,e)}(o,t);var e,n,r,a=co(o);function o(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(e=a.call(this,t)).state={hasError:!1},e}return e=o,r=[{key:"getDerivedStateFromError",value:function(){return{hasError:!0}}}],(n=[{key:"componentDidCatch",value:function(t,e){var n=this.props.errorHandler;null!=n&&n(t,e)}},{key:"render",value:function(){return(0,this.props.children)(this.state.hasError)}}])&&ro(e.prototype,n),r&&ro(e,r),o}(a.Component),so=n(150),fo=n.n(so),po=function(){return(0,r.jsx)(lo,{children:function(){return(0,r.jsxs)(ft.wT,{autoHideDuration:3e3,children:[(0,r.jsx)(qt,{}),(0,r.jsx)(Pe,{children:(0,r.jsxs)("div",{className:fo().wrapper,children:[(0,r.jsx)("div",{className:fo().uiState,children:(0,r.jsx)(no,{})}),(0,r.jsx)("div",{className:fo().charts,children:(0,r.jsx)(rn,{})}),(0,r.jsx)(On,{})]})})]})}})},mo=function(){return(0,r.jsx)(o.Wh,{children:(0,r.jsx)(ot,{children:(0,r.jsx)(st,{children:(0,r.jsx)(po,{})})})})}},12622:function(t){t.exports={heading:"CodeViewTab_heading__5uGqB"}},6884:function(t){t.exports={tooltipWrapper:"AmplitudesChart_tooltipWrapper__TDeOL",tooltipLabel:"AmplitudesChart_tooltipLabel__hXlqF",tooltipValue:"AmplitudesChart_tooltipValue__7ddKW"}},99643:function(t){t.exports={wrapper:"EmptyGate_wrapper__HJYW6",isActive:"EmptyGate_isActive__Qj3_V",canDrop:"EmptyGate_canDrop__07pxm"}},33502:function(t){t.exports={wrapper:"GateCollections_wrapper__qhUsD",item:"GateCollections_item__TTKX_"}},73510:function(t){t.exports={wrapper:"GateComposer_wrapper__Wpy1N",gateCell:"GateComposer_gateCell__M3_49"}},70865:function(t){t.exports={wrapper:"GateInput_wrapper__mq7EK",item:"GateInput_item__bUwNV"}},25377:function(t){t.exports={wrapper:"ObservableTab_wrapper__9OQDX",heading:"ObservableTab_heading__T6icl",actions:"ObservableTab_actions__q9qNq",composer:"ObservableTab_composer__C1Ijy"}},10713:function(t){t.exports={heading:"AppHeader_heading__W1R2i"}},69350:function(t){t.exports={wrapper:"ChartTabContainer_wrapper__yBkwl",tab:"ChartTabContainer_tab__bl9dv"}},27835:function(t){t.exports={wrapper:"UIStateTabContainer_wrapper___G6H6",tab:"UIStateTabContainer_tab__fDDXM",circuitTab:"UIStateTabContainer_circuitTab__ZkGud",observableTab:"UIStateTabContainer_observableTab__jm1WI"}},95533:function(t){t.exports={control:"ChartContainer_control__ZBDdw"}},30790:function(t){t.exports={wrapper:"RunButton_wrapper__O3LjR"}},34909:function(t){t.exports={wrapper:"DroppableMultiGate_wrapper__YLar9",connectedLine:"DroppableMultiGate_connectedLine__aIc7d"}},9225:function(t){t.exports={wrapper:"DroppableParametricGate_wrapper__3piGk",isSelected:"DroppableParametricGate_isSelected__95rgG"}},33291:function(t){t.exports={wrapper:"EmptyGate_wrapper__GTPVD",isActive:"EmptyGate_isActive__jLo_F",canDrop:"EmptyGate_canDrop___30Pi"}},14735:function(t){t.exports={wrapper:"QubitGate_wrapper__jmJz1"}},46983:function(t){t.exports={wrapper:"CircuitGateCollections_wrapper__LsMrX",item:"CircuitGateCollections_item__KMtYg"}},96258:function(t){t.exports={wrapper:"CircuitGateComposer_wrapper__J523M",gateCell:"CircuitGateComposer_gateCell__rf_M4"}},97910:function(t){t.exports={wrapper:"ParametricValueSlider_wrapper__F1Myu",inputWrapper:"ParametricValueSlider_inputWrapper__74f3E"}},73818:function(t){t.exports={wrapper:"QuantumCircuitTab_wrapper__FYqSg",heading:"QuantumCircuitTab_heading__EckJj",actions:"QuantumCircuitTab_actions__DgSdi",composer:"QuantumCircuitTab_composer__ZPqxz"}},40436:function(t){t.exports={wrapper:"ContextMenu_wrapper___4z38"}},56720:function(t){t.exports={wrapper:"Gate_wrapper__pyKuG",isDragging:"Gate_isDragging__TOZcF",parametricValue:"Gate_parametricValue__ohPcl",multiGate:"Gate_multiGate__WPF31",controlQubitGate:"Gate_controlQubitGate__Fyl8t"}},41755:function(t){t.exports={wrapper:"DraggableGate_wrapper__WFCSu"}},62840:function(t){t.exports={label:"GateLabels_label__hethD",labelIndex:"GateLabels_labelIndex__obGm0",line:"GateLabels_line__biYo7",addButton:"GateLabels_addButton__A_V_e",removeButton:"GateLabels_removeButton__Vz_9X"}},150:function(t){t.exports={wrapper:"Home_wrapper__1h3zx",uiState:"Home_uiState__SjV35",charts:"Home_charts__Jfxme"}},59186:function(t,e){(()=>{"use strict";var t={799:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});e.QuantumState=function(t){}},914:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0});var r=n(799);e.QuantumState=r.QuantumState},234:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0});var r=n(412),a=n(984),o=n(46),u=function(){function t(t){this._quantumStateGenerator=t.quantumStateGenerator,this._mapQubitQuantumState=[]}return t.prototype.createNewQubit=function(t,e){var n=this._quantumStateGenerator(e.value);this._mapQubitQuantumState.push({qubit:t,bitId:0,quantumState:n})},t.prototype.requestOperation=function(t){for(var e=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var u,i=n.map((function(t){return e._lookupQubitQuantumStateMapElementFromQubit(t)}));switch(t){case a.QuantumOperationTypes.X:case a.QuantumOperationTypes.Y:case a.QuantumOperationTypes.Z:case a.QuantumOperationTypes.S:case a.QuantumOperationTypes.T:case a.QuantumOperationTypes.H:var c=i[0];this._requestOperationSingleQubit(t,c);break;case a.QuantumOperationTypes.CONTROLLED_X:case a.QuantumOperationTypes.CONTROLLED_Y:case a.QuantumOperationTypes.CONTROLLED_Z:var l=i[0];u=i[1],l.quantumState!==u.quantumState&&this._mergeQubitMapElement(l,u),this._requestControlledOperationQubit(t,l,u);break;case a.QuantumOperationTypes.TOFFOLI:var s=i[0],f=i[1];u=i[2],s.quantumState!==f.quantumState&&this._mergeQubitMapElement(s,f),s.quantumState!==u.quantumState&&this._mergeQubitMapElement(s,u),o.toffoli(s.quantumState,s.bitId,f.bitId,u.bitId)}},t.prototype.requestRotateOperation=function(t,e,n){var r=this._lookupQubitQuantumStateMapElementFromQubit(n);switch(t){case a.QuantumOperationTypes.R:r.quantumState.r(r.bitId,e);break;case a.QuantumOperationTypes.ROTATEX:r.quantumState.rx(r.bitId,e);break;case a.QuantumOperationTypes.ROTATEY:r.quantumState.ry(r.bitId,e);break;case a.QuantumOperationTypes.ROTATEZ:r.quantumState.rz(r.bitId,e)}},t.prototype.requestMeasure=function(t){var e=this._lookupQubitQuantumStateMapElementFromQubit(t);return this._measureQubit(e)},t.prototype.toStringQubit=function(t){return this._lookupQubitQuantumStateMapElementFromQubit(t).quantumState.toString()},t.prototype.getCompositedQubits=function(t){var e=this._lookupQubitQuantumStateMapElementFromQubit(t).quantumState;return this._mapQubitQuantumState.filter((function(t){return t.quantumState===e})).map((function(t){return t.qubit}))},t.prototype.cloneQubits=function(t){var e=this,n=this._lookupQubitQuantumStateMapElementFromQubit(t).quantumState,a=n.simulated.clone(),o=this._mapQubitQuantumState.filter((function(t){return t.quantumState===n})),u=o.map((function(t){var n=new r.Qubit,o=e._lookupQubitQuantumStateMapElementFromQubit(n);return o.quantumState,o.bitId=t.bitId,o.quantumState=a,o}));return{index:o.findIndex((function(e){return e.qubit===t})),qubits:u.map((function(t){return t.qubit}))}},t.prototype.getStateVectorFromQubit=function(t){return this._lookupQubitQuantumStateMapElementFromQubit(t).quantumState.simulated.getStateVector()},t.prototype.mergeStateVector=function(t){var e=this,n=t.map((function(t){return e._lookupQubitQuantumStateMapElementFromQubit(t)})),r=n[0];n.slice(1).forEach((function(t){r.quantumState!==t.quantumState&&e._mergeQubitMapElement(r,t)}))},t.prototype._requestOperationSingleQubit=function(t,e){switch(t){case a.QuantumOperationTypes.X:e.quantumState.x(e.bitId);break;case a.QuantumOperationTypes.Y:e.quantumState.y(e.bitId);break;case a.QuantumOperationTypes.Z:e.quantumState.z(e.bitId);break;case a.QuantumOperationTypes.S:e.quantumState.s(e.bitId);break;case a.QuantumOperationTypes.T:e.quantumState.t(e.bitId);break;case a.QuantumOperationTypes.H:e.quantumState.h(e.bitId)}},t.prototype._requestControlledOperationQubit=function(t,e,n){switch(t){case a.QuantumOperationTypes.CONTROLLED_X:n.quantumState.controlledX(e.bitId,n.bitId);break;case a.QuantumOperationTypes.CONTROLLED_Y:n.quantumState.controlledY(e.bitId,n.bitId);break;case a.QuantumOperationTypes.CONTROLLED_Z:n.quantumState.controlledZ(e.bitId,n.bitId)}},t.prototype._measureQubit=function(t){return t.quantumState.measure(t.bitId).result},t.prototype._lookupQubitQuantumStateMapElementFromQubit=function(t){return this._mapQubitQuantumState.find((function(e){return e.qubit===t}))},t.prototype._mergeQubitMapElement=function(t,e){var n=e.quantumState.length,r=this._mapQubitQuantumState.filter((function(e){return e.quantumState===t.quantumState})),a=this._mapQubitQuantumState.filter((function(t){return t.quantumState===e.quantumState})),o=t.quantumState.merge(e.quantumState);r.forEach((function(t){t.quantumState=o})),a.forEach((function(t){t.quantumState=o})),r.forEach((function(t){return t.bitId=t.bitId+n}))},t}();e.Core=u},196:function(t,e,n){var r,a=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},r(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(914),u=n(202);e.quantumStateJsQubitsGenerator=function(t){return new i(t)};var i=function(t){function e(n){var r=t.call(this,n)||this;if(r._qstate=u.jsqubits("|0>"),"number"==typeof n)switch(n){case 0:break;case 1:r._qstate=r._qstate.x(0)}else switch(n){case"0":case"|0>":break;case"1":case"|1>":r._qstate=r._qstate.x(0);break;case"+":r._qstate=r._qstate.hadamard(0);break;case"-":r._qstate=r._qstate.x(0),r._qstate=r._qstate.hadamard(0)}return r.simulated={clone:function(){var t=new e(0);return t._qstate=r._qstate.normalize(),t},getStateVector:function(){for(var t=Math.pow(2,r._qstate.numBits()),e=[],n=0;n<t;n++){var a=r._qstate.amplitude(n);e.push({re:a.real,im:a.imaginary})}return e}},r}return a(e,t),e.prototype.x=function(t){this._qstate=this._qstate.X(t)},e.prototype.y=function(t){this._qstate=this._qstate.Y(t)},e.prototype.z=function(t){this._qstate=this._qstate.Z(t)},e.prototype.r=function(t,e){this._qstate=this._qstate.r(t,e)},e.prototype.s=function(t){this._qstate=this._qstate.s(t)},e.prototype.t=function(t){this._qstate=this._qstate.t(t)},e.prototype.h=function(t){this._qstate=this._qstate.hadamard(t)},e.prototype.cnot=function(t,e){this._qstate=this._qstate.controlledX(t,e)},e.prototype.controlledX=function(t,e){this._qstate=this._qstate.controlledX(t,e)},e.prototype.controlledY=function(t,e){this._qstate=this._qstate.controlledY(t,e)},e.prototype.controlledZ=function(t,e){this._qstate=this._qstate.controlledZ(t,e)},e.prototype.rx=function(t,e){this._qstate=this._qstate.rotateX(t,e)},e.prototype.ry=function(t,e){this._qstate=this._qstate.rotateY(t,e)},e.prototype.rz=function(t,e){this._qstate=this._qstate.rotateZ(t,e)},e.prototype.measure=function(t){var e=this._qstate.measure(t);return this._qstate=e.newState,{newQuantumState:this,result:e.result}},e.prototype.merge=function(t){return this._qstate=this._qstate.tensorProduct(t._qstate),this},Object.defineProperty(e.prototype,"length",{get:function(){return this._qstate.numBits()},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return this._qstate.toString()},e}(o.QuantumState);e.QuantumStateJsqubits=i},412:function(t,e,n){var r=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),a=0;for(e=0;e<n;e++)for(var o=arguments[e],u=0,i=o.length;u<i;u++,a++)r[a]=o[u];return r};Object.defineProperty(e,"__esModule",{value:!0});var a=n(984),o=function(){function t(e){void 0===e&&(e={value:0}),t._core.createNewQubit(this,e),this._createSimulated()}return t.prototype.x=function(){t._core.requestOperation(a.QuantumOperationTypes.X,this)},t.prototype.y=function(){t._core.requestOperation(a.QuantumOperationTypes.Y,this)},t.prototype.z=function(){t._core.requestOperation(a.QuantumOperationTypes.Z,this)},t.prototype.r=function(e){t._core.requestRotateOperation(a.QuantumOperationTypes.R,e,this)},t.prototype.s=function(){t._core.requestOperation(a.QuantumOperationTypes.S,this)},t.prototype.t=function(){t._core.requestOperation(a.QuantumOperationTypes.T,this)},t.prototype.h=function(){t._core.requestOperation(a.QuantumOperationTypes.H,this)},t.prototype.cnot=function(e){t._core.requestOperation(a.QuantumOperationTypes.CONTROLLED_X,e,this)},t.prototype.controlledX=function(e){t._core.requestOperation(a.QuantumOperationTypes.CONTROLLED_X,e,this)},t.prototype.controlledY=function(e){t._core.requestOperation(a.QuantumOperationTypes.CONTROLLED_Y,e,this)},t.prototype.controlledZ=function(e){t._core.requestOperation(a.QuantumOperationTypes.CONTROLLED_Z,e,this)},t.prototype.rotateX=function(e){t._core.requestRotateOperation(a.QuantumOperationTypes.ROTATEX,e,this)},t.prototype.rotateY=function(e){t._core.requestRotateOperation(a.QuantumOperationTypes.ROTATEY,e,this)},t.prototype.rotateZ=function(e){t._core.requestRotateOperation(a.QuantumOperationTypes.ROTATEZ,e,this)},t.prototype.toffoli=function(e,n){t._core.requestOperation(a.QuantumOperationTypes.TOFFOLI,e,n,this)},t.prototype.measure=function(){return t._core.requestMeasure(this)},t.prototype.toString=function(){return t._core.toStringQubit(this)},t.prototype._createSimulated=function(){var e=this;this.simulated={clone:function(){return t._core.cloneQubits(e)},compositedQubits:function(){return t._core.getCompositedQubits(e)},getStateVector:function(){return t._core.getStateVectorFromQubit(e)},mergeStateVector:function(n){Array.isArray(n)||(n=[n]),t._core.mergeStateVector(r([e],n))}}},t}();e.Qubit=o},458:(t,e,n)=>{n(914).QuantumState;var r=n(196);r.QuantumStateJsqubits;var a=n(412);e.xz=a.Qubit;var o=n(234);o.Core,n(299);var u={quantumStateGenerator:r.quantumStateJsQubitsGenerator},i=new o.Core(u);a.Qubit._core=i},46:(t,e)=>{function n(t,e){t.t(e),t.t(e),t.t(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.toffoli=function(t,e,r,a){t.t(r),t.h(a),t.t(a),t.cnot(r,a),n(t,a),t.cnot(r,a),t.cnot(e,r),n(t,r),t.cnot(r,a),t.t(a),t.cnot(r,a),t.cnot(e,r),t.cnot(e,a),n(t,a),t.cnot(e,a),t.t(e),t.h(a)}},299:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0});var r=n(412);e.intToQubits=function(t,e){if(!Number.isInteger(t))throw new Error("value must be integer.");var n=t.toString(2),a=n.length;if(a>e)throw new Error("Designated qubits length cannot express given number.");for(var o=[],u=0;u<e;u++)u<a&&"1"===n[a-u-1]?o.push(new r.Qubit({value:1})):o.push(new r.Qubit({value:0}));return o}},984:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.X=0]="X",t[t.Y=1]="Y",t[t.Z=2]="Z",t[t.R=3]="R",t[t.S=4]="S",t[t.T=5]="T",t[t.H=6]="H",t[t.CONTROLLED_X=7]="CONTROLLED_X",t[t.CONTROLLED_Y=8]="CONTROLLED_Y",t[t.CONTROLLED_Z=9]="CONTROLLED_Z",t[t.ROTATEX=10]="ROTATEX",t[t.ROTATEY=11]="ROTATEY",t[t.ROTATEZ=12]="ROTATEZ",t[t.TOFFOLI=13]="TOFFOLI"}(e.QuantumOperationTypes||(e.QuantumOperationTypes={}))},644:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=u(n(766)),o=u(n(287));function u(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var c=function(){function t(e,n){i(this,t),this.equal=this.eql,this.equals=this.eql,(0,a.default)(arguments,1,2,"Must supply a real, and optionally an imaginary, argument to Complex()"),n=n||0,this.real=e,this.imaginary=n}return r(t,[{key:"add",value:function(e){return(0,a.default)(arguments,1,1,"Must supply 1 parameter to add()"),o.default.isNumber(e)?new t(this.real+e,this.imaginary):new t(this.real+e.real,this.imaginary+e.imaginary)}},{key:"multiply",value:function(e){return(0,a.default)(arguments,1,1,"Must supply 1 parameter to multiply()"),o.default.isNumber(e)?new t(this.real*e,this.imaginary*e):new t(this.real*e.real-this.imaginary*e.imaginary,this.real*e.imaginary+this.imaginary*e.real)}},{key:"conjugate",value:function(){return new t(this.real,-this.imaginary)}},{key:"toString",value:function(){if(0===this.imaginary)return""+this.real;var t;if(t=1===this.imaginary?"i":-1===this.imaginary?"-i":this.imaginary+"i",0===this.real)return t;var e=this.imaginary<0?"":"+";return this.real+e+t}},{key:"inspect",value:function(){return this.toString()}},{key:"format",value:function(e){var n=this.real,r=this.imaginary;if(e&&null!=e.decimalPlaces){var a=Math.pow(10,e.decimalPlaces);n=Math.round(n*a)/a,r=Math.round(r*a)/a}return new t(n,r).toString()}},{key:"negate",value:function(){return new t(-this.real,-this.imaginary)}},{key:"magnitude",value:function(){return Math.sqrt(this.real*this.real+this.imaginary*this.imaginary)}},{key:"phase",value:function(){return Math.atan2(this.imaginary,this.real)}},{key:"subtract",value:function(e){return(0,a.default)(arguments,1,1,"Must supply 1 parameter to subtract()"),o.default.isNumber(e)?new t(this.real-e,this.imaginary):new t(this.real-e.real,this.imaginary-e.imaginary)}},{key:"eql",value:function(e){return e instanceof t&&this.real===e.real&&this.imaginary===e.imaginary}},{key:"closeTo",value:function(t){return Math.abs(this.real-t.real)<1e-4&&Math.abs(this.imaginary-t.imaginary)<1e-4}}]),t}();c.ONE=new c(1,0),c.ZERO=new c(0,0),c.SQRT2=new c(Math.SQRT2,0),c.SQRT1_2=new c(Math.SQRT1_2,0),e.default=c},382:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=e-t.length,r=0;r<n;r++)t="0"+t;return t}var o=function(){function t(e,n,a){r(this,t),this.numBits=e,this.result=n,this.newState=a}return n(t,[{key:"toString",value:function(){return"{result: "+this.result+", newState: "+this.newState+"}"}},{key:"asBitString",value:function(){return a(this.result.toString(2),this.numBits)}}]),t}();e.default=o,e.QStateComponent=function(){function t(e,n,a){r(this,t),this.numBits=e,this.index=n,this.amplitude=a}return n(t,[{key:"asNumber",value:function(){return parseInt(this.index,10)}},{key:"asBitString",value:function(){return a(parseInt(this.index,10).toString(2),this.numBits)}}]),t}()},933:(t,e)=>{function n(t,e,r){if(0===e)return 1;if(1===e)return t;var a=n(t,Math.floor(e/2),r),o=a*a%r;return e%2==1&&(o=t*o%r),o}function r(t){return Math.abs(t-Math.round(t))<1e-7}function a(t){var e=Math.log(t)/Math.log(2),n=Math.floor(e);if(e===n)return 2;for(n--;n>1;n--){var a=Math.pow(t,1/n);if(r(a))return Math.round(a)}return 0}function o(t,e){for(;0!==e;){var n=t%e;t=e,e=n}return t}function u(t,e){return t*e/o(t,e)}function i(t){return t>=0?Math.floor(t):Math.ceil(t)}function c(t,e){var n=void 0,r=void 0;Math.abs(t)>=1?r=t-(n=i(t)):(n=0,r=t);for(var a={numerator:1,denominator:0},o={numerator:n,denominator:1},u=[n];Math.abs(t-o.numerator/o.denominator)>e;){var c=1/r,l=i(c);r=c-l,u.push(l);var s={numerator:l*o.numerator+a.numerator,denominator:l*o.denominator+a.denominator};a=o,o=s}var f=o,p=f.numerator,m=f.denominator;return o.denominator<0&&(p*=-1,m*=-1),{quotients:u,numerator:p,denominator:m}}function l(t,e){var n=function(t){for(var e=[],n=0;n<t.length;n++)e[n]=t[n];return e}(t);function r(t,e){var r=1<<t;if(!(r&n[e]))for(var a=e+1;a<n.length;a++)if(r&n[a]){var o=n[e];return n[e]=n[a],void(n[a]=o)}}function a(t,e){for(var r=n[e],a=1<<t,o=0;o<n.length;o++)o!==e&&a&n[o]&&(n[o]^=r)}function o(t,e,r){for(var a=1<<e,o=a,u=0;u<r;u++)n[u]&a&&(o+=1<<t[u]);return o}var u=[];return function(t){for(var o=0,u=e-1;u>=0;u--)r(u,o),1<<u&n[o]&&(t[o]=u,a(u,o),o++)}(u),function(t){for(var n=[],r=0,a=t[r],u=e-1;u>=0;u--)u===a?a=t[++r]:n.push(o(t,u,r));return n}(u)}Object.defineProperty(e,"__esModule",{value:!0}),e.powerMod=n,e.powerFactor=a,e.gcd=o,e.lcm=u,e.continuedFraction=c,e.findNullSpaceMod2=l,e.default={powerMod:n,powerFactor:a,gcd:o,lcm:u,continuedFraction:c,findNullSpaceMod2:l}},899:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(382),o=s(a),u=s(n(644)),i=s(n(766)),c=s(n(287)),l=s(n(163));function s(t){return t&&t.__esModule?t:{default:t}}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p(t){return t=t.replace(/^\|/,"").replace(/>$/,""),{value:parseInt(t,2),length:t.length}}function m(t,e,n){n.magnitude()>l.default.roundToZero&&(t[e]=n)}function d(t,e,n){var r=(t[e]||u.default.ZERO).add(n);r.magnitude()>l.default.roundToZero?t[e]=r:delete t[e]}function h(t,e){if(null==t)throw new Error("bit qualification must be supplied");if(t===l.default.ALL)return{from:0,to:e-1};if(c.default.isNumber(t))return{from:t,to:t};if(null!=t.from&&null!=t.to){if(t.from>t.to)throw new Error('bit range must have "from" being less than or equal to "to"');return t}throw new Error("bit qualification must be either: a number, Constants.ALL, or {from: n, to: m}")}function v(t,e){for(var n=0;n<t.length;n++)for(var r=t[n],a=0;a<e.length;a++)if(r===e[a])throw new Error("control and target bits must not be the same nor overlap")}function y(t){var e=t.random(),n=void 0,r=0;return t.each((function(t){var a=t.amplitude.magnitude();return r+=a*a,n=t.index,r<=e})),parseInt(n,10)}function b(t,e){if(t>e)throw new Error("bit range must have `from` being less than or equal to `to`");for(var n=[],r=t;r<=e;r++)n.push(r);return n}function g(t,e){if(null==t)throw new Error("bit qualification must be supplied");if(c.default.isArray(t))return t;if(c.default.isNumber(t))return[t];if(t===l.default.ALL)return b(0,e-1);if(null!=t.from&&null!=t.to)return b(t.from,t.to);throw new Error("bit qualification must be either: a number, an array of numbers, Constants.ALL, or {from: n, to: m}")}function x(t){var e=null;if(t){e=0;for(var n=0;n<t.length;n++)e+=1<<t[n]}return e}var w=[[u.default.SQRT1_2,u.default.SQRT1_2],[u.default.SQRT1_2,u.default.SQRT1_2.negate()]],_=[[u.default.ZERO,u.default.ONE],[u.default.ONE,u.default.ZERO]],O=[[u.default.ZERO,new u.default(0,-1)],[new u.default(0,1),u.default.ZERO]],j=[[u.default.ONE,u.default.ZERO],[u.default.ZERO,u.default.ONE.negate()]],S=[[u.default.ONE,u.default.ZERO],[u.default.ZERO,new u.default(0,1)]],q=[[u.default.ONE,u.default.ZERO],[u.default.ZERO,new u.default(Math.SQRT1_2,Math.SQRT1_2)]],C=function(){function t(e,n){f(this,t),this.kron=this.tensorProduct,this.R=this.r,this.cnot=this.controlledX,this.not=this.x,this.X=this.x,this.Y=this.y,this.Z=this.z,this.S=this.s,this.T=this.t,this.equal=this.eql,(0,i.default)(arguments,1,"new QState() must be supplied with number of bits (optionally with amplitudes as well)"),n=n||[l.default.ONE],this.numBits=function(){return e},this.amplitude=function(t){var e=c.default.isString(t)?p(t).value:t;return n[e]||u.default.ZERO},this.each=function(t){for(var r=Object.keys(n),o=0;o<r.length;o++){var u=r[o];if(!1===t(new a.QStateComponent(e,u,n[u])))break}}}return r(t,[{key:"multiply",value:function(e){c.default.isNumber(e)&&(e=new u.default(e));var n={};return this.each((function(t){n[t.index]=t.amplitude.multiply(e)})),new t(this.numBits(),n)}},{key:"add",value:function(e){var n={};return this.each((function(t){n[t.index]=t.amplitude})),e.each((function(t){var e=n[t.index]||u.default.ZERO;n[t.index]=t.amplitude.add(e)})),new t(this.numBits(),n)}},{key:"subtract",value:function(t){return this.add(t.multiply(-1))}},{key:"tensorProduct",value:function(e){var n={};return this.each((function(t){e.each((function(r){var a=(t.asNumber()<<e.numBits())+r.asNumber(),o=t.amplitude.multiply(r.amplitude);n[a]=o}))})),new t(this.numBits()+e.numBits(),n)}},{key:"controlledHadamard",value:function(t,e){return(0,i.default)(arguments,2,2,"Must supply control and target bits to controlledHadamard()"),this.controlledApplicationOfqBitOperator(t,e,w)}},{key:"hadamard",value:function(t){return(0,i.default)(arguments,1,1,"Must supply target bits to hadamard() as either a single index or a range."),this.controlledHadamard(null,t)}},{key:"controlledXRotation",value:function(t,e,n){(0,i.default)(arguments,3,3,"Must supply control bits, target bits, and an angle, to controlledXRotation()");var r=n/2,a=new u.default(Math.cos(r)),o=new u.default(0,-Math.sin(r)),c=[[a,o],[o,a]];return this.controlledApplicationOfqBitOperator(t,e,c)}},{key:"rotateX",value:function(t,e){return(0,i.default)(arguments,2,2,"Must supply target bits and angle to rotateX."),this.controlledXRotation(null,t,e)}},{key:"controlledYRotation",value:function(t,e,n){(0,i.default)(arguments,3,3,"Must supply control bits, target bits, and an angle, to controlledYRotation()");var r=n/2,a=new u.default(Math.cos(r)),o=new u.default(Math.sin(r)),c=[[a,o.negate()],[o,a]];return this.controlledApplicationOfqBitOperator(t,e,c)}},{key:"rotateY",value:function(t,e){return(0,i.default)(arguments,2,2,"Must supply target bits and angle to rotateY."),this.controlledYRotation(null,t,e)}},{key:"controlledZRotation",value:function(t,e,n){(0,i.default)(arguments,3,3,"Must supply control bits, target bits, and an angle to controlledZRotation()");var r=n/2,a=new u.default(Math.cos(r)),o=new u.default(0,Math.sin(r)),c=[[a.subtract(o),u.default.ZERO],[u.default.ZERO,a.add(o)]];return this.controlledApplicationOfqBitOperator(t,e,c)}},{key:"rotateZ",value:function(t,e){return(0,i.default)(arguments,2,2,"Must supply target bits and angle to rotateZ."),this.controlledZRotation(null,t,e)}},{key:"controlledR",value:function(t,e,n){(0,i.default)(arguments,3,3,"Must supply control and target bits, and an angle to controlledR().");var r=new u.default(Math.cos(n)),a=new u.default(0,Math.sin(n)),o=[[u.default.ONE,u.default.ZERO],[u.default.ZERO,r.add(a)]];return this.controlledApplicationOfqBitOperator(t,e,o)}},{key:"r",value:function(t,e){return(0,i.default)(arguments,2,2,"Must supply target bits and angle to r()."),this.controlledR(null,t,e)}},{key:"controlledX",value:function(t,e){return(0,i.default)(arguments,2,2,"Must supply control and target bits to cnot() / controlledX()."),this.controlledApplicationOfqBitOperator(t,e,_)}},{key:"x",value:function(t){return(0,i.default)(arguments,1,1,"Must supply target bits to x() / not()."),this.controlledX(null,t)}},{key:"controlledY",value:function(t,e){return(0,i.default)(arguments,2,2,"Must supply control and target bits to controlledY()."),this.controlledApplicationOfqBitOperator(t,e,O)}},{key:"y",value:function(t){return(0,i.default)(arguments,1,1,"Must supply target bits to y()."),this.controlledY(null,t)}},{key:"controlledZ",value:function(t,e){return(0,i.default)(arguments,2,2,"Must supply control and target bits to controlledZ()."),this.controlledApplicationOfqBitOperator(t,e,j)}},{key:"z",value:function(t){return(0,i.default)(arguments,1,1,"Must supply target bits to z()."),this.controlledZ(null,t)}},{key:"controlledS",value:function(t,e){return(0,i.default)(arguments,2,2,"Must supply control and target bits to controlledS()."),this.controlledApplicationOfqBitOperator(t,e,S)}},{key:"s",value:function(t){return(0,i.default)(arguments,1,1,"Must supply target bits to s()."),this.controlledS(null,t)}},{key:"controlledT",value:function(t,e){return(0,i.default)(arguments,2,2,"Must supply control and target bits to controlledT()."),this.controlledApplicationOfqBitOperator(t,e,q)}},{key:"t",value:function(t){return(0,i.default)(arguments,1,1,"Must supply target bits to t()."),this.controlledT(null,t)}},{key:"controlledSwap",value:function(e,n,r){(0,i.default)(arguments,3,3,"Must supply controlBits, targetBit1, and targetBit2 to controlledSwap()");var a={};null!=e&&(e=g(e,this.numBits()));var o=x(e),u=1<<n,c=1<<r;return this.each((function(t){var i=t.asNumber(),l=i;null!=e&&(i&o)!==o||(l=i&~u&~c|(i&c)>>r<<n|(i&u)>>n<<r),a[l]=t.amplitude})),new t(this.numBits(),a)}},{key:"swap",value:function(t,e){return(0,i.default)(arguments,2,2,"Must supply targetBit1 and targetBit2 to swap()"),this.controlledSwap(null,t,e)}},{key:"toffoli",value:function(){(0,i.default)(arguments,2,"At least one control bit and a target bit must be supplied to calls to toffoli()");for(var t=arguments[arguments.length-1],e=[],n=0;n<arguments.length-1;n++)e.push(arguments[n]);return this.controlledX(e,t)}},{key:"controlledApplicationOfqBitOperator",value:function(e,n,r){(0,i.default)(arguments,3,3,"Must supply control bits, target bits, and qbitFunction to controlledApplicationOfqBitOperator().");var a=g(n,this.numBits()),o=null;null!=e&&v(o=g(e,this.numBits()),a);for(var u=this,c=0;c<a.length;c++){var l=a[c];u=t.applyToOneBit(o,l,r,u)}return u}},{key:"applyFunction",value:function(e,n,r){function a(t,e){if(t.to>=e.from&&e.to>=t.from)throw new Error("control and target bits must not be the same nor overlap")}(0,i.default)(arguments,3,3,"Must supply control bits, target bits, and functionToApply to applyFunction().");var o=this,u=h(e,this.numBits()),c=h(n,this.numBits());a(u,c);var l={},s={},f=(1<<u.to+1)-1,p=(1<<1+c.to-c.from)-1<<c.from;return this.each((function(t){var e=t.asNumber();if(!s[t.index]){var n=(e&f)>>u.from,a=e^r(n)<<c.from&p;a===e?m(l,e,t.amplitude):(s[a]=!0,m(l,e,o.amplitude(a)),m(l,a,t.amplitude))}})),new t(this.numBits(),l)}},{key:"random",value:function(){return Math.random()}},{key:"normalize",value:function(){var e={},n=0;this.each((function(t){var e=t.amplitude.magnitude();n+=e*e}));var r=new u.default(1/Math.sqrt(n));return this.each((function(t){e[t.index]=t.amplitude.multiply(r)})),new t(this.numBits(),e)}},{key:"measure",value:function(e){(0,i.default)(arguments,1,1,"Must supply bits to be measured to measure().");var n=this.numBits(),r=g(e,n),a=y(this),u=x(r),c=a&u,l={};this.each((function(t){var e=t.asNumber();(e&u)===c&&(l[e]=t.amplitude)}));for(var s=0,f=n-1;f>=0;f--)r.indexOf(f)>=0&&(s<<=1,a&1<<f&&(s+=1));var p=new t(this.numBits(),l).normalize();return new o.default(r.length,s,p)}},{key:"qft",value:function(t){function e(t,n){var r=n[0];if(n.length>1){t=e(t,n.slice(1));for(var a=1;a<n.length;a++){var o=n[a],u=2*Math.PI/(1<<a+1);t=t.controlledR(r,o,u)}}return t.hadamard(r)}function n(t,e){for(;e.length>1;)t=t.swap(e[0],e[e.length-1]),e=e.slice(1,e.length-1);return t}(0,i.default)(arguments,1,1,"Must supply bits to be measured to qft().");var r=g(t,this.numBits()),a=e(this,r);return n(a,r)}},{key:"eql",value:function(e){function n(t,e){var n=!0;return t.each((function(t){return n=t.amplitude.eql(e.amplitude(t.asNumber()))})),n}return!!e&&e instanceof t&&this.numBits()===e.numBits()&&n(this,e)&&n(e,this)}},{key:"toString",value:function(){function t(t,e){var n=t.format(e);return"1"===n?"":"("+n+")"}function e(t,e){return t.asNumber()-e.asNumber()}for(var n=void 0,r="",a={decimalPlaces:4},o=function(t){var n=[];return t.each((function(t){n.push(t)})),n.sort(e),n}(this),u=0;u<o.length;u++)""!==r&&(r+=" + "),r=r+t((n=o[u]).amplitude,a)+"|"+n.asBitString()+">";return r}}],[{key:"fromBits",value:function(e){(0,i.default)(arguments,1,1,"Must supply a bit string");var n=p(e),r={};return r[n.value]=l.default.ONE,new t(n.length,r)}},{key:"applyOperatorMatrix",value:function(t,e,n){return[t[0][e].multiply(n),t[1][e].multiply(n)]}},{key:"applyToOneBit",value:function(e,n,r,a){var o={},u=1<<n,i=~u,c=x(e);return a.each((function(n){var a=n.asNumber();if(null==e||(a&c)===c){var l=(u&a)>0?1:0,s=t.applyOperatorMatrix(r,l,n.amplitude),f=a|u;d(o,a&i,s[0]),d(o,f,s[1])}else o[a]=n.amplitude})),new t(a.numBits(),o)}}]),t}();e.default=C},163:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0});var r,a=(r=n(644))&&r.__esModule?r:{default:r};e.default={ZERO:a.default.ZERO,ONE:new a.default(1,0),ALL:"ALL",roundToZero:1e-7}},202:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.jsqubits=void 0;var r=l(n(899)),a=l(n(644)),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(933)),u=n(382),i=l(u),c=l(n(163));function l(t){return t&&t.__esModule?t:{default:t}}function s(t){return r.default.fromBits(t)}s.complex=function(t,e){return new a.default(t,e)},s.real=function(t){return new a.default(t,0)},s.QMath=o,s.Complex=a.default,s.QState=r.default,s.Measurement=i.default,s.QStateComponent=u.QStateComponent,Object.assign(s,c.default),e.default=s,e.jsqubits=s},287:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){return Object.prototype.toString.call(t)};e.default={isNull:function(t){return"[object Null]"===n(t)},isObject:function(t){return"[object Object]"===n(t)},isArray:function(t){return"[object Array]"===n(t)},isString:function(t){return"[object String]"===n(t)},isNumber:function(t){return"[object Number]"===n(t)},isBoolean:function(t){return"[object Boolean]"===n(t)},isDate:function(t){return"[object Date]"===n(t)},isUndefined:function(t){return"[object Undefined]"===n(t)},isRegExp:function(t){return"[object RegExp]"===n(t)}}},766:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){for(var n=1e4,r="Must supply at least "+e+" parameters.",a=arguments.length,o=Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];if(o.length>2)throw new Error("Internal error: too many arguments to validateArgs");if(2===o.length?(n=o[0],r=o[1]):1===o.length&&(r=o[0]),t.length<e||t.length>n)throw r}}},n={};function r(e){var a=n[e];if(void 0!==a)return a.exports;var o=n[e]={exports:{}};return t[e].call(o.exports,o,o.exports,r),o.exports}r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var a={};(()=>{r.r(a),r.d(a,{BrowserUIClient:()=>A});var t=function(){return t=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t},t.apply(this,arguments)},e={X:"x",Y:"y",Z:"z",H:"h",T:"t",S:"s"},n={RX:"rx",RY:"ry",RZ:"rz"},o={CNOT:"cnot",CCNOT:"ccnot"},u=t(t(t({},e),n),o);function i(t){var r=[];return function(t,e){t.push("OPENQASM 2.0;"),t.push('include "qelib1.inc";'),t.push(""),t.push("qreg q[".concat(e.size,"];"))}(r,t),function(t,r){r.circuit.forEach((function(r){r.forEach((function(r,a){if(r){var u=function(t,r){switch(t.type){case e.X:case e.Y:case e.Z:case e.H:case e.S:case e.T:return function(t,n){var r="q[".concat(n,"]");switch(t.type){case e.X:return"x ".concat(r,";");case e.Y:return"y ".concat(r,";");case e.Z:return"z ".concat(r,";");case e.H:return"h ".concat(r,";");case e.S:return"s ".concat(r,";");case e.T:return"t ".concat(r,";");default:throw new Error("applySingleGate: cannot apply unknown gate: ".concat(t.type))}}(t,r);case n.RX:case n.RY:case n.RZ:return function(t,e){var r=1===t.param?"(pi)":0===t.param?"(0)":"(pi * ".concat(t.param,")"),a="".concat(r," q[").concat(e,"]");switch(t.type){case n.RX:return"rx".concat(a,";");case n.RY:return"ry".concat(a,";");case n.RZ:return"rz".concat(a,";");default:throw new Error("applyParametricSingleGate: cannot apply unknown gate: ".concat(t.type))}}(t,r);case o.CNOT:case o.CCNOT:return function(t,e){var n=t.controllQubitIndex.map((function(t){return"q[".concat(t,"]")})).join(",");switch(t.type){case o.CNOT:return"cx ".concat(n,",q[").concat(e,"];");case o.CCNOT:return"ccx ".concat(n,",q[").concat(e,"];");default:throw new Error("applyMultiGate: cannot apply unknown gate: ".concat(t.type))}}(t,r);default:return""}}(r,a);t.push(u)}}))}))}(r,t),r.join("\n")}function c(t){var e=new Set;return t.forEach((function(t){t.forEach((function(t){t&&e.add(t.type)}))})),e}function l(t){if(!t.observable||0===t.observable.length||0===t.observable[0].operators.length)return!0;var e=function(t){var e=new Set;return t.forEach((function(t){t.operators.forEach((function(t){t&&e.add(t)}))})),e}(t.observable);return!(e.has("x")||e.has("y")||e.has("z"))}var s=function(t){return Object.values(e).some((function(e){return e===t}))},f=function(t){return Object.values(n).some((function(e){return e===t}))},p=function(t){return Object.values(o).some((function(e){return e===t}))},m="    ";function d(t,r){var a=[];return function(t,e){t.push("import pennylane as qml"),t.push("from numpy import pi"),t.push(""),t.push('device = qml.device("default.qubit", wires='.concat(e.size,")"))}(a,t),a.push(""),function(t,r){t.push("@qml.qnode(device)"),t.push("def circuit():"),r.circuit.forEach((function(r){r.forEach((function(r,a){if(r){var u=function(t,r){switch(t.type){case e.X:case e.Y:case e.Z:case e.H:case e.S:case e.T:return function(t,n){switch(t.type){case e.X:return"qml.PauliX(wires=".concat(n,")");case e.Y:return"qml.PauliY(wires=".concat(n,")");case e.Z:return"qml.PauliZ(wires=".concat(n,")");case e.H:return"qml.Hadamard(wires=".concat(n,")");case e.S:return"qml.S(wires=".concat(n,")");case e.T:return"qml.T(wires=".concat(n,")");default:throw new Error("applySingleGate: cannot apply unknown gate: ".concat(t.type))}}(t,r);case n.RX:case n.RY:case n.RZ:return function(t,e){var r=t.param;switch(t.type){case n.RX:return"qml.RX(pi * ".concat(r,", wires=").concat(e,")");case n.RY:return"qml.RY(pi * ".concat(r,", wires=").concat(e,")");case n.RZ:return"qml.RZ(pi * ".concat(r,", wires=").concat(e,")");default:throw new Error("applyParametricSingleGate: cannot apply unknown gate: ".concat(t.type))}}(t,r);case o.CNOT:case o.CCNOT:return function(t,e){switch(t.type){case o.CNOT:return"qml.CNOT(wires=[".concat(t.controllQubitIndex[0],", ").concat(e,"])");case o.CCNOT:return"qml.Toffoli(wires=[".concat(t.controllQubitIndex.join(", "),", ").concat(e,"])");default:throw new Error("applyMultiGate: cannot apply unknown gate: ".concat(t.type))}}(t,r);default:return""}}(r,a);t.push(m+u)}}))}))}(a,t),function(t,n,r){var a;a=l(n)?{observable:[{operators:Array(r).fill(void 0),coefficient:1}]}:n;var o="return ".concat(a.observable.map((function(t){var n=t.operators.map((function(t,n){return function(t,n){if(!t)return"qml.Identity(".concat(n,")");switch(t){case e.X:return"qml.PauliX(".concat(n,")");case e.Y:return"qml.PauliY(".concat(n,")");case e.Z:return"qml.PauliZ(".concat(n,")");default:throw new Error("applyObservableOperator: cannot apply unknown operator: ".concat(t))}}(t,n)}));return"qml.expval(".concat(t.coefficient," * ").concat(n.join(" @ "),")")})).join(", "));t.push(m+o),t.push(""),t.push("r = circuit()"),a.observable.length>2?t.push("print(sum(r))"):t.push("print(r)")}(a,r,t.size),a.join("\n")}function h(t){return t.has("rx")||t.has("ry")||t.has("rz")}function v(t,r){var a=[];return function(t,e){e&&t.push("from numpy import pi"),t.push("from qiskit import *"),t.push("from qiskit.opflow import X, Y, Z, I, StateFn, PauliExpectation, CircuitSampler"),t.push("from qiskit.opflow.expectations import AerPauliExpectation, MatrixExpectation"),t.push("from qiskit.opflow.state_fns import CircuitStateFn"),t.push("from qiskit.utils import QuantumInstance")}(a,h(c(t.circuit))),a.push(""),function(t,e){t.push("qc = QuantumCircuit()"),t.push("qr = QuantumRegister(".concat(e.size,", 'qreg')")),t.push("qc.add_register(qr)")}(a,t),a.push(""),function(t,r){r.circuit.forEach((function(r){r.forEach((function(r,a){if(r){var u=function(t,r){switch(t.type){case e.X:case e.Y:case e.Z:case e.H:case e.S:case e.T:return function(t,n){switch(t.type){case e.X:return"qc.x(qr[".concat(n,"])");case e.Y:return"qc.y(qr[".concat(n,"])");case e.Z:return"qc.z(qr[".concat(n,"])");case e.H:return"qc.h(qr[".concat(n,"])");case e.S:return"qc.s(qr[".concat(n,"])");case e.T:return"qc.t(qr[".concat(n,"])");default:throw new Error("applySingleGate: cannot apply unknown gate: ".concat(t.type))}}(t,r);case n.RX:case n.RY:case n.RZ:return function(t,e){var r=t.param;switch(t.type){case n.RX:return"qc.rx(pi * ".concat(r,", qr[").concat(e,"])");case n.RY:return"qc.ry(pi * ".concat(r,", qr[").concat(e,"])");case n.RZ:return"qc.rz(pi * ".concat(r,", qr[").concat(e,"])");default:throw new Error("applyParametricSingleGate: cannot apply unknown gate: ".concat(t.type))}}(t,r);case o.CNOT:case o.CCNOT:return function(t,e){switch(t.type){case o.CNOT:return"qc.cx(qr[".concat(t.controllQubitIndex[0],"], qr[").concat(e,"])");case o.CCNOT:var n=t.controllQubitIndex.map((function(t){return"qr[".concat(t,"]")})).join(", ");return"qc.ccx(".concat(n,", qr[").concat(e,"])");default:throw new Error("applyMultiGate: cannot apply unknown gate: ".concat(t.type))}}(t,r);default:return""}}(r,a);t.push(u)}}))}))}(a,t),a.push(""),function(t,e,n){var r;r=l(e)?{observable:[{operators:Array(n).fill(void 0),coefficient:1}]}:e,t.push("psi = CircuitStateFn(qc)"),t.push("vector_sim = Aer.get_backend('statevector_simulator')"),t.push("q_instance = QuantumInstance(vector_sim, shots=1)");var a="op = ".concat(r.observable.map((function(t){var e=t.operators.map((function(t){return t?t.toUpperCase():"I"})).reverse().join("^");return"(".concat(t.coefficient," * ").concat(e,")")})).join(" + "));t.push(a),t.push("measurable_expression = StateFn(op, is_measurement=True).compose(psi)"),t.push("expectation = AerPauliExpectation().convert(measurable_expression)"),t.push("sampler = CircuitSampler(vector_sim).convert(expectation)")}(a,r,t.size),a.push("print('Sampled:', sampler.eval().real)"),a.join("\n")}function y(t,r){var a=c(t.circuit),i=h(a),s=[];return function(t,e,n){if(n?(t.push("from numpy import pi"),t.push("from qulacs import QuantumState, ParametricQuantumCircuit, Observable")):t.push("from qulacs import QuantumState, QuantumCircuit, Observable"),e.size>0){var r="from qulacs.gate import";Array.from(e).sort().forEach((function(t,n){var a=function(t){return t===u.CCNOT?"TOFFOLI":t.toUpperCase()}(t);r+=" ".concat(a),n<e.size-1&&(r+=",")})),t.push(r)}}(s,a,i),s.push(""),function(t,r,a){var u;t.push((u=r.size,"state = QuantumState(".concat(u,")\nstate.set_zero_state()"))),t.push(function(t,e){return e?"circuit = ParametricQuantumCircuit(".concat(t,")"):"circuit = QuantumCircuit(".concat(t,")")}(r.size,a)),t.push(""),function(t,r){r.forEach((function(r){r.forEach((function(r,a){if(r){var u=function(t,r){switch(t.type){case e.X:case e.Y:case e.Z:case e.H:case e.S:case e.T:return function(t,n){switch(t.type){case e.X:return"circuit.add_gate(X(".concat(n,"))");case e.Y:return"circuit.add_gate(Y(".concat(n,"))");case e.Z:return"circuit.add_gate(Z(".concat(n,"))");case e.H:return"circuit.add_gate(H(".concat(n,"))");case e.S:return"circuit.add_gate(S(".concat(n,"))");case e.T:return"circuit.add_gate(T(".concat(n,"))");default:throw new Error("applySingleGate: cannot apply unknown gate: ".concat(t.type))}}(t,r);case n.RX:case n.RY:case n.RZ:return function(t,e){var r=t.param;switch(t.type){case n.RX:return"circuit.add_gate(RX(".concat(e,", pi * ").concat(r,"))");case n.RY:return"circuit.add_gate(RY(".concat(e,", pi * ").concat(r,"))");case n.RZ:return"circuit.add_gate(RZ(".concat(e,", pi * ").concat(r,"))");default:throw new Error("applyParametricSingleGate: cannot apply unknown gate: ".concat(t.type))}}(t,r);case o.CNOT:case o.CCNOT:return function(t,e){switch(t.type){case o.CNOT:return"circuit.add_gate(CNOT(".concat(t.controllQubitIndex[0],", ").concat(e,"))");case o.CCNOT:return"circuit.add_gate(TOFFOLI(".concat(t.controllQubitIndex.join(", "),", ").concat(e,"))");default:throw new Error("applyMultiGate: cannot apply unknown gate: ".concat(t.type))}}(t,r);default:return""}}(r,a);t.push(u)}}))}))}(t,r.circuit),t.push("circuit.update_quantum_state(state)")}(s,t,i),s.push(""),function(t,e,n){var r;r=l(e)?{observable:[{operators:[],coefficient:1}]}:e,t.push("expectation_value = 0"),r.observable.forEach((function(e){t.push("copied_state = state.copy()"),t.push("observable = Observable(".concat(n,")"));var r="";e.operators.forEach((function(t,e){t&&(e>0&&r.length>0&&(r+=" "),r+="".concat(t.toUpperCase()," ").concat(e))})),t.push("observable.add_operator(".concat(e.coefficient,', "').concat(r,'")')),t.push("expectation_value += observable.get_expectation_value(copied_state)")}))}(s,r,t.size),s.push("print(expectation_value)"),s.join("\n")}function b(t){var e=[];return function(t,e){var n;(n=l(e)?{observable:[{operators:[void 0],coefficient:0}]}:e).observable.forEach((function(e,r){var a="";e.operators.forEach((function(t,e){t&&(e>0&&a.length>0&&(a+=" "),a+="".concat(t.toUpperCase()).concat(e))})),t.push("(".concat(e.coefficient,"+0j) [").concat(a,"]").concat(r===n.observable.length-1?"":" +"))}))}(e,t),e.join("\n")}function g(t){var e=[];try{var n=t.replace(/(\r\n|\n|\r)/gm,"\n").split("\n"),r=n.find((function(t){return-1!==t.indexOf("qreg")})),a=parseInt(/qreg\s+q\[(.*)\]/.exec(r)[1],10);n.forEach((function(t){var n=function(t){var e=function(t){return/^\s*(.*)/.exec(t)[1].replace("'",'"')}(t);return w.isGate(e)?function(t){var e=x.exec(t),n=e[1],r=e[3]?function(t){var e=t.replace("pi","1");if(/[^\d+\-*/\s.]/.exec(e))throw new Error("theta include illegal string: ".concat(t));for(var n=Array.from(e.matchAll(/([\d.]+|\+|-|\*|\/)/g),(function(t){return t[0]})),r=parseFloat(n[0]),a=1;a<n.length;a+=1){switch(n[a]){case"+":r+=parseFloat(n[a+1]);break;case"-":r-=parseFloat(n[a+1]);break;case"*":r*=parseFloat(n[a+1]);break;case"/":r/=parseFloat(n[a+1]);break;default:continue}a+=1}return-1===t.indexOf("pi")&&(r/=Math.PI),r}(e[3]):void 0,a=Array.from(t.matchAll(/q\[(\d)\]/g),(function(t){return parseInt(t[1],10)}));return{gate:_(n),qubitIndex:a,param:r}}(e):null}(t);n&&e.push(n)}));var o=[Array(a).fill(void 0)];return e.forEach((function(t){!function(t,e,n){var r,a=Array(n).fill(void 0),o=e.qubitIndex[e.qubitIndex.length-1],u=e.gate;(r=s(u)?{type:u,size:1}:f(u)?{type:u,size:1,param:e.param}:p(u)?{type:u,size:e.qubitIndex.length,controllQubitIndex:e.qubitIndex.slice(0,e.qubitIndex.length-1)}:null)&&(a[o]=r),t.push(a)}(o,t,a)})),{isSucceeded:!0,circuit:{circuit:function(t,e){var n=[];return j(n,e),t.forEach((function(t){t.forEach((function(t,r){if(t)if(s(t.type)||f(t.type)){for(var a=O(n,r);n.length<=a+1;)j(n,e);n[a+1][r]=t}else if(p(t.type)){var o=function(t,e,n){if(n||2===arguments.length)for(var r,a=0,o=e.length;a<o;a++)!r&&a in e||(r||(r=Array.prototype.slice.call(e,0,a)),r[a]=e[a]);return t.concat(r||Array.prototype.slice.call(e))}([],Array(e),!0).map((function(t,e){return e})),u=t.controllQubitIndex.concat(r),i=Math.max.apply(null,u),c=Math.min.apply(null,u);u=o.slice(c,i+1);for(var l=Math.max.apply(null,u.map((function(t){return O(n,t)})));n.length<=l+1;)j(n,e);u.forEach((function(e){if(n[l+1][e]=t,e!==r){var a=JSON.parse(JSON.stringify(t));a.controllQubitIndex=[],n[l+1][e]=a}}))}}))})),n.forEach((function(t,e){t.forEach((function(t,r){t&&p(t.type)&&0===t.controllQubitIndex.length&&(n[e][r]=void 0)}))})),n}(o,a),size:a}}}catch(t){return{isSucceeded:!1}}}var x=/^(x|y|z|h|t|s|rx|ry|rz|cx|ccx)(\((.+)\))* q\[/,w={isHeader:function(t){return-1!==t.indexOf("OPENQASM 2.0")},isInclude:function(t){return-1!==t.indexOf('include "qelib1.inc"')},isGate:function(t){return!!x.exec(t)}};function _(t){switch(t){case"x":return e.X;case"y":return e.Y;case"z":return e.Z;case"h":return e.H;case"t":return e.T;case"s":return e.S;case"rx":return n.RX;case"ry":return n.RY;case"rz":return n.RZ;case"cx":return o.CNOT;case"ccx":return o.CCNOT;default:throw new Error("unknown gate type")}}function O(t,e){var n=-1;return t.forEach((function(t,r){t.forEach((function(t,a){a===e&&t&&(n=Math.max(n,r))}))})),n}function j(t,e){t.push(Array(e).fill(void 0))}function S(t){try{var n=t.replace(/(\r\n|\n|\r)/gm,"\n").split("\n"),r=[];n.forEach((function(t){var e=/\((.+)\+0j\)\s*\[(.*)\]\s*\+*/.exec(t);if(e){var n=parseFloat(e[1]),a=Array.from(t.matchAll(/([X|Y|Z])(\d)/g),(function(t){return{gate:t[1],index:parseInt(t[2],10)}}));r.push({coefficient:n,operators:a})}}));var a=[];return r.forEach((function(t){var n=Math.max.apply(null,t.operators.map((function(t){return t.index})).concat(1)),r=Array(n).fill(void 0);t.operators.forEach((function(t){if(t){var n=function(t){switch(t){case"X":return e.X;case"Y":return e.Y;case"Z":return e.Z;default:return null}}(t.gate);n&&(r[t.index]=n)}}));var o={coefficient:t.coefficient,operators:r};a.push(o)})),{isSucceeded:!0,observable:{observable:a}}}catch(t){return{isSucceeded:!1}}}var q=r(458);function C(t,r,a){switch(t.type){case e.X:r.x();break;case e.Y:r.y();break;case e.Z:r.z();break;case e.H:r.h();break;case e.T:r.t();break;case e.S:r.s();break;case n.RX:r.rotateX(t.param*Math.PI);break;case n.RY:r.rotateY(t.param*Math.PI);break;case n.RZ:r.rotateZ(t.param*Math.PI);break;case o.CNOT:var u=t.controllQubitIndex[0];r.cnot(a[u]);break;case o.CCNOT:var i=t.controllQubitIndex[0],c=t.controllQubitIndex[1];r.toffoli(a[i],a[c])}}var R,k=(R=function(t,e){return R=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},R(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}R(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),I=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return k(e,t),e.prototype.getStateVectorWithExpectationValue=function(t,e){var n=E(t);return{stateVector:n[0].simulated.getStateVector(),expectationValue:M(n,e)}},e.prototype.getExpectationValueMap=function(t,e,n,r,a){if(r<0)throw new Error("QramanaComputeDriver#getExpectationValueMap: invalid steps");if(0===r)return[];var o=[];function u(r){var a=M(E(t,{position:n,param:r}),e);o.push({param:r,expectationValue:a})}u(0);for(var i=1;i<r;i+=1)u(i/(r-1)*a);return o},e.prototype.runShotTask=function(t,e){for(var n=Math.pow(2,t.size),r=new Array(n).fill(0),a=E(t),o=function(t){var e=a[0].simulated.clone().qubits.map((function(t){return t.measure()})),n=0;e.forEach((function(t,r){if(0!==t){var a=e.length-r-1;n+=Math.pow(2,a)}})),r[n]+=1},u=0;u<e;u+=1)o();return r},e}((function(){}));function E(t,e){var n=function(t){for(var e=[new q.xz({value:0})],n=1;n<t;n+=1){var r=new q.xz({value:0});e[0].simulated.mergeStateVector(r),e.push(r)}return e}(t.size);return t.circuit.forEach((function(t,r){t.forEach((function(t,a){if(t){var o=n[a];e&&r===e.position.step&&a===e.position.index?C({size:1,type:t.type,param:e.param},o,n):C(t,o,n)}}))})),n}function M(t,e){var n;n=l(e)?{observable:[{operators:[],coefficient:1}]}:e;var r=0;return n.observable.forEach((function(e){var n=t[0].simulated.clone().qubits,a=n[0].simulated.getStateVector();e.operators.forEach((function(t,e){t&&C({type:t,size:1},n[e],n)}));var o,u,i,c=(o=a,u=n[0].simulated.getStateVector(),i={re:0,im:0},o.forEach((function(t,e){var n,r;i=function(t,e){return{re:t.re+e.re,im:t.im+e.im}}((n={re:t.re,im:-1*t.im},r=u[e],{re:n.re*r.re-n.im*r.im,im:n.re*r.im+n.im*r.re}),i)})),i).re;r+=c*e.coefficient})),r}var T=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),A=function(t){function e(e){var n=t.call(this,e)||this;return n.computeDriver=new I,n}return T(e,t),e.prototype.validate=function(t){return n=(e=t).circuitInformation.size,r=0,a=0,e.circuitInformation.circuit.forEach((function(t){t&&(r=Math.max(r,t.length))})),e.observableInformation.observable.forEach((function(t){t&&t.operators&&(a=Math.max(a,t.operators.length))})),!(n<r||n<a);var e,n,r,a},e.prototype.update=function(t){if(!this.validate(t))return Promise.reject(new Error("invalid uiState"));this.uiState=t;var e,n,r=this.computeDriver.getStateVectorWithExpectationValue(t.circuitInformation,t.observableInformation),a=r.stateVector.map((function(t){return e=t,Math.sqrt(Math.pow(e.re,2)+Math.pow(e.im,2));var e}));return Promise.resolve({expectationValue:r.expectationValue,stateVector:r.stateVector,stateVectorAbsoluted:a,stateVectorArgument:r.stateVector.map((function(t){return e=t,Math.atan2(e.im,e.re)/Math.PI;var e})),probabilityVector:a.map((function(t){return Math.pow(t,2)})),codes:{translateCodes:(e=t.circuitInformation,n=t.observableInformation,{qulacs:y(e,n),qiskit:v(e,n),pennylane:d(e,n)}),circuitCodes:P(t.circuitInformation),observableCodes:Q(t.observableInformation)}})},e.prototype.requestParametricExpectedValues=function(t){if(!this.uiState)return Promise.reject(new Error("Need Circuit information before request expected values"));var e=this.computeDriver.getExpectationValueMap(this.uiState.circuitInformation,this.uiState.observableInformation,t.position,t.steps,this.parametricGateRange);return Promise.resolve({steps:t.steps,expectationValueMap:e})},e.prototype.startShot=function(t){if(!this.uiState)return Promise.reject(new Error("Need Circuit information before request start shots"));var e=this.computeDriver.runShotTask(this.uiState.circuitInformation,t.shot);return Promise.resolve({samplingMap:e})},e.prototype.textToCircuitInformation=function(t){return function(t){var e,n,r=(e=t.circuitType,n=t.text,"qasm2"===e?g(n):{isSucceeded:!1});return r.isSucceeded?Promise.resolve(r.circuit):Promise.reject()}(t)},e.prototype.textToObservableInformation=function(t){return function(t){var e,n,r=(e=t.observableType,n=t.text,"openFermion"===e?S(n):{isSucceeded:!1});return r.isSucceeded?Promise.resolve(r.observable):Promise.reject()}(t)},e}((function(t){var e;this.parametricGateRange=null!==(e=t.parametricGateRange)&&void 0!==e?e:2}));function P(t){return{qasm2:i(t)}}function Q(t){return{openFermion:b(t)}}})(),e.v=a})()}},function(t){t.O(0,[749,138,774,888,179],(function(){return e=8738,t(t.s=e);var e}));var e=t.O();_N_E=e}]);