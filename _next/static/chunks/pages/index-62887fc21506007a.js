(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{7587:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return ea}});var r=n(95235),a=n(2784),o=n(94106),i=n(52322),u=a.createContext(null),c=function(){return(0,a.useContext)(u)},s=function(t){var e=t.children,n=(0,a.useState)({isCodeViewTabOpened:!1}),r=n[0],o=n[1],c=(0,a.useMemo)((function(){return{appState:r,setAppState:o}}),[r]);return(0,i.jsx)(u.Provider,{value:c,children:e})},l=new(0,n(59186).v.BrowserUIClient)({parametricGateRange:2}),p=a.createContext(null),f=function(){return(0,a.useContext)(p)},m=function(t){var e=t.children;return(0,i.jsx)(p.Provider,{value:l,children:e})},d=n(79520),h=n(6897),b=n(62048),v=n(15923),y=n(25665),g=n(69825),O=n(28367),_=n(10713),x=n.n(_);function j(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function w(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?j(Object(n),!0).forEach((function(e){(0,r.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var q=(0,v.ZP)(b.Z)({color:"#fff"}),S=function(){var t=c().setAppState,e=(0,a.useCallback)((function(){t((function(t){return w(w({},t),{},{isCodeViewTabOpened:!0})}))}),[t]);return(0,i.jsx)(h.Z,{position:"static",children:(0,i.jsxs)(y.Z,{variant:"dense",children:[(0,i.jsx)("div",{className:x().heading,children:(0,i.jsx)(g.Z,{variant:"h6",noWrap:!0,children:"Qulacs Simulator"})}),(0,i.jsxs)(q,{onClick:e,children:[(0,i.jsx)(O.Z,{}),(0,i.jsx)(g.Z,{variant:"overline",children:"code"})]})]})})},R=n(92096),C=function(t,e){return Math.round(t*Math.pow(10,e))/Math.pow(10,e)},M=function(t,e){return"0000".concat(t.toString(2)).slice(-e)},E=n(18205),P=n(80739),k=n(55484),T=n(25556),Z=n(81224),Q=n(3131),D=n(47857),I=n(24908),N=n(11011),G=n(6884),V=n.n(G),A=function(t){var e,n=t.active,r=t.payload;if(n&&null!=r&&r.length>0){var a=r[0].payload;return(0,i.jsxs)("div",{className:V().tooltipWrapper,children:[(0,i.jsx)("p",{className:V().tooltipLabel,children:a.name}),(0,i.jsxs)("div",{className:V().tooltipValue,children:[(0,i.jsx)("p",{className:V().tooltipLabel,children:"stateVectorAbsoluted: ".concat(a.stateVectorAbsoluted)}),(0,i.jsx)("p",{className:V().tooltipLabel,children:"stateVectorArgument: ".concat(a.stateVectorArgument)}),(0,i.jsx)("p",{className:V().tooltipLabel,children:"stateVector: ".concat(a.stateVector.re).concat((e=a.stateVector.im,e>=0?"+".concat(e):e),"i")})]})]})}return null},L=function(t){var e=t.data;return(0,i.jsx)(E.h,{width:"100%",height:"100%",children:(0,i.jsxs)(P.v,{data:e,children:[(0,i.jsx)(k.q,{strokeDasharray:"3 3"}),(0,i.jsx)(T.K,{dataKey:"name",children:(0,i.jsx)(Z._,{value:"Computational basis states",offset:0,position:"insideBottom"})}),(0,i.jsx)(Q.B,{domain:[0,1],children:(0,i.jsx)(Z._,{value:"Amplitude Value",angle:-90,position:"insideBottomLeft"})}),(0,i.jsx)(D.u,{content:(0,i.jsx)(A,{})}),(0,i.jsx)(I.$,{dataKey:"stateVectorAbsoluted",children:e.map((function(t){var e,n=t.name,r=t.stateVectorArgument;return(0,i.jsx)(N.b,{fill:(e=r,"hsl(".concat(180*e,", 100%, 70%)"))},"cell-".concat(n))}))})]})})},B=function(t,e){return t.updateResult===e.updateResult},z=a.memo((function(t){var e=t.updateResult,n=(0,a.useMemo)((function(){for(var t=[],n=0;n<e.stateVectorAbsoluted.length;n+=1)t.push({name:M(n,5),stateVector:{re:C(e.stateVector[n].re,5),im:C(e.stateVector[n].im,5)},stateVectorAbsoluted:C(e.stateVectorAbsoluted[n],5),stateVectorArgument:C(e.stateVectorArgument[n],5)});return t}),[e]);return(0,i.jsx)(L,{data:n})}),B),Y=n(8529),F=n(90734),X=n.n(F),U=n(94764);function W(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function H(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?W(Object(n),!0).forEach((function(e){(0,r.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var K={EMPTY:{type:"empty",size:1}},J={CONTROL_QUBIT:{type:"control_qubit",connectedMultiGate:{type:"cnot",position:[0,0]},size:1},EMPTY_CONTROL_QUBIT:{type:"empty_control_qubit",size:1,inRange:!1}},$={X:{type:"x",size:1},Y:{type:"y",size:1},Z:{type:"z",size:1}},tt=H(H({},$),{},{H:{type:"h",size:1},T:{type:"t",size:1},S:{type:"s",size:1}}),et={RX:{type:"rx",param:0,size:1},RY:{type:"ry",param:0,size:1},RZ:{type:"rz",param:0,size:1}},nt={CNOT:{type:"cnot",controllQubitIndex:[0],size:2},CCNOT:{type:"ccnot",controllQubitIndex:[0],size:3}},rt=H(H({},K),$),at=H(H(H(H(H(H({},K),{UNAVAILABLE:{type:"unavailable",size:1}}),J),tt),et),nt);function ot(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function it(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ot(Object(n),!0).forEach((function(e){(0,r.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ot(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var ut,ct,st=function(t){return"empty"===t.type||"unavailable"===t.type},lt=function(t){return"rx"===t.type||"ry"===t.type||"rz"===t.type},pt=function(t){return"cnot"===t.type||"ccnot"===t.type},ft=function(t){return!st(t.item)&&"control_qubit"!==t.item.type&&"empty_control_qubit"!==t.item.type},mt=function(t){return{item:t,id:(0,U.x0)()}},dt=function(t,e){var n="cnot"===t?at.CNOT:at.CCNOT;return mt(it(it({},n),{},{controllQubitIndex:e}))},ht=function(t){var e=t.inRange;return mt(it(it({},J.EMPTY_CONTROL_QUBIT),{},{inRange:e}))},bt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;return new Array(t).fill("").map((function(){return mt(at.EMPTY)}))},vt="circuitInformation",yt="observableInformation",gt="selectedParametricQuantumGatePosition",Ot=(ut={},(0,r.Z)(ut,vt,{gateItems:[bt()]}),(0,r.Z)(ut,yt,{coefficients:[0],gateItems:[bt()]}),(0,r.Z)(ut,gt,null),ut),_t="updateResult",xt="shotResult",jt="parametricExpectedValueResult",wt=(ct={},(0,r.Z)(ct,_t,{expectationValue:0,stateVector:[],stateVectorAbsoluted:[],stateVectorArgument:[],probabilityVector:[],translateCode:""}),(0,r.Z)(ct,xt,{samplingMap:[]}),(0,r.Z)(ct,jt,{steps:10,expectationValueMap:[]}),ct),qt=n(60995),St=n(36197),Rt=n(30840),Ct=n(63004),Mt=function(t){var e=t.data,n=t.onRequestChangeParam,r=(0,a.useMemo)((function(){var t;return null===(t=e.find((function(t){return null!=t.currentExpectationValue})))||void 0===t?void 0:t.param}),[e]),o=(0,a.useMemo)((function(){return e.length>0?["auto","auto"]:[0,1]}),[e.length]),u=(0,a.useCallback)((function(t,e){var r=e.payload;null!=(null===r||void 0===r?void 0:r.param)&&n(r.param)}),[n]);return(0,i.jsx)(E.h,{width:"100%",height:"100%",children:(0,i.jsxs)(qt.c,{data:e,children:[(0,i.jsx)(k.q,{strokeDasharray:"3 3"}),(0,i.jsx)(T.K,{dataKey:"param",domain:[0,2],unit:"\u03c0",type:"number",children:(0,i.jsx)(Z._,{value:"Angle",offset:0,position:"insideBottom"})}),(0,i.jsx)(Q.B,{domain:o,children:(0,i.jsx)(Z._,{value:"Expectation Value",angle:-90,position:"insideBottomLeft"})}),(0,i.jsx)(D.u,{}),(0,i.jsx)(St.b,{dataKey:"currentExpectationValue",fill:"#ff7300"}),null!=r&&(0,i.jsx)(Rt.d,{x:r,stroke:"#ff7300"}),(0,i.jsx)(Ct.x,{dataKey:"expectationValue",type:"monotone",dot:!1,activeDot:{onClick:u,r:5}})]})})};function Et(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Pt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Et(Object(n),!0).forEach((function(e){(0,r.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Et(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var kt=function(t,e){return t.currentExpectationValue===e.currentExpectationValue&&t.parametricExpectedValueResult===e.parametricExpectedValueResult},Tt=a.memo((function(t){var e=t.currentExpectationValue,n=t.parametricExpectedValueResult,r=(0,o.Gc)(),u=r.getValues,c=r.setValue,s=(0,a.useMemo)((function(){for(var t=[],r=n.expectationValueMap,a=u([vt,gt]),o=function(t,e,n){if(null==e)return null;var r=(0,Y.Z)(e,2),a=r[0],o=r[1],i=t.gateItems[o][a].item;if(!lt(i))return null;var u=C(n,5);return{param:i.param,expectationValue:u,currentExpectationValue:u}}(a.circuitInformation,a.selectedParametricQuantumGatePosition,e),i=0;i<r.length;i+=1){var c=r[i],s=c.param,l=c.expectationValue;t.push({param:s,expectationValue:C(l,5)}),null!=o&&(s===o.param?t[t.length-1].currentExpectationValue=o.currentExpectationValue:i<r.length-1&&X()(o.param,s,r[i+1].param)&&t.push(o))}return t}),[e,n,u]),l=(0,a.useCallback)((function(t){var e=u([vt,gt]),n=e.circuitInformation,r=e.selectedParametricQuantumGatePosition;if(null!=r){var a=n.gateItems.slice(),o=(0,Y.Z)(r,2),i=o[0],s=o[1],l=a[s][i].item;lt(l)&&(a[s].splice(i,1,mt(Pt(Pt({},l),{},{param:t}))),c(vt,{gateItems:a}))}}),[u,c]);return(0,i.jsx)(Mt,{data:s,onRequestChangeParam:l})}),kt),Zt=function(t){var e=t.data,n=t.scale,r=void 0===n?"auto":n;return(0,i.jsx)(E.h,{width:"100%",height:240,children:(0,i.jsxs)(qt.c,{data:e,children:[(0,i.jsx)(k.q,{strokeDasharray:"3 3"}),(0,i.jsx)(T.K,{dataKey:"name",children:(0,i.jsx)(Z._,{value:"Computational basis states",offset:0,position:"insideBottom"})}),(0,i.jsx)(Q.B,{yAxisId:"1",domain:["auto","auto"],scale:r,children:(0,i.jsx)(Z._,{value:"Probability Value",angle:-90,position:"insideBottomLeft"})}),(0,i.jsx)(Q.B,{yAxisId:"2",orientation:"right",hide:!0}),(0,i.jsx)(D.u,{}),(0,i.jsx)(I.$,{dataKey:"samplingMap",yAxisId:"2",fill:"#82ca9d",fillOpacity:"0.4"}),(0,i.jsx)(Ct.x,{type:"linear",dataKey:"probabilityVector",yAxisId:"1",dot:!1})]})})},Qt=n(20406),Dt=n(28526),It=n.n(Dt),Nt=n(17952),Gt=n(82269),Vt=n(13185),At=n.n(Vt),Lt=function(t){var e=t.coefficients;return{observable:t.gateItems.map((function(t,n){return{operators:t.map((function(t){return ft(t)?t.item.type:void 0})),coefficient:e[n]}}))}},Bt=function(t){return{circuitInformation:(e=t.circuitInformation,{circuit:e.gateItems.map((function(t){return t.map((function(t){return ft(t)?t.item:void 0}))})).filter((function(t){return t.some((function(t){return void 0!==t}))})),size:5}),observableInformation:Lt(t.observableInformation)};var e},zt=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:51,n=(0,Y.Z)(t,2),r=n[0],a=n[1];return{steps:e,position:{step:a,index:r}}},Yt=function(t,e){var n=(0,Y.Z)(t,2),r=n[0],a=n[1],o=(0,Y.Z)(e,2),i=o[0],u=o[1];return r===i&&a===u},Ft=["selectedParametricQuantumGatePosition"];function Xt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ut(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Xt(Object(n),!0).forEach((function(e){(0,r.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Xt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Wt=[-1,-1],Ht=a.createContext(null),Kt=function(){return(0,a.useContext)(Ht)},Jt=function(t){var e=t.children,n=function(){var t=(0,d.Ds)().enqueueSnackbar,e=(0,a.useState)(!1),n=e[0],r=e[1],i=(0,a.useState)(!1),u=i[0],c=i[1],s=(0,a.useState)(wt),l=s[0],p=s[1],m=f(),h=(0,(0,o.Gc)().watch)([vt,yt,gt]),b=h.selectedParametricQuantumGatePosition,v=(0,Gt.Z)(h,Ft),y=(0,a.useRef)(),g=(0,a.useRef)(Wt);return(0,a.useEffect)((function(){var e=function(){var e=(0,Qt.Z)(It().mark((function e(n,a){var o,i,u,s,l;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r(!0),c(!1),e.next=5,m.update(Bt(n));case 5:if(i=e.sent,null==a){e.next=12;break}if("rx"!==(l=null===(u=n.circuitInformation.gateItems[a[1]])||void 0===u||null===(s=u[a[0]])||void 0===s?void 0:s.item.type)&&"ry"!==l&&"rz"!==l){e.next=12;break}return e.next=11,m.requestParametricExpectedValues(zt(a));case 11:o=e.sent;case 12:y.current=n,p((function(t){var e;return Ut(Ut({},t),{},{parametricExpectedValueResult:null!==(e=o)&&void 0!==e?e:t.parametricExpectedValueResult,updateResult:i})})),e.next=21;break;case 16:e.prev=16,e.t0=e.catch(0),console.error(e.t0),t("Failed fetching data.",{variant:"error"}),c(!0);case 21:return e.prev=21,r(!1),e.finish(21);case 24:case"end":return e.stop()}}),e,null,[[0,16,21,24]])})));return function(t,n){return e.apply(this,arguments)}}();n||At()(v,y.current)&&(null==b||Yt(b,g.current))||e(v,b)}),[v.circuitInformation,v.observableInformation,b]),(0,a.useEffect)((function(){g.current=null!==b&&void 0!==b?b:Wt}),[b]),{simulatorResult:l,setSimulatorResult:p,isLoading:n,isError:u}}(),r=n.simulatorResult,u=n.setSimulatorResult,c=n.isLoading,s=(0,a.useMemo)((function(){return{simulatorResult:r,setSimulatorResult:u,isLoading:c}}),[r,u,c]);return(0,i.jsx)(Ht.Provider,{value:s,children:e})},$t=n(30790),te=n.n($t);function ee(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ne(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ee(Object(n),!0).forEach((function(e){(0,r.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ee(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var re=1e3,ae=(0,v.ZP)(g.Z)({marginRight:"5px"}),oe=(0,v.ZP)(Nt.Z)({width:"60px"}),ie=(0,v.ZP)(b.Z)({marginLeft:"10px"}),ue=function(){var t=f(),e=Kt().setSimulatorResult,n=(0,a.useState)(!1),r=n[0],o=n[1],u=(0,a.useState)(0),c=u[0],s=u[1],l=(0,a.useMemo)((function(){return"number"!==typeof c||r}),[c,r]),p=(0,a.useCallback)((function(t){var e=t.target.value;s(""===e?"":parseInt(e,10))}),[]),m=(0,a.useCallback)((0,Qt.Z)(It().mark((function n(){var r;return It().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,"number"===typeof c){n.next=3;break}return n.abrupt("return");case 3:return o(!0),n.next=6,t.startShot({shot:c});case 6:r=n.sent,e((function(t){return ne(ne({},t),{},{shotResult:r})})),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(0),console.error(n.t0);case 13:return n.prev=13,o(!1),n.finish(13);case 16:case"end":return n.stop()}}),n,null,[[0,10,13,16]])}))),[c,t,e]),d=(0,a.useCallback)((function(){"number"!==typeof c||c<0?s(0):c>re&&s(re)}),[c]);return(0,i.jsxs)("div",{className:te().wrapper,children:[(0,i.jsx)(ae,{variant:"caption",children:"Sampling Count:"}),(0,i.jsx)(oe,{value:c,onChange:p,onBlur:d,inputProps:{min:0,max:re,step:1,type:"number"}}),(0,i.jsx)(ie,{variant:"outlined",color:"primary",disabled:l,onClick:m,children:"Run"})]})},ce=n(88110),se=n(11782),le=(0,v.ZP)(g.Z)({marginRight:"5px"}),pe=function(t,e){return t.value===e.value},fe=a.memo((function(t){var e=t.value,n=t.onChange,r=(0,a.useCallback)((function(t){var e=t.target.value;(function(t){return"string"===typeof t})(e)&&n(e)}),[n]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(le,{variant:"caption",children:"Scale:"}),(0,i.jsxs)(se.Z,{variant:"standard",value:e,onChange:r,children:[(0,i.jsx)(ce.Z,{value:"auto",children:"Auto"}),(0,i.jsx)(ce.Z,{value:"log",children:"Log"})]})]})}),pe),me=n(95533),de=n.n(me),he=function(t){var e=t.data,n=(0,a.useState)("auto"),r=n[0],o=n[1];return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Zt,{data:e,scale:r}),(0,i.jsxs)("div",{className:de().control,children:[(0,i.jsx)(fe,{value:r,onChange:o}),(0,i.jsx)(ue,{})]})]})},be=function(t,e){return t.updateResult===e.updateResult&&t.shotResult===e.shotResult},ve=a.memo((function(t){var e=t.updateResult,n=t.shotResult,r=(0,a.useMemo)((function(){for(var t=[],r=0;r<e.stateVectorAbsoluted.length;r+=1)t.push({name:M(r,5),probabilityVector:C(e.probabilityVector[r],5),samplingMap:n.samplingMap[r]});return t}),[e,n]);return(0,i.jsx)(he,{data:r})}),be),ye=n(69350),ge=n.n(ye),Oe=(0,v.ZP)(R.Z)({height:"100%",padding:"8px 15px",overflowY:"auto"}),_e=function(){var t=Kt().simulatorResult,e=t.updateResult,n=t.parametricExpectedValueResult,r=t.shotResult;return(0,i.jsxs)("div",{className:ge().wrapper,children:[(0,i.jsx)("div",{className:ge().tab,children:(0,i.jsx)(Oe,{variant:"outlined",children:(0,i.jsx)(z,{updateResult:e})})}),(0,i.jsx)("div",{className:ge().tab,children:(0,i.jsx)(Oe,{variant:"outlined",children:(0,i.jsx)(ve,{updateResult:e,shotResult:r})})}),(0,i.jsx)("div",{className:ge().tab,children:(0,i.jsx)(Oe,{variant:"outlined",children:(0,i.jsx)(Tt,{currentExpectationValue:e.expectationValue,parametricExpectedValueResult:n})})})]})},xe=n(13091),je=n(63898),we=n(53712),qe=n.n(we),Se=(n(71109),n(90389),n(65622),n(17559),function(t){var e=t.code;return(0,a.useEffect)((function(){qe().highlightAll()}),[e]),(0,i.jsx)("pre",{className:"line-numbers",children:(0,i.jsx)("code",{className:"language-python","data-prismjs-copy":"copy",children:e})})}),Re=(0,je.Z)({paper:{backgroundColor:"#272822"}})(xe.Z),Ce=function(t,e){return t.isOpened===e.isOpened},Me=a.memo((function(t){var e=t.isOpened,n=t.translateCode,r=t.onRequestClose;return(0,i.jsx)(Re,{onClose:r,open:e,children:(0,i.jsx)(Se,{code:n})})}),Ce);function Ee(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Pe(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ee(Object(n),!0).forEach((function(e){(0,r.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ee(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var ke=function(){var t=c(),e=t.appState,n=t.setAppState,r=Kt().simulatorResult.updateResult,o=(0,a.useCallback)((function(){n((function(t){return Pe(Pe({},t),{},{isCodeViewTabOpened:!1})}))}),[n]);return(0,i.jsx)(Me,{isOpened:e.isCodeViewTabOpened,translateCode:r.translateCode,onRequestClose:o})},Te=n(72779),Ze=n.n(Te),Qe=function(t){var e,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{async:!0,onLoad:null};if(null==document.querySelector('script[src="'.concat(t,'"]'))){var a=document,o=a.head,i=document.createElement("script");i.src=t,i.async=null===(e=r.async)||void 0===e||e,i.onload=null!==(n=r.onLoad)&&void 0!==n?n:null,o.appendChild(i)}},De=function(t,e){return t.coefficients===e.coefficients&&t.itemMatrix===e.itemMatrix},Ie=a.memo((function(t){var e=t.coefficients,n=t.itemMatrix,r=(0,a.useState)(!1),o=r[0],u=r[1],c=(0,a.useRef)(null),s=(0,a.useMemo)((function(){return n.map((function(t,n){var r=e[n],a=t.reduce((function(t,e,n){return"empty"!==e.item.type&&t.push("".concat(e.item.type.toUpperCase(),"_").concat(n)),t}),[]);return 0===a.length||0===r?"":"".concat(function(t,e){return t<0?"-":0===e?"":"+"}(r,n)).concat(Math.abs(r)).concat(a.join(""))})).join("")}),[e,n]);return(0,a.useEffect)((function(){(function(){var t=(0,Qt.Z)(It().mark((function t(){return It().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!o||null==window.MathJax||null==c.current){t.next=3;break}return t.next=3,window.MathJax.typesetPromise([c.current]);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[s,o]),(0,a.useEffect)((function(){(function(){var t=(0,Qt.Z)(It().mark((function t(){return It().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Qe("https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js",{onLoad:function(){u(!0)}});case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[]),(0,i.jsx)("div",{ref:c,children:"$H=".concat(s,"$")})}),De),Ne="draggable_quantum_gate",Ge="droppabble_quantum_gate",Ve="draggable_observable_gate",Ae="droppable_observable_gate",Le="draggable_control_qubit_gate",Be=n(41699),ze=n(93553),Ye="#2196f3",Fe="#e91e63",Xe="#673ab7",Ue=n(56720),We=n.n(Ue),He=(0,v.ZP)(g.Z)({fontSize:"1rem"}),Ke=a.forwardRef((function(t,e){var n,o=t.gateType,u=t.isDragging,c=t.canDrag,s=void 0===c||c,l=t.color,p=void 0===l?Ye:l,f=t.parametricValue,m=(0,a.useMemo)((function(){return"cnot"===o||"ccnot"===o}),[o]),d=(0,a.useMemo)((function(){return null!=f?"(".concat(f,")"):null}),[f]),h=(0,a.useMemo)((function(){return"control_qubit"===o?null:m?s?(0,i.jsx)(He,{children:o.toUpperCase()}):(0,i.jsx)(ze.Z,{}):(0,i.jsx)(g.Z,{children:o.toUpperCase()})}),[o,s,m]);return(0,i.jsxs)("div",{className:Ze()(We().wrapper,(n={},(0,r.Z)(n,We().canDrag,s),(0,r.Z)(n,We().isDragging,u),(0,r.Z)(n,We().multiGate,!s&&m),(0,r.Z)(n,We().controlQubitGate,"control_qubit"===o),n)),style:{backgroundColor:p},ref:e,children:[h,null!=f&&(0,i.jsx)("div",{className:We().parametricValue,children:d})]})})),Je=n(41755),$e=n.n(Je),tn=function(t){var e=t.gate,n=t.type,r=t.color,o=function(t){var e=t.gate,n=t.type,r=(0,a.useRef)(null),o=(0,Be.c)({item:{gate:e,type:n},collect:function(t){return{isDragging:t.isDragging()}}}),i=(0,Y.Z)(o,2),u=i[0].isDragging;return(0,i[1])(r),{ref:r,isDragging:u}}({gate:e,type:n}),u=o.ref,c=o.isDragging;return(0,i.jsx)("div",{className:$e().wrapper,children:(0,i.jsx)(Ke,{ref:u,gateType:e.type,color:r,isDragging:c})})},en=n(33502),nn=n.n(en),rn=function(){return(0,i.jsx)("div",{className:nn().wrapper,children:Object.values($).map((function(t){return(0,i.jsx)("div",{className:nn().item,children:(0,i.jsx)(tn,{gate:t,type:Ve})},t.type)}))})},an=n(62840),on=n.n(an);function un(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function cn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?un(Object(n),!0).forEach((function(e){(0,r.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):un(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var sn=[1,2,3,4,5],ln=function(t,e){return t.columnLength===e.columnLength},pn=a.memo((function(t){var e=t.columnLength;return(0,i.jsx)(i.Fragment,{children:sn.map((function(t){var n={gridRow:t};return(0,i.jsxs)(a.Fragment,{children:[(0,i.jsx)("div",{className:on().label,style:n,children:(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{children:"q"}),(0,i.jsx)("span",{className:on().labelIndex,children:t-1})]})}),(0,i.jsx)("div",{className:on().line,style:cn(cn({},n),{},{gridColumn:"2 / ".concat(2+e)}),"aria-hidden":"true"})]},t)}))})}),ln);function fn(t){throw new Error('"'.concat(t,'" is Unexpected value. Should have been never.'))}function mn(t,e){if(null==t){var n=null!==e&&void 0!==e?e:"Expected 'value' to be defined, but received ".concat(t);throw new Error(n)}}var dn=n(94345),hn=(0,v.ZP)(dn.Z)({width:"100%",height:"100%",border:"1px dotted #999",color:"#999"}),bn=function(t){var e=t.onClick;return(0,i.jsx)(hn,{onClick:e,children:(0,i.jsx)(ze.Z,{})})},vn=n(73510),yn=n.n(vn),gn=n(52746),On=n(65954),_n=n(35635),xn=n(40436),jn=n.n(xn),wn={x:null,y:null},qn=function(t){var e=t.menuItems,n=t.children,r=(0,a.useState)(wn),o=r[0],u=r[1],c=(0,a.useCallback)((function(t){t.preventDefault(),u({x:t.clientX-2,y:t.clientY-4})}),[]),s=(0,a.useCallback)((function(){u(wn)}),[]),l=(0,a.useCallback)((function(t){return function(e){t(e),s()}}),[s]);return(0,i.jsxs)("div",{className:jn().wrapper,onContextMenu:c,children:[n,(0,i.jsx)(_n.Z,{keepMounted:!0,open:null!=o.y,onClose:s,anchorReference:"anchorPosition",anchorPosition:null!=o.y&&null!=o.x?{top:o.y,left:o.x}:void 0,children:e.map((function(t){var e=t.text,n=t.onClick;return(0,i.jsx)(ce.Z,{onClick:l(n),children:e},e)}))})]})},Sn=function(t){var e=t.gate,n=t.position,r=t.type,o=t.color,u=t.menuItems,c=void 0===u?[]:u,s=t.onRequestMoveGate,l=t.onRequestRemoveGate,p=function(t){var e=t.accept,n=t.gate,r=t.position,o=t.type,i=t.onDrop,u=(0,a.useRef)(null),c=(0,On.L)({accept:e,drop:i}),s=(0,Y.Z)(c,2)[1],l=(0,Be.c)({item:{gate:n,position:r,type:o},collect:function(t){return{isDragging:t.isDragging()}}}),p=(0,Y.Z)(l,2),f=p[0].isDragging;return(0,p[1])(s(u)),{ref:u,isDragging:f}}({gate:e,position:n,type:r,accept:[r],onDrop:function(t){switch(t.type){case"droppabble_quantum_gate":case"droppable_observable_gate":s(t,n);break;default:fn(t.type)}}}),f=p.ref,m=p.isDragging,d=(0,a.useMemo)((function(){return function(t){return"rx"===t.type||"ry"===t.type||"rz"===t.type}(e)?e.param:void 0}),[e]),h=(0,a.useCallback)((function(t){t.stopPropagation(),l(e,n)}),[e,n,l]),b=(0,a.useMemo)((function(){return[].concat((0,gn.Z)(c),[{text:"Delete Gate",onClick:h}])}),[c,h]);return(0,i.jsx)(qn,{menuItems:b,children:(0,i.jsx)(Ke,{ref:f,gateType:e.type,color:o,isDragging:m,parametricValue:d})})},Rn=n(99643),Cn=n.n(Rn),Mn=function(t){var e,n=t.position,o=t.onRequestAddGate,u=t.onRequestMoveGate,c=(0,On.L)({accept:[Ve,Ae],drop:function(t){switch(t.type){case"droppable_observable_gate":u(t,n);break;case"draggable_observable_gate":o(t,n);break;default:fn(t.type)}},collect:function(t){return{isOver:t.isOver(),canDrop:t.canDrop()}}}),s=(0,Y.Z)(c,2),l=s[0],p=l.isOver,f=l.canDrop,m=s[1],d=(0,a.useMemo)((function(){return p&&f}),[p,f]);return(0,i.jsx)("div",{ref:m,className:Ze()(Cn().wrapper,(e={},(0,r.Z)(e,Cn().isActive,d),(0,r.Z)(e,Cn().canDrop,!d&&f),e))})},En=function(t){var e=t.gate,n=t.position,r=t.onRequestAddGate,o=t.onRequestMoveGate,u=t.onRequestRemoveGate,c=(0,a.useMemo)((function(){switch(e.type){case"empty":return(0,i.jsx)(Mn,{position:n,onRequestAddGate:r,onRequestMoveGate:o});case"x":case"y":case"z":return(0,i.jsx)(Sn,{gate:e,position:n,type:Ae,onRequestMoveGate:o,onRequestRemoveGate:u});default:return fn(e)}}),[e,n,r,o,u]);return(0,i.jsx)(i.Fragment,{children:c})};function Pn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function kn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Pn(Object(n),!0).forEach((function(e){(0,r.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Pn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Tn=function(t,e){return{gridRow:t+1,gridColumn:e+1}},Zn=function(t,e){return t.itemMatrix===e.itemMatrix},Qn=a.memo((function(t){var e=t.itemMatrix,n=t.onRequestAddColumn,r=(0,o.Gc)(),u=r.getValues,c=r.setValue,s=(0,a.useCallback)((function(t,e){var n=(0,Y.Z)(e,2),r=n[0],a=n[1],o=u(yt),i=o.gateItems.slice();i[a].splice(r,1,mt(t.gate)),c(yt,kn(kn({},o),{},{gateItems:i}))}),[]),l=(0,a.useCallback)((function(t,e){var n=t.position;mn(n);var r=(0,Y.Z)(n,2),a=r[0],o=r[1],i=(0,Y.Z)(e,2),s=i[0],l=i[1],p=u(yt),f=p.gateItems.slice(),m=[f[l][s],f[o][a]];f[o][a]=m[0],f[l][s]=m[1],c(yt,kn(kn({},p),{},{gateItems:f}))}),[]),p=(0,a.useCallback)((function(t,e){var n=(0,Y.Z)(e,2),r=n[0],a=n[1],o=u(yt),i=o.gateItems.slice();i[a].splice(r,1,mt(rt.EMPTY)),c(yt,kn(kn({},o),{},{gateItems:i}))}),[]);return(0,i.jsxs)("div",{className:yn().wrapper,children:[(0,i.jsx)(pn,{columnLength:e.length}),e.map((function(t,e){return(0,i.jsx)(a.Fragment,{children:t.map((function(t,n){return(0,i.jsx)("div",{className:yn().gateCell,style:Tn(n,e+1),children:(0,i.jsx)(En,{gate:t.item,position:[n,e],onRequestAddGate:s,onRequestMoveGate:l,onRequestRemoveGate:p})},t.id)}))},e)})),(0,i.jsx)("div",{className:Ze()(yn().gateCell,yn().addGateColumnButtonWrapper),style:{gridColumn:e.length+2},children:(0,i.jsx)(bn,{onClick:n})})]})}),Zn),Dn=n(48760),In=["value","onChange"];function Nn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}var Gn=function(t,e){return t.value===e.value},Vn=a.memo((function(t){var e=t.value,n=t.onChange,o=(0,Gt.Z)(t,In),u=(0,a.useState)(e),c=u[0],s=u[1],l=(0,a.useState)(0),p=l[0],f=l[1],m=(0,a.useCallback)((function(t){var e=t.currentTarget.value;s(""===e?"":parseFloat(e))}),[]),d=(0,a.useCallback)((function(){"number"!==typeof c&&s(0)}),[c]);return(0,Dn.Z)((function(){f(c)}),1e3,[c]),(0,a.useEffect)((function(){"number"===typeof p&&n(p)}),[p,n]),(0,i.jsx)(Nt.Z,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Nn(Object(n),!0).forEach((function(e){(0,r.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Nn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({value:c,onChange:m,onBlur:d},o))}),Gn),An=n(70865),Ln=n.n(An),Bn=function(t,e){return t.coefficients.length===e.coefficients.length},zn=a.memo((function(t){var e=t.coefficients,n=t.onChange,r=(0,a.useCallback)((function(t){return function(e){n(t,e)}}),[n]);return(0,i.jsx)("div",{className:Ln().wrapper,children:e.map((function(t,e){return(0,i.jsx)("div",{className:Ln().item,children:(0,i.jsx)(Vn,{type:"number",value:t,inputProps:{step:"0.01"},onChange:r(e),fullWidth:!0})},e)}))})}),Bn);function Yn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Fn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Yn(Object(n),!0).forEach((function(e){(0,r.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Yn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Xn=function(){var t=(0,o.Gc)(),e=t.watch,n=t.setValue,r=t.getValues,u=e([yt]).observableInformation,c=u.coefficients,s=u.gateItems,l=(0,a.useCallback)((function(t,e){var a=r(yt),o=a.coefficients.slice();o.splice(t,1,e),n(yt,Fn(Fn({},a),{},{coefficients:o}))}),[]),p=(0,a.useCallback)((function(){var t=r(yt),e=t.coefficients.slice(),a=t.gateItems.slice();e.push(0),a.push(bt()),n(yt,{coefficients:e,gateItems:a})}),[]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(g.Z,{variant:"overline",children:"Observable"}),(0,i.jsx)(rn,{}),(0,i.jsx)(zn,{coefficients:c,onChange:l}),(0,i.jsx)(Qn,{itemMatrix:s,onRequestAddColumn:p}),(0,i.jsx)(Ie,{coefficients:c,itemMatrix:s})]})},Un=n(46983),Wn=n.n(Un),Hn=function(){return(0,i.jsxs)("div",{className:Wn().wrapper,children:[Object.values(tt).map((function(t){return(0,i.jsx)("div",{className:Wn().item,children:(0,i.jsx)(tn,{gate:t,type:Ne})},t.type)})),Object.values(et).map((function(t){return(0,i.jsx)("div",{className:Wn().item,children:(0,i.jsx)(tn,{gate:t,color:Fe,type:Ne})},t.type)})),Object.values(nt).map((function(t){return(0,i.jsx)("div",{className:Wn().item,children:(0,i.jsx)(tn,{gate:t,color:Xe,type:Ne})},t.type)}))]})},Kn=function(t,e,n){var r=t,a=(0,Y.Z)(e,2),o=a[0],i=a[1],u=(0,Y.Z)(n,2),c=u[0],s=u[1],l=[r[c][s],r[o][i]];return r[o][i]=l[0],r[c][s]=l[1],r},Jn=function(t){for(var e=[],n=0;n<t.length;n+=1)for(var r=t[n],a=0;a<r.length;a+=1)0===n&&(e[a]=[]),e[a][n]=r[a];return e},$n=function(t){for(var e=[],n=[],r=0;r<t.length;r+=1){var a=t[r];a.some((function(t){var e=t.item;return!st(e)&&"empty_control_qubit"!==e.type}))&&n.push(a)}0===n.length&&n.push(bt());for(var o=n[n.length-1].some((function(t){return!st(t.item)})),i=Jn(n),u=0;u<i.length;u+=1){var c=i[u],s=[].concat((0,gn.Z)(c),(0,gn.Z)(o?[mt(at.EMPTY)]:[])).reduceRight((function(t,e,n,r){var a,o=null===(a=r[n-1])||void 0===a?void 0:a.item;if(null!=o)if("unavailable"===e.item.type){if("empty_control_qubit"===o.type&&o.inRange)return t.push(mt(at.EMPTY)),t;if(!st(o)&&"empty_control_qubit"!==o.type)return t.push(mt(at.EMPTY)),t}else if("empty"===e.item.type&&("empty"===o.type||"unavailable"===o.type||"empty_control_qubit"===o.type&&!o.inRange))return t.push(mt(at.UNAVAILABLE)),t;return t.push(e),t}),[]).reverse();e.push(s)}return Jn(e)},tr=n(96258),er=n.n(tr),nr=function(t){var e=t.gate,n=t.position,r=t.onRequestRemoveGate,o=(0,a.useCallback)((function(){r(e,n)}),[e,n,r]),u=(0,a.useMemo)((function(){return[{text:"Delete Gate",onClick:o}]}),[o]);return(0,i.jsx)(qn,{menuItems:u,children:(0,i.jsx)(Ke,{gateType:e.type,color:Xe,isDragging:!1,canDrag:!1})})},rr=n(9225),ar=n.n(rr),or=function(t){var e=t.gate,n=t.position,u=t.onRequestMoveGate,c=t.onRequestRemoveGate,s=Zr(),l=(0,o.Gc)(),p=l.watch,f=l.setValue,m=p([gt]).selectedParametricQuantumGatePosition,d=(0,a.useMemo)((function(){return null!=m&&Yt(n,m)}),[n,m]),h=(0,a.useMemo)((function(){return[{text:"Edit Gate",onClick:function(t){t.stopPropagation(),s(e,n)}}]}),[s,e,n]),b=(0,a.useCallback)((function(){f(gt,n)}),[n,f]),v=(0,a.useCallback)((function(){f(gt,null),u.apply(void 0,arguments)}),[u,f]),y=(0,a.useCallback)((function(t,e){f(gt,null),c(t,e)}),[c,f]);return(0,i.jsx)("div",{className:Ze()(ar().wrapper,(0,r.Z)({},ar().isSelected,d)),role:"button",tabIndex:-1,onClick:b,children:(0,i.jsx)(Sn,{gate:e,position:n,type:Ge,color:Fe,menuItems:h,onRequestMoveGate:v,onRequestRemoveGate:y})})},ir=n(33291),ur=n.n(ir),cr=function(t){var e,n=t.position,o=t.onRequestAddGate,u=(0,On.L)({accept:[Ne],drop:function(t){switch(t.type){case"draggable_quantum_gate":o(t,n);break;default:fn(t.type)}},collect:function(t){return{isOver:t.isOver(),canDrop:t.canDrop()}}}),c=(0,Y.Z)(u,2),s=c[0],l=s.isOver,p=s.canDrop,f=c[1],m=(0,a.useMemo)((function(){return l&&p}),[l,p]);return(0,i.jsx)("div",{ref:f,className:Ze()(ur().wrapper,(e={},(0,r.Z)(e,ur().isActive,m),(0,r.Z)(e,ur().canDrop,!m&&p),e))})},sr=n(99137),lr=n.n(sr),pr=function(t){var e,n=t.position,u=t.inRange,c=t.onRequestAddGate,s=(0,o.Gc)().getValues,l=(0,a.useCallback)((function(t){var e=(0,Y.Z)(n,2),r=e[0],a=e[1],o=t.gate,i=t.type,c=s(vt).gateItems;if("draggable_control_qubit_gate"===i){var l=(0,Y.Z)(o.connectedMultiGate.position,2),p=l[0];return l[1]===a&&(r<p?c[a].slice(r+1,p):c[a].slice(p+1,r)).every((function(t){var e=t.item;return"empty_control_qubit"===e.type||"control_qubit"===e.type&&e.connectedMultiGate.position[0]===p}))}var f=[c[a][r+o.size-1],c[a][r-o.size+1]].some((function(t){return"empty_control_qubit"===(null===t||void 0===t?void 0:t.item.type)})),m=0===a||!st(c[a-1][r].item);return!u&&f&&m}),[s,n,u]),p=(0,On.L)({accept:[Le,Ne],canDrop:l,drop:function(t){switch(t.type){case"draggable_quantum_gate":case"draggable_control_qubit_gate":c(t,n);break;default:fn(t.type)}},collect:function(t){return{isOver:t.isOver(),canDrop:t.canDrop()}}}),f=(0,Y.Z)(p,2),m=f[0],d=m.isOver,h=m.canDrop,b=f[1],v=(0,a.useMemo)((function(){return d&&h}),[d,h]);return(0,i.jsx)("div",{ref:b,className:Ze()(lr().wrapper,(e={},(0,r.Z)(e,lr().isActive,v),(0,r.Z)(e,lr().canDrop,!v&&h),(0,r.Z)(e,lr().inRange,u),e))})},fr=n(14735),mr=n.n(fr),dr=function(t){var e=t.gate,n=t.position,r=(0,a.useRef)(null),o=(0,a.useMemo)((function(){return n[0]>e.connectedMultiGate.position[0]?"upper":"lower"}),[e,n]),u=(0,Be.c)({item:{gate:e,position:n,type:Le},collect:function(t){return{isDragging:t.isDragging()}}}),c=(0,Y.Z)(u,2),s=c[0].isDragging;return(0,c[1])(r),(0,i.jsx)("div",{className:mr().wrapper,"data-direction":o,children:(0,i.jsx)(Ke,{ref:r,gateType:e.type,color:Xe,isDragging:s})})},hr=function(t){var e=t.gate,n=t.position,r=t.onRequestAddGate,o=t.onRequestMoveGate,u=t.onRequestRemoveGate,c=(0,a.useMemo)((function(){switch(e.type){case"empty":return(0,i.jsx)(cr,{position:n,onRequestAddGate:r});case"unavailable":return null;case"control_qubit":return(0,i.jsx)(dr,{gate:e,position:n});case"empty_control_qubit":return(0,i.jsx)(pr,{position:n,inRange:e.inRange,onRequestAddGate:r});case"x":case"y":case"z":case"h":case"t":case"s":return(0,i.jsx)(Sn,{gate:e,position:n,type:Ge,onRequestMoveGate:o,onRequestRemoveGate:u});case"rx":case"ry":case"rz":return(0,i.jsx)(or,{gate:e,position:n,onRequestMoveGate:o,onRequestRemoveGate:u});case"cnot":case"ccnot":return(0,i.jsx)(nr,{gate:e,position:n,onRequestRemoveGate:u});default:return fn(e)}}),[e,n,r,o,u]);return(0,i.jsx)(i.Fragment,{children:c})},br=function(t,e){return{gridRow:t+1,gridColumn:e+1}},vr=function(t,e){return t.itemMatrix===e.itemMatrix},yr=a.memo((function(t){var e=t.itemMatrix,n=(0,o.Gc)(),r=n.getValues,u=n.setValue,c=(0,a.useCallback)((function(t,e){var n=(0,Y.Z)(e,2),a=n[0],o=n[1],i=r(vt).gateItems.slice();if(pt(t.gate)){var c=t.gate,s=c.type,l=c.size,p=i[o][a-l+1],f=null==p||"empty_control_qubit"!==p.item.type&&!st(p.item)?[a+1].concat((0,gn.Z)("ccnot"===s?[a+2]:[])):[a-1].concat((0,gn.Z)("ccnot"===s?[a-2]:[]));i[o]=i[o].map((function(t,n){return f.includes(n)?function(t){return mt(it(it({},J.CONTROL_QUBIT),{},{connectedMultiGate:t}))}({position:e,type:s}):n===a?dt(s,f):st(t.item)?ht({inRange:!1}):t}))}else if("control_qubit"===t.gate.type){if(null!=t.position){var m=t.gate.connectedMultiGate,d=t.position,h=m.position[0];Kn(i,[o,d[0]],[o,a]);var b=[].concat((0,gn.Z)(i[o][h].item.controllQubitIndex.filter((function(t){return t!==d[0]}))),[a]);i[o].splice(h,1,dt(m.type,b)),i[o]=i[o].map((function(t,e){if("empty_control_qubit"===t.item.type){var n=(b.length>1?b:[].concat((0,gn.Z)(b),[h])).sort((function(t,e){return t>e?1:-1})),r=(0,Y.Z)(n,2),a=r[0],o=r[1];return ht({inRange:X()(e,a,o)})}return t}))}}else i[o].splice(a,1,mt(t.gate));u(vt,{gateItems:$n(i)})}),[]),s=(0,a.useCallback)((function(t,e){var n=t.position;mn(n);var a=(0,Y.Z)(n,2),o=a[0],i=a[1],c=(0,Y.Z)(e,2),s=c[0],l=c[1],p=r(vt),f=Kn(p.gateItems.slice(),[i,o],[l,s]);u(vt,{gateItems:f})}),[]),l=(0,a.useCallback)((function(t,e){var n=(0,Y.Z)(e,2),a=n[0],o=n[1],i=r(vt).gateItems.slice();if(pt(t))i[o]=i[o].map((function(e,n){return n===a||t.controllQubitIndex.includes(n)||"empty_control_qubit"===e.item.type?ht({inRange:!1}):e}));else{var c=i[o].some((function(t){var e=t.item;return pt(e)}));i[o].splice(a,1,c?ht({inRange:!1}):mt(at.EMPTY))}u(vt,{gateItems:$n(i)})}),[]);return(0,i.jsxs)("div",{className:er().wrapper,children:[(0,i.jsx)(pn,{columnLength:e.length}),e.map((function(t,e){return(0,i.jsx)(a.Fragment,{children:t.map((function(t,n){return(0,i.jsx)("div",{className:er().gateCell,style:br(n,e+1),children:(0,i.jsx)(hr,{gate:t.item,position:[n,e],onRequestAddGate:c,onRequestMoveGate:s,onRequestRemoveGate:l})},t.id)}))},e)}))]})}),vr),gr=n(5971),Or=n(6060),_r=n(35936),xr=n(58913),jr=n(97910),wr=n.n(jr),qr=(0,v.ZP)(Nt.Z)({minWidth:"80px"}),Sr=function(t){var e=t.initialValue,n=t.onChange,r=(0,a.useState)(e),o=r[0],u=r[1],c=(0,a.useCallback)((function(t,e){"number"===typeof e&&u(e)}),[]),s=(0,a.useCallback)((function(t){var e=t.target.value;u(""===e?"":parseFloat(e))}),[]),l=(0,a.useCallback)((function(){"number"!==typeof o||o<0?u(0):o>2&&u(2)}),[o]);return(0,a.useEffect)((function(){"number"===typeof o&&n(o)}),[o,n]),(0,i.jsxs)("div",{className:wr().wrapper,children:[(0,i.jsx)(xr.ZP,{min:0,max:2,step:.01,size:"small",value:"number"===typeof o?o:0,onChange:c}),(0,i.jsx)("div",{className:wr().inputWrapper,children:(0,i.jsx)(qr,{value:o,onChange:s,onBlur:l,inputProps:{min:0,max:2,step:.01,type:"number"}})})]})};function Rr(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Cr(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Rr(Object(n),!0).forEach((function(e){(0,r.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Rr(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Mr=function(t,e){return t.isOpened===e.isOpened},Er=a.memo((function(t){var e=t.isOpened,n=t.gateItem,r=t.onClose,u=n.gate,c=n.position,s=(0,o.Gc)(),l=s.setValue,p=s.getValues,f=(0,a.useState)(u.param),m=f[0],d=f[1],h=(0,a.useCallback)((function(t){d(t)}),[]),v=(0,a.useCallback)((function(){var t=p([vt]).circuitInformation.gateItems.slice(),e=(0,Y.Z)(c,2),n=e[0];t[e[1]].splice(n,1,mt(Cr(Cr({},u),{},{param:m}))),l(vt,{gateItems:t}),r()}),[u,c,m,r,p,l]);return(0,i.jsxs)(xe.Z,{open:e,onClose:r,children:[(0,i.jsx)(_r.Z,{children:"Edit ".concat(u.type.toUpperCase()," Gate")}),(0,i.jsx)(Or.Z,{children:(0,i.jsx)(Sr,{initialValue:u.param,onChange:h})}),(0,i.jsxs)(gr.Z,{children:[(0,i.jsx)(b.Z,{onClick:r,color:"primary",children:"Cancel"}),(0,i.jsx)(b.Z,{onClick:v,color:"primary",autoFocus:!0,children:"Save"})]})]})}),Mr),Pr=n(73818),kr=n.n(Pr),Tr=a.createContext(null),Zr=function(){return(0,a.useContext)(Tr)},Qr=function(){var t=function(){var t=(0,a.useState)(!1),e=t[0],n=t[1],r=(0,a.useState)(),o=r[0],i=r[1];return{isOpened:e,gateItem:o,open:(0,a.useCallback)((function(t,e){i({gate:t,position:e}),n(!0)}),[]),close:(0,a.useCallback)((function(){n(!1)}),[])}}(),e=(0,(0,o.Gc)().watch)([vt]).circuitInformation.gateItems;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:kr().wrapper,children:[(0,i.jsx)(g.Z,{variant:"overline",children:"Quantum Circuit"}),(0,i.jsx)("div",{className:kr().collections,children:(0,i.jsx)(Hn,{})}),(0,i.jsx)(Tr.Provider,{value:t.open,children:(0,i.jsx)("div",{className:kr().composer,children:(0,i.jsx)(yr,{itemMatrix:e})})})]}),null!=t.gateItem&&(0,i.jsx)(Er,{isOpened:t.isOpened,gateItem:t.gateItem,onClose:t.close})]})},Dr=n(41791),Ir=n(75744),Nr=function(t){var e=t.children;return(0,i.jsx)(Dr.W,{backend:Ir.PD,children:e})},Gr=n(27835),Vr=n.n(Gr),Ar=(0,v.ZP)(R.Z)({height:"100%",padding:"8px 15px",overflow:"auto"}),Lr=function(){return(0,i.jsx)("div",{className:Vr().wrapper,children:(0,i.jsxs)(Nr,{children:[(0,i.jsx)("div",{className:Ze()(Vr().tab,Vr().circuitTab),children:(0,i.jsx)(Ar,{variant:"outlined",children:(0,i.jsx)(Qr,{})})}),(0,i.jsx)("div",{className:Ze()(Vr().tab,Vr().observableTab),children:(0,i.jsx)(Ar,{variant:"outlined",children:(0,i.jsx)(Xn,{})})})]})})},Br=n(96412),zr=n(13089),Yr=n(80304),Fr=n(94214),Xr=n(48200);function Ur(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,Xr.Z)(t);if(e){var a=(0,Xr.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,Fr.Z)(this,n)}}var Wr=function(t){(0,Yr.Z)(n,t);var e=Ur(n);function n(t){var r;return(0,Br.Z)(this,n),(r=e.call(this,t)).state={hasError:!1},r}return(0,zr.Z)(n,[{key:"componentDidCatch",value:function(t,e){var n=this.props.errorHandler;console.error(t),null!=n&&n(t,e)}},{key:"render",value:function(){return(0,this.props.children)(this.state.hasError)}}],[{key:"getDerivedStateFromError",value:function(){return{hasError:!0}}}]),n}(a.Component),Hr=n(150),Kr=n.n(Hr),Jr=function(){return(0,i.jsx)(Wr,{children:function(){return(0,i.jsxs)(d.wT,{children:[(0,i.jsx)(S,{}),(0,i.jsxs)("div",{className:Kr().wrapper,children:[(0,i.jsx)("div",{className:Kr().uiState,children:(0,i.jsx)(Lr,{})}),(0,i.jsxs)(Jt,{children:[(0,i.jsx)("div",{className:Kr().charts,children:(0,i.jsx)(_e,{})}),(0,i.jsx)(ke,{})]})]})]})}})};function $r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ta(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?$r(Object(n),!0).forEach((function(e){(0,r.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$r(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var ea=function(){var t=function(){var t=(0,o.cI)({mode:"onSubmit",defaultValues:Ot,shouldUnregister:!1}),e=t.register;return(0,a.useEffect)((function(){e(vt),e(yt),e(gt)}),[e]),t}();return(0,i.jsx)(o.RV,ta(ta({},t),{},{children:(0,i.jsx)(s,{children:(0,i.jsx)(m,{children:(0,i.jsx)(Jr,{})})})}))}},8738:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(7587)}])},6884:function(t){t.exports={tooltipWrapper:"AmplitudesChart_tooltipWrapper__TDeOL",tooltipLabel:"AmplitudesChart_tooltipLabel__hXlqF",tooltipValue:"AmplitudesChart_tooltipValue__7ddKW"}},99643:function(t){t.exports={wrapper:"EmptyGate_wrapper__HJYW6",isActive:"EmptyGate_isActive__Qj3_V",canDrop:"EmptyGate_canDrop__07pxm"}},33502:function(t){t.exports={wrapper:"GateCollections_wrapper__qhUsD",item:"GateCollections_item__TTKX_"}},73510:function(t){t.exports={wrapper:"GateComposer_wrapper__Wpy1N",gateCell:"GateComposer_gateCell__M3_49",addGateColumnButtonWrapper:"GateComposer_addGateColumnButtonWrapper__nIM51"}},70865:function(t){t.exports={wrapper:"GateInput_wrapper__mq7EK",item:"GateInput_item__bUwNV"}},10713:function(t){t.exports={heading:"AppHeader_heading__W1R2i"}},69350:function(t){t.exports={wrapper:"ChartTabContainer_wrapper__yBkwl",tab:"ChartTabContainer_tab__bl9dv"}},27835:function(t){t.exports={wrapper:"UIStateTabContainer_wrapper___G6H6",tab:"UIStateTabContainer_tab__fDDXM",circuitTab:"UIStateTabContainer_circuitTab__ZkGud",observableTab:"UIStateTabContainer_observableTab__jm1WI"}},95533:function(t){t.exports={control:"ChartContainer_control__ZBDdw"}},30790:function(t){t.exports={wrapper:"RunButton_wrapper__O3LjR"}},9225:function(t){t.exports={wrapper:"DroppableParametricGate_wrapper__3piGk",isSelected:"DroppableParametricGate_isSelected__95rgG"}},33291:function(t){t.exports={wrapper:"EmptyGate_wrapper__GTPVD",isActive:"EmptyGate_isActive__jLo_F",canDrop:"EmptyGate_canDrop___30Pi"}},99137:function(t){t.exports={wrapper:"EmptyQubitGate_wrapper__8aBYW",isActive:"EmptyQubitGate_isActive__qGMhd",canDrop:"EmptyQubitGate_canDrop__xTCbh",inRange:"EmptyQubitGate_inRange__MFRiV"}},14735:function(t){t.exports={wrapper:"QubitGate_wrapper__jmJz1"}},46983:function(t){t.exports={wrapper:"CircuitGateCollections_wrapper__LsMrX",item:"CircuitGateCollections_item__KMtYg"}},96258:function(t){t.exports={wrapper:"CircuitGateComposer_wrapper__J523M",gateCell:"CircuitGateComposer_gateCell__rf_M4"}},97910:function(t){t.exports={wrapper:"ParametricValueSlider_wrapper__F1Myu",inputWrapper:"ParametricValueSlider_inputWrapper__74f3E"}},73818:function(t){t.exports={wrapper:"QuantumCircuitTab_wrapper__FYqSg",collections:"QuantumCircuitTab_collections__YMGwe",composer:"QuantumCircuitTab_composer__ZPqxz"}},40436:function(t){t.exports={wrapper:"ContextMenu_wrapper___4z38"}},56720:function(t){t.exports={wrapper:"Gate_wrapper__pyKuG",canDrag:"Gate_canDrag___Q5hr",isDragging:"Gate_isDragging__TOZcF",parametricValue:"Gate_parametricValue__ohPcl",multiGate:"Gate_multiGate__WPF31",controlQubitGate:"Gate_controlQubitGate__Fyl8t"}},41755:function(t){t.exports={wrapper:"DraggableGate_wrapper__WFCSu"}},62840:function(t){t.exports={label:"GateLabels_label__hethD",labelIndex:"GateLabels_labelIndex__obGm0",line:"GateLabels_line__biYo7"}},150:function(t){t.exports={wrapper:"Home_wrapper__1h3zx",uiState:"Home_uiState__SjV35",charts:"Home_charts__Jfxme"}},59186:function(t,e){(()=>{"use strict";var t={799:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});e.QuantumState=function(t){}},914:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0});var r=n(799);e.QuantumState=r.QuantumState},234:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0});var r=n(412),a=n(984),o=n(46),i=function(){function t(t){this._quantumStateGenerator=t.quantumStateGenerator,this._mapQubitQuantumState=[]}return t.prototype.createNewQubit=function(t,e){var n=this._quantumStateGenerator(e.value);this._mapQubitQuantumState.push({qubit:t,bitId:0,quantumState:n})},t.prototype.requestOperation=function(t){for(var e=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i,u=n.map((function(t){return e._lookupQubitQuantumStateMapElementFromQubit(t)}));switch(t){case a.QuantumOperationTypes.X:case a.QuantumOperationTypes.Y:case a.QuantumOperationTypes.Z:case a.QuantumOperationTypes.S:case a.QuantumOperationTypes.T:case a.QuantumOperationTypes.H:var c=u[0];this._requestOperationSingleQubit(t,c);break;case a.QuantumOperationTypes.CONTROLLED_X:case a.QuantumOperationTypes.CONTROLLED_Y:case a.QuantumOperationTypes.CONTROLLED_Z:var s=u[0];i=u[1],s.quantumState!==i.quantumState&&this._mergeQubitMapElement(s,i),this._requestControlledOperationQubit(t,s,i);break;case a.QuantumOperationTypes.TOFFOLI:var l=u[0],p=u[1];i=u[2],l.quantumState!==p.quantumState&&this._mergeQubitMapElement(l,p),l.quantumState!==i.quantumState&&this._mergeQubitMapElement(l,i),o.toffoli(l.quantumState,l.bitId,p.bitId,i.bitId)}},t.prototype.requestRotateOperation=function(t,e,n){var r=this._lookupQubitQuantumStateMapElementFromQubit(n);switch(t){case a.QuantumOperationTypes.R:r.quantumState.r(r.bitId,e);break;case a.QuantumOperationTypes.ROTATEX:r.quantumState.rx(r.bitId,e);break;case a.QuantumOperationTypes.ROTATEY:r.quantumState.ry(r.bitId,e);break;case a.QuantumOperationTypes.ROTATEZ:r.quantumState.rz(r.bitId,e)}},t.prototype.requestMeasure=function(t){var e=this._lookupQubitQuantumStateMapElementFromQubit(t);return this._measureQubit(e)},t.prototype.toStringQubit=function(t){return this._lookupQubitQuantumStateMapElementFromQubit(t).quantumState.toString()},t.prototype.getCompositedQubits=function(t){var e=this._lookupQubitQuantumStateMapElementFromQubit(t).quantumState;return this._mapQubitQuantumState.filter((function(t){return t.quantumState===e})).map((function(t){return t.qubit}))},t.prototype.cloneQubits=function(t){var e=this,n=this._lookupQubitQuantumStateMapElementFromQubit(t).quantumState,a=n.simulated.clone(),o=this._mapQubitQuantumState.filter((function(t){return t.quantumState===n})),i=o.map((function(t){var n=new r.Qubit,o=e._lookupQubitQuantumStateMapElementFromQubit(n);return o.quantumState,o.bitId=t.bitId,o.quantumState=a,o}));return{index:o.findIndex((function(e){return e.qubit===t})),qubits:i.map((function(t){return t.qubit}))}},t.prototype.getStateVectorFromQubit=function(t){return this._lookupQubitQuantumStateMapElementFromQubit(t).quantumState.simulated.getStateVector()},t.prototype.mergeStateVector=function(t){var e=this,n=t.map((function(t){return e._lookupQubitQuantumStateMapElementFromQubit(t)})),r=n[0];n.slice(1).forEach((function(t){r.quantumState!==t.quantumState&&e._mergeQubitMapElement(r,t)}))},t.prototype._requestOperationSingleQubit=function(t,e){switch(t){case a.QuantumOperationTypes.X:e.quantumState.x(e.bitId);break;case a.QuantumOperationTypes.Y:e.quantumState.y(e.bitId);break;case a.QuantumOperationTypes.Z:e.quantumState.z(e.bitId);break;case a.QuantumOperationTypes.S:e.quantumState.s(e.bitId);break;case a.QuantumOperationTypes.T:e.quantumState.t(e.bitId);break;case a.QuantumOperationTypes.H:e.quantumState.h(e.bitId)}},t.prototype._requestControlledOperationQubit=function(t,e,n){switch(t){case a.QuantumOperationTypes.CONTROLLED_X:n.quantumState.controlledX(e.bitId,n.bitId);break;case a.QuantumOperationTypes.CONTROLLED_Y:n.quantumState.controlledY(e.bitId,n.bitId);break;case a.QuantumOperationTypes.CONTROLLED_Z:n.quantumState.controlledZ(e.bitId,n.bitId)}},t.prototype._measureQubit=function(t){return t.quantumState.measure(t.bitId).result},t.prototype._lookupQubitQuantumStateMapElementFromQubit=function(t){return this._mapQubitQuantumState.find((function(e){return e.qubit===t}))},t.prototype._mergeQubitMapElement=function(t,e){var n=e.quantumState.length,r=this._mapQubitQuantumState.filter((function(e){return e.quantumState===t.quantumState})),a=this._mapQubitQuantumState.filter((function(t){return t.quantumState===e.quantumState})),o=t.quantumState.merge(e.quantumState);r.forEach((function(t){t.quantumState=o})),a.forEach((function(t){t.quantumState=o})),r.forEach((function(t){return t.bitId=t.bitId+n}))},t}();e.Core=i},196:function(t,e,n){var r,a=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(914),i=n(202);e.quantumStateJsQubitsGenerator=function(t){return new u(t)};var u=function(t){function e(n){var r=t.call(this,n)||this;if(r._qstate=i.jsqubits("|0>"),"number"==typeof n)switch(n){case 0:break;case 1:r._qstate=r._qstate.x(0)}else switch(n){case"0":case"|0>":break;case"1":case"|1>":r._qstate=r._qstate.x(0);break;case"+":r._qstate=r._qstate.hadamard(0);break;case"-":r._qstate=r._qstate.x(0),r._qstate=r._qstate.hadamard(0)}return r.simulated={clone:function(){var t=new e(0);return t._qstate=r._qstate.normalize(),t},getStateVector:function(){for(var t=Math.pow(2,r._qstate.numBits()),e=[],n=0;n<t;n++){var a=r._qstate.amplitude(n);e.push({re:a.real,im:a.imaginary})}return e}},r}return a(e,t),e.prototype.x=function(t){this._qstate=this._qstate.X(t)},e.prototype.y=function(t){this._qstate=this._qstate.Y(t)},e.prototype.z=function(t){this._qstate=this._qstate.Z(t)},e.prototype.r=function(t,e){this._qstate=this._qstate.r(t,e)},e.prototype.s=function(t){this._qstate=this._qstate.s(t)},e.prototype.t=function(t){this._qstate=this._qstate.t(t)},e.prototype.h=function(t){this._qstate=this._qstate.hadamard(t)},e.prototype.cnot=function(t,e){this._qstate=this._qstate.controlledX(t,e)},e.prototype.controlledX=function(t,e){this._qstate=this._qstate.controlledX(t,e)},e.prototype.controlledY=function(t,e){this._qstate=this._qstate.controlledY(t,e)},e.prototype.controlledZ=function(t,e){this._qstate=this._qstate.controlledZ(t,e)},e.prototype.rx=function(t,e){this._qstate=this._qstate.rotateX(t,e)},e.prototype.ry=function(t,e){this._qstate=this._qstate.rotateY(t,e)},e.prototype.rz=function(t,e){this._qstate=this._qstate.rotateZ(t,e)},e.prototype.measure=function(t){var e=this._qstate.measure(t);return this._qstate=e.newState,{newQuantumState:this,result:e.result}},e.prototype.merge=function(t){return this._qstate=this._qstate.tensorProduct(t._qstate),this},Object.defineProperty(e.prototype,"length",{get:function(){return this._qstate.numBits()},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return this._qstate.toString()},e}(o.QuantumState);e.QuantumStateJsqubits=u},412:function(t,e,n){var r=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),a=0;for(e=0;e<n;e++)for(var o=arguments[e],i=0,u=o.length;i<u;i++,a++)r[a]=o[i];return r};Object.defineProperty(e,"__esModule",{value:!0});var a=n(984),o=function(){function t(e){void 0===e&&(e={value:0}),t._core.createNewQubit(this,e),this._createSimulated()}return t.prototype.x=function(){t._core.requestOperation(a.QuantumOperationTypes.X,this)},t.prototype.y=function(){t._core.requestOperation(a.QuantumOperationTypes.Y,this)},t.prototype.z=function(){t._core.requestOperation(a.QuantumOperationTypes.Z,this)},t.prototype.r=function(e){t._core.requestRotateOperation(a.QuantumOperationTypes.R,e,this)},t.prototype.s=function(){t._core.requestOperation(a.QuantumOperationTypes.S,this)},t.prototype.t=function(){t._core.requestOperation(a.QuantumOperationTypes.T,this)},t.prototype.h=function(){t._core.requestOperation(a.QuantumOperationTypes.H,this)},t.prototype.cnot=function(e){t._core.requestOperation(a.QuantumOperationTypes.CONTROLLED_X,e,this)},t.prototype.controlledX=function(e){t._core.requestOperation(a.QuantumOperationTypes.CONTROLLED_X,e,this)},t.prototype.controlledY=function(e){t._core.requestOperation(a.QuantumOperationTypes.CONTROLLED_Y,e,this)},t.prototype.controlledZ=function(e){t._core.requestOperation(a.QuantumOperationTypes.CONTROLLED_Z,e,this)},t.prototype.rotateX=function(e){t._core.requestRotateOperation(a.QuantumOperationTypes.ROTATEX,e,this)},t.prototype.rotateY=function(e){t._core.requestRotateOperation(a.QuantumOperationTypes.ROTATEY,e,this)},t.prototype.rotateZ=function(e){t._core.requestRotateOperation(a.QuantumOperationTypes.ROTATEZ,e,this)},t.prototype.toffoli=function(e,n){t._core.requestOperation(a.QuantumOperationTypes.TOFFOLI,e,n,this)},t.prototype.measure=function(){return t._core.requestMeasure(this)},t.prototype.toString=function(){return t._core.toStringQubit(this)},t.prototype._createSimulated=function(){var e=this;this.simulated={clone:function(){return t._core.cloneQubits(e)},compositedQubits:function(){return t._core.getCompositedQubits(e)},getStateVector:function(){return t._core.getStateVectorFromQubit(e)},mergeStateVector:function(n){Array.isArray(n)||(n=[n]),t._core.mergeStateVector(r([e],n))}}},t}();e.Qubit=o},458:(t,e,n)=>{n(914).QuantumState;var r=n(196);r.QuantumStateJsqubits;var a=n(412);e.xz=a.Qubit;var o=n(234);o.Core,n(299);var i={quantumStateGenerator:r.quantumStateJsQubitsGenerator},u=new o.Core(i);a.Qubit._core=u},46:(t,e)=>{function n(t,e){t.t(e),t.t(e),t.t(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.toffoli=function(t,e,r,a){t.t(r),t.h(a),t.t(a),t.cnot(r,a),n(t,a),t.cnot(r,a),t.cnot(e,r),n(t,r),t.cnot(r,a),t.t(a),t.cnot(r,a),t.cnot(e,r),t.cnot(e,a),n(t,a),t.cnot(e,a),t.t(e),t.h(a)}},299:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0});var r=n(412);e.intToQubits=function(t,e){if(!Number.isInteger(t))throw new Error("value must be integer.");var n=t.toString(2),a=n.length;if(a>e)throw new Error("Designated qubits length cannot express given number.");for(var o=[],i=0;i<e;i++)i<a&&"1"===n[a-i-1]?o.push(new r.Qubit({value:1})):o.push(new r.Qubit({value:0}));return o}},984:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.X=0]="X",t[t.Y=1]="Y",t[t.Z=2]="Z",t[t.R=3]="R",t[t.S=4]="S",t[t.T=5]="T",t[t.H=6]="H",t[t.CONTROLLED_X=7]="CONTROLLED_X",t[t.CONTROLLED_Y=8]="CONTROLLED_Y",t[t.CONTROLLED_Z=9]="CONTROLLED_Z",t[t.ROTATEX=10]="ROTATEX",t[t.ROTATEY=11]="ROTATEY",t[t.ROTATEZ=12]="ROTATEZ",t[t.TOFFOLI=13]="TOFFOLI"}(e.QuantumOperationTypes||(e.QuantumOperationTypes={}))},644:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=i(n(766)),o=i(n(287));function i(t){return t&&t.__esModule?t:{default:t}}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var c=function(){function t(e,n){u(this,t),this.equal=this.eql,this.equals=this.eql,(0,a.default)(arguments,1,2,"Must supply a real, and optionally an imaginary, argument to Complex()"),n=n||0,this.real=e,this.imaginary=n}return r(t,[{key:"add",value:function(e){return(0,a.default)(arguments,1,1,"Must supply 1 parameter to add()"),o.default.isNumber(e)?new t(this.real+e,this.imaginary):new t(this.real+e.real,this.imaginary+e.imaginary)}},{key:"multiply",value:function(e){return(0,a.default)(arguments,1,1,"Must supply 1 parameter to multiply()"),o.default.isNumber(e)?new t(this.real*e,this.imaginary*e):new t(this.real*e.real-this.imaginary*e.imaginary,this.real*e.imaginary+this.imaginary*e.real)}},{key:"conjugate",value:function(){return new t(this.real,-this.imaginary)}},{key:"toString",value:function(){if(0===this.imaginary)return""+this.real;var t;if(t=1===this.imaginary?"i":-1===this.imaginary?"-i":this.imaginary+"i",0===this.real)return t;var e=this.imaginary<0?"":"+";return this.real+e+t}},{key:"inspect",value:function(){return this.toString()}},{key:"format",value:function(e){var n=this.real,r=this.imaginary;if(e&&null!=e.decimalPlaces){var a=Math.pow(10,e.decimalPlaces);n=Math.round(n*a)/a,r=Math.round(r*a)/a}return new t(n,r).toString()}},{key:"negate",value:function(){return new t(-this.real,-this.imaginary)}},{key:"magnitude",value:function(){return Math.sqrt(this.real*this.real+this.imaginary*this.imaginary)}},{key:"phase",value:function(){return Math.atan2(this.imaginary,this.real)}},{key:"subtract",value:function(e){return(0,a.default)(arguments,1,1,"Must supply 1 parameter to subtract()"),o.default.isNumber(e)?new t(this.real-e,this.imaginary):new t(this.real-e.real,this.imaginary-e.imaginary)}},{key:"eql",value:function(e){return e instanceof t&&this.real===e.real&&this.imaginary===e.imaginary}},{key:"closeTo",value:function(t){return Math.abs(this.real-t.real)<1e-4&&Math.abs(this.imaginary-t.imaginary)<1e-4}}]),t}();c.ONE=new c(1,0),c.ZERO=new c(0,0),c.SQRT2=new c(Math.SQRT2,0),c.SQRT1_2=new c(Math.SQRT1_2,0),e.default=c},382:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=e-t.length,r=0;r<n;r++)t="0"+t;return t}var o=function(){function t(e,n,a){r(this,t),this.numBits=e,this.result=n,this.newState=a}return n(t,[{key:"toString",value:function(){return"{result: "+this.result+", newState: "+this.newState+"}"}},{key:"asBitString",value:function(){return a(this.result.toString(2),this.numBits)}}]),t}();e.default=o,e.QStateComponent=function(){function t(e,n,a){r(this,t),this.numBits=e,this.index=n,this.amplitude=a}return n(t,[{key:"asNumber",value:function(){return parseInt(this.index,10)}},{key:"asBitString",value:function(){return a(parseInt(this.index,10).toString(2),this.numBits)}}]),t}()},933:(t,e)=>{function n(t,e,r){if(0===e)return 1;if(1===e)return t;var a=n(t,Math.floor(e/2),r),o=a*a%r;return e%2==1&&(o=t*o%r),o}function r(t){return Math.abs(t-Math.round(t))<1e-7}function a(t){var e=Math.log(t)/Math.log(2),n=Math.floor(e);if(e===n)return 2;for(n--;n>1;n--){var a=Math.pow(t,1/n);if(r(a))return Math.round(a)}return 0}function o(t,e){for(;0!==e;){var n=t%e;t=e,e=n}return t}function i(t,e){return t*e/o(t,e)}function u(t){return t>=0?Math.floor(t):Math.ceil(t)}function c(t,e){var n=void 0,r=void 0;Math.abs(t)>=1?r=t-(n=u(t)):(n=0,r=t);for(var a={numerator:1,denominator:0},o={numerator:n,denominator:1},i=[n];Math.abs(t-o.numerator/o.denominator)>e;){var c=1/r,s=u(c);r=c-s,i.push(s);var l={numerator:s*o.numerator+a.numerator,denominator:s*o.denominator+a.denominator};a=o,o=l}var p=o,f=p.numerator,m=p.denominator;return o.denominator<0&&(f*=-1,m*=-1),{quotients:i,numerator:f,denominator:m}}function s(t,e){var n=function(t){for(var e=[],n=0;n<t.length;n++)e[n]=t[n];return e}(t);function r(t,e){var r=1<<t;if(!(r&n[e]))for(var a=e+1;a<n.length;a++)if(r&n[a]){var o=n[e];return n[e]=n[a],void(n[a]=o)}}function a(t,e){for(var r=n[e],a=1<<t,o=0;o<n.length;o++)o!==e&&a&n[o]&&(n[o]^=r)}function o(t,e,r){for(var a=1<<e,o=a,i=0;i<r;i++)n[i]&a&&(o+=1<<t[i]);return o}var i=[];return function(t){for(var o=0,i=e-1;i>=0;i--)r(i,o),1<<i&n[o]&&(t[o]=i,a(i,o),o++)}(i),function(t){for(var n=[],r=0,a=t[r],i=e-1;i>=0;i--)i===a?a=t[++r]:n.push(o(t,i,r));return n}(i)}Object.defineProperty(e,"__esModule",{value:!0}),e.powerMod=n,e.powerFactor=a,e.gcd=o,e.lcm=i,e.continuedFraction=c,e.findNullSpaceMod2=s,e.default={powerMod:n,powerFactor:a,gcd:o,lcm:i,continuedFraction:c,findNullSpaceMod2:s}},899:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(382),o=l(a),i=l(n(644)),u=l(n(766)),c=l(n(287)),s=l(n(163));function l(t){return t&&t.__esModule?t:{default:t}}function p(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t){return t=t.replace(/^\|/,"").replace(/>$/,""),{value:parseInt(t,2),length:t.length}}function m(t,e,n){n.magnitude()>s.default.roundToZero&&(t[e]=n)}function d(t,e,n){var r=(t[e]||i.default.ZERO).add(n);r.magnitude()>s.default.roundToZero?t[e]=r:delete t[e]}function h(t,e){if(null==t)throw new Error("bit qualification must be supplied");if(t===s.default.ALL)return{from:0,to:e-1};if(c.default.isNumber(t))return{from:t,to:t};if(null!=t.from&&null!=t.to){if(t.from>t.to)throw new Error('bit range must have "from" being less than or equal to "to"');return t}throw new Error("bit qualification must be either: a number, Constants.ALL, or {from: n, to: m}")}function b(t,e){for(var n=0;n<t.length;n++)for(var r=t[n],a=0;a<e.length;a++)if(r===e[a])throw new Error("control and target bits must not be the same nor overlap")}function v(t){var e=t.random(),n=void 0,r=0;return t.each((function(t){var a=t.amplitude.magnitude();return r+=a*a,n=t.index,r<=e})),parseInt(n,10)}function y(t,e){if(t>e)throw new Error("bit range must have `from` being less than or equal to `to`");for(var n=[],r=t;r<=e;r++)n.push(r);return n}function g(t,e){if(null==t)throw new Error("bit qualification must be supplied");if(c.default.isArray(t))return t;if(c.default.isNumber(t))return[t];if(t===s.default.ALL)return y(0,e-1);if(null!=t.from&&null!=t.to)return y(t.from,t.to);throw new Error("bit qualification must be either: a number, an array of numbers, Constants.ALL, or {from: n, to: m}")}function O(t){var e=null;if(t){e=0;for(var n=0;n<t.length;n++)e+=1<<t[n]}return e}var _=[[i.default.SQRT1_2,i.default.SQRT1_2],[i.default.SQRT1_2,i.default.SQRT1_2.negate()]],x=[[i.default.ZERO,i.default.ONE],[i.default.ONE,i.default.ZERO]],j=[[i.default.ZERO,new i.default(0,-1)],[new i.default(0,1),i.default.ZERO]],w=[[i.default.ONE,i.default.ZERO],[i.default.ZERO,i.default.ONE.negate()]],q=[[i.default.ONE,i.default.ZERO],[i.default.ZERO,new i.default(0,1)]],S=[[i.default.ONE,i.default.ZERO],[i.default.ZERO,new i.default(Math.SQRT1_2,Math.SQRT1_2)]],R=function(){function t(e,n){p(this,t),this.kron=this.tensorProduct,this.R=this.r,this.cnot=this.controlledX,this.not=this.x,this.X=this.x,this.Y=this.y,this.Z=this.z,this.S=this.s,this.T=this.t,this.equal=this.eql,(0,u.default)(arguments,1,"new QState() must be supplied with number of bits (optionally with amplitudes as well)"),n=n||[s.default.ONE],this.numBits=function(){return e},this.amplitude=function(t){var e=c.default.isString(t)?f(t).value:t;return n[e]||i.default.ZERO},this.each=function(t){for(var r=Object.keys(n),o=0;o<r.length;o++){var i=r[o];if(!1===t(new a.QStateComponent(e,i,n[i])))break}}}return r(t,[{key:"multiply",value:function(e){c.default.isNumber(e)&&(e=new i.default(e));var n={};return this.each((function(t){n[t.index]=t.amplitude.multiply(e)})),new t(this.numBits(),n)}},{key:"add",value:function(e){var n={};return this.each((function(t){n[t.index]=t.amplitude})),e.each((function(t){var e=n[t.index]||i.default.ZERO;n[t.index]=t.amplitude.add(e)})),new t(this.numBits(),n)}},{key:"subtract",value:function(t){return this.add(t.multiply(-1))}},{key:"tensorProduct",value:function(e){var n={};return this.each((function(t){e.each((function(r){var a=(t.asNumber()<<e.numBits())+r.asNumber(),o=t.amplitude.multiply(r.amplitude);n[a]=o}))})),new t(this.numBits()+e.numBits(),n)}},{key:"controlledHadamard",value:function(t,e){return(0,u.default)(arguments,2,2,"Must supply control and target bits to controlledHadamard()"),this.controlledApplicationOfqBitOperator(t,e,_)}},{key:"hadamard",value:function(t){return(0,u.default)(arguments,1,1,"Must supply target bits to hadamard() as either a single index or a range."),this.controlledHadamard(null,t)}},{key:"controlledXRotation",value:function(t,e,n){(0,u.default)(arguments,3,3,"Must supply control bits, target bits, and an angle, to controlledXRotation()");var r=n/2,a=new i.default(Math.cos(r)),o=new i.default(0,-Math.sin(r)),c=[[a,o],[o,a]];return this.controlledApplicationOfqBitOperator(t,e,c)}},{key:"rotateX",value:function(t,e){return(0,u.default)(arguments,2,2,"Must supply target bits and angle to rotateX."),this.controlledXRotation(null,t,e)}},{key:"controlledYRotation",value:function(t,e,n){(0,u.default)(arguments,3,3,"Must supply control bits, target bits, and an angle, to controlledYRotation()");var r=n/2,a=new i.default(Math.cos(r)),o=new i.default(Math.sin(r)),c=[[a,o.negate()],[o,a]];return this.controlledApplicationOfqBitOperator(t,e,c)}},{key:"rotateY",value:function(t,e){return(0,u.default)(arguments,2,2,"Must supply target bits and angle to rotateY."),this.controlledYRotation(null,t,e)}},{key:"controlledZRotation",value:function(t,e,n){(0,u.default)(arguments,3,3,"Must supply control bits, target bits, and an angle to controlledZRotation()");var r=n/2,a=new i.default(Math.cos(r)),o=new i.default(0,Math.sin(r)),c=[[a.subtract(o),i.default.ZERO],[i.default.ZERO,a.add(o)]];return this.controlledApplicationOfqBitOperator(t,e,c)}},{key:"rotateZ",value:function(t,e){return(0,u.default)(arguments,2,2,"Must supply target bits and angle to rotateZ."),this.controlledZRotation(null,t,e)}},{key:"controlledR",value:function(t,e,n){(0,u.default)(arguments,3,3,"Must supply control and target bits, and an angle to controlledR().");var r=new i.default(Math.cos(n)),a=new i.default(0,Math.sin(n)),o=[[i.default.ONE,i.default.ZERO],[i.default.ZERO,r.add(a)]];return this.controlledApplicationOfqBitOperator(t,e,o)}},{key:"r",value:function(t,e){return(0,u.default)(arguments,2,2,"Must supply target bits and angle to r()."),this.controlledR(null,t,e)}},{key:"controlledX",value:function(t,e){return(0,u.default)(arguments,2,2,"Must supply control and target bits to cnot() / controlledX()."),this.controlledApplicationOfqBitOperator(t,e,x)}},{key:"x",value:function(t){return(0,u.default)(arguments,1,1,"Must supply target bits to x() / not()."),this.controlledX(null,t)}},{key:"controlledY",value:function(t,e){return(0,u.default)(arguments,2,2,"Must supply control and target bits to controlledY()."),this.controlledApplicationOfqBitOperator(t,e,j)}},{key:"y",value:function(t){return(0,u.default)(arguments,1,1,"Must supply target bits to y()."),this.controlledY(null,t)}},{key:"controlledZ",value:function(t,e){return(0,u.default)(arguments,2,2,"Must supply control and target bits to controlledZ()."),this.controlledApplicationOfqBitOperator(t,e,w)}},{key:"z",value:function(t){return(0,u.default)(arguments,1,1,"Must supply target bits to z()."),this.controlledZ(null,t)}},{key:"controlledS",value:function(t,e){return(0,u.default)(arguments,2,2,"Must supply control and target bits to controlledS()."),this.controlledApplicationOfqBitOperator(t,e,q)}},{key:"s",value:function(t){return(0,u.default)(arguments,1,1,"Must supply target bits to s()."),this.controlledS(null,t)}},{key:"controlledT",value:function(t,e){return(0,u.default)(arguments,2,2,"Must supply control and target bits to controlledT()."),this.controlledApplicationOfqBitOperator(t,e,S)}},{key:"t",value:function(t){return(0,u.default)(arguments,1,1,"Must supply target bits to t()."),this.controlledT(null,t)}},{key:"controlledSwap",value:function(e,n,r){(0,u.default)(arguments,3,3,"Must supply controlBits, targetBit1, and targetBit2 to controlledSwap()");var a={};null!=e&&(e=g(e,this.numBits()));var o=O(e),i=1<<n,c=1<<r;return this.each((function(t){var u=t.asNumber(),s=u;null!=e&&(u&o)!==o||(s=u&~i&~c|(u&c)>>r<<n|(u&i)>>n<<r),a[s]=t.amplitude})),new t(this.numBits(),a)}},{key:"swap",value:function(t,e){return(0,u.default)(arguments,2,2,"Must supply targetBit1 and targetBit2 to swap()"),this.controlledSwap(null,t,e)}},{key:"toffoli",value:function(){(0,u.default)(arguments,2,"At least one control bit and a target bit must be supplied to calls to toffoli()");for(var t=arguments[arguments.length-1],e=[],n=0;n<arguments.length-1;n++)e.push(arguments[n]);return this.controlledX(e,t)}},{key:"controlledApplicationOfqBitOperator",value:function(e,n,r){(0,u.default)(arguments,3,3,"Must supply control bits, target bits, and qbitFunction to controlledApplicationOfqBitOperator().");var a=g(n,this.numBits()),o=null;null!=e&&b(o=g(e,this.numBits()),a);for(var i=this,c=0;c<a.length;c++){var s=a[c];i=t.applyToOneBit(o,s,r,i)}return i}},{key:"applyFunction",value:function(e,n,r){function a(t,e){if(t.to>=e.from&&e.to>=t.from)throw new Error("control and target bits must not be the same nor overlap")}(0,u.default)(arguments,3,3,"Must supply control bits, target bits, and functionToApply to applyFunction().");var o=this,i=h(e,this.numBits()),c=h(n,this.numBits());a(i,c);var s={},l={},p=(1<<i.to+1)-1,f=(1<<1+c.to-c.from)-1<<c.from;return this.each((function(t){var e=t.asNumber();if(!l[t.index]){var n=(e&p)>>i.from,a=e^r(n)<<c.from&f;a===e?m(s,e,t.amplitude):(l[a]=!0,m(s,e,o.amplitude(a)),m(s,a,t.amplitude))}})),new t(this.numBits(),s)}},{key:"random",value:function(){return Math.random()}},{key:"normalize",value:function(){var e={},n=0;this.each((function(t){var e=t.amplitude.magnitude();n+=e*e}));var r=new i.default(1/Math.sqrt(n));return this.each((function(t){e[t.index]=t.amplitude.multiply(r)})),new t(this.numBits(),e)}},{key:"measure",value:function(e){(0,u.default)(arguments,1,1,"Must supply bits to be measured to measure().");var n=this.numBits(),r=g(e,n),a=v(this),i=O(r),c=a&i,s={};this.each((function(t){var e=t.asNumber();(e&i)===c&&(s[e]=t.amplitude)}));for(var l=0,p=n-1;p>=0;p--)r.indexOf(p)>=0&&(l<<=1,a&1<<p&&(l+=1));var f=new t(this.numBits(),s).normalize();return new o.default(r.length,l,f)}},{key:"qft",value:function(t){function e(t,n){var r=n[0];if(n.length>1){t=e(t,n.slice(1));for(var a=1;a<n.length;a++){var o=n[a],i=2*Math.PI/(1<<a+1);t=t.controlledR(r,o,i)}}return t.hadamard(r)}function n(t,e){for(;e.length>1;)t=t.swap(e[0],e[e.length-1]),e=e.slice(1,e.length-1);return t}(0,u.default)(arguments,1,1,"Must supply bits to be measured to qft().");var r=g(t,this.numBits()),a=e(this,r);return n(a,r)}},{key:"eql",value:function(e){function n(t,e){var n=!0;return t.each((function(t){return n=t.amplitude.eql(e.amplitude(t.asNumber()))})),n}return!!e&&e instanceof t&&this.numBits()===e.numBits()&&n(this,e)&&n(e,this)}},{key:"toString",value:function(){function t(t,e){var n=t.format(e);return"1"===n?"":"("+n+")"}function e(t,e){return t.asNumber()-e.asNumber()}for(var n=void 0,r="",a={decimalPlaces:4},o=function(t){var n=[];return t.each((function(t){n.push(t)})),n.sort(e),n}(this),i=0;i<o.length;i++)""!==r&&(r+=" + "),r=r+t((n=o[i]).amplitude,a)+"|"+n.asBitString()+">";return r}}],[{key:"fromBits",value:function(e){(0,u.default)(arguments,1,1,"Must supply a bit string");var n=f(e),r={};return r[n.value]=s.default.ONE,new t(n.length,r)}},{key:"applyOperatorMatrix",value:function(t,e,n){return[t[0][e].multiply(n),t[1][e].multiply(n)]}},{key:"applyToOneBit",value:function(e,n,r,a){var o={},i=1<<n,u=~i,c=O(e);return a.each((function(n){var a=n.asNumber();if(null==e||(a&c)===c){var s=(i&a)>0?1:0,l=t.applyOperatorMatrix(r,s,n.amplitude),p=a|i;d(o,a&u,l[0]),d(o,p,l[1])}else o[a]=n.amplitude})),new t(a.numBits(),o)}}]),t}();e.default=R},163:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0});var r,a=(r=n(644))&&r.__esModule?r:{default:r};e.default={ZERO:a.default.ZERO,ONE:new a.default(1,0),ALL:"ALL",roundToZero:1e-7}},202:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.jsqubits=void 0;var r=s(n(899)),a=s(n(644)),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(933)),i=n(382),u=s(i),c=s(n(163));function s(t){return t&&t.__esModule?t:{default:t}}function l(t){return r.default.fromBits(t)}l.complex=function(t,e){return new a.default(t,e)},l.real=function(t){return new a.default(t,0)},l.QMath=o,l.Complex=a.default,l.QState=r.default,l.Measurement=u.default,l.QStateComponent=i.QStateComponent,Object.assign(l,c.default),e.default=l,e.jsqubits=l},287:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){return Object.prototype.toString.call(t)};e.default={isNull:function(t){return"[object Null]"===n(t)},isObject:function(t){return"[object Object]"===n(t)},isArray:function(t){return"[object Array]"===n(t)},isString:function(t){return"[object String]"===n(t)},isNumber:function(t){return"[object Number]"===n(t)},isBoolean:function(t){return"[object Boolean]"===n(t)},isDate:function(t){return"[object Date]"===n(t)},isUndefined:function(t){return"[object Undefined]"===n(t)},isRegExp:function(t){return"[object RegExp]"===n(t)}}},766:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){for(var n=1e4,r="Must supply at least "+e+" parameters.",a=arguments.length,o=Array(a>2?a-2:0),i=2;i<a;i++)o[i-2]=arguments[i];if(o.length>2)throw new Error("Internal error: too many arguments to validateArgs");if(2===o.length?(n=o[0],r=o[1]):1===o.length&&(r=o[0]),t.length<e||t.length>n)throw r}}},n={};function r(e){var a=n[e];if(void 0!==a)return a.exports;var o=n[e]={exports:{}};return t[e].call(o.exports,o,o.exports,r),o.exports}r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var a={};(()=>{r.r(a),r.d(a,{BrowserUIClient:()=>v});var t=function(){return(t=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)},e={X:"x",Y:"y",Z:"z",H:"h",T:"t",S:"s"},n={RX:"rx",RY:"ry",RZ:"rz"},o={CNOT:"cnot",CCNOT:"ccnot"},i=t(t(t({},e),n),o);function u(t){if(!t.observable||0===t.observable.length||0===t.observable[0].operators.length)return!0;var e=function(t){var e=new Set;return t.forEach((function(t){t.operators.forEach((function(t){t&&e.add(t)}))})),e}(t.observable);return!(e.has("x")||e.has("y")||e.has("z"))}function c(t,r){var a=function(t){var e=new Set;return t.forEach((function(t){t.forEach((function(t){t&&e.add(t.type)}))})),e}(t.circuit),c=function(t){return t.has("rx")||t.has("ry")||t.has("rz")}(a),s=[];return function(t,e,n){if(n?(t.push("from numpy import pi"),t.push("from qulacs import QuantumState, ParametricQuantumCircuit, Observable")):t.push("from qulacs import QuantumState, QuantumCircuit, Observable"),e.size>0){var r="from qulacs.gate import";Array.from(e).sort().forEach((function(t,n){var a=function(t){return t===i.CCNOT?"TOFFOLI":t.toUpperCase()}(t);r+=" ".concat(a),n<e.size-1&&(r+=",")})),t.push(r)}}(s,a,c),s.push(""),function(t,r,a){var i;t.push((i=r.size,"state = QuantumState(".concat(i,")\nstate.set_zero_state()"))),t.push(function(t,e){return e?"circuit = ParametricQuantumCircuit(".concat(t,")"):"circuit = QuantumCircuit(".concat(t,")")}(r.size,a)),t.push(""),function(t,r){r.forEach((function(r){r.forEach((function(r,a){if(r){var i=function(t,r){switch(t.type){case e.X:case e.Y:case e.Z:case e.H:case e.S:case e.T:return function(t,n){switch(t.type){case e.X:return"circuit.add_gate(X(".concat(n,"))");case e.Y:return"circuit.add_gate(Y(".concat(n,"))");case e.Z:return"circuit.add_gate(Z(".concat(n,"))");case e.H:return"circuit.add_gate(H(".concat(n,"))");case e.S:return"circuit.add_gate(S(".concat(n,"))");case e.T:return"circuit.add_gate(T(".concat(n,"))");default:throw new Error("applySingleGate: cannot apply unknown gate: ".concat(t.type))}}(t,r);case n.RX:case n.RY:case n.RZ:return function(t,e){var r=t.param;switch(t.type){case n.RX:return"circuit.add_gate(RX(".concat(e,", pi * ").concat(r,"))");case n.RY:return"circuit.add_gate(RY(".concat(e,", pi * ").concat(r,"))");case n.RZ:return"circuit.add_gate(RZ(".concat(e,", pi * ").concat(r,"))");default:throw new Error("applyParametricSingleGate: cannot apply unknown gate: ".concat(t.type))}}(t,r);case o.CNOT:case o.CCNOT:return function(t,e){switch(t.type){case o.CNOT:return"circuit.add_gate(CNOT(".concat(e,", ").concat(t.controllQubitIndex[0],"))");case o.CCNOT:return"circuit.add_gate(TOFFOLI(".concat(t.controllQubitIndex.join(", "),", ").concat(e,"))");default:throw new Error("applyMultiGate: cannot apply unknown gate: ".concat(t.type))}}(t,r);default:return console.log("applyGate: invalid gate type, ".concat(t.type)),""}}(r,a);t.push(i)}}))}))}(t,r.circuit),t.push("circuit.update_quantum_state(state)")}(s,t,c),s.push(""),function(t,e,n){var r;r=u(e)?{observable:[{operators:[],coefficient:1}]}:e,t.push("expectation_value = 0"),r.observable.forEach((function(e){t.push("copied_state = state.copy()"),t.push("observable = Observable(".concat(n,")"));var r="";e.operators.forEach((function(t,e){t&&(e>0&&r.length>0&&(r+=" "),r+="".concat(t.toUpperCase()," ").concat(e))})),t.push("observable.add_operator(".concat(e.coefficient,', "').concat(r,'")')),t.push("expectation_value += observable.get_expectation_value(copied_state)")}))}(s,r,t.size),s.push("print(expectation_value)"),s.join("\n")}var s=r(458);function l(t,r,a){switch(t.type){case e.X:r.x();break;case e.Y:r.y();break;case e.Z:r.z();break;case e.H:r.h();break;case e.T:r.t();break;case e.S:r.s();break;case n.RX:r.rotateX(t.param*Math.PI);break;case n.RY:r.rotateY(t.param*Math.PI);break;case n.RZ:r.rotateZ(t.param*Math.PI);break;case o.CNOT:var i=t.controllQubitIndex[0];r.cnot(a[i]);break;case o.CCNOT:var u=t.controllQubitIndex[0],c=t.controllQubitIndex[1];r.toffoli(a[u],a[c]);break;default:null!=t&&console.log("applyGate: unexpected gate type, ".concat(t.type))}}var p,f=(p=function(t,e){return(p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}p(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),m=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return f(e,t),e.prototype.getStateVectorWithExpectationValue=function(t,e){var n=d(t);return{stateVector:n[0].simulated.getStateVector(),expectationValue:h(n,e)}},e.prototype.getExpectationValueMap=function(t,e,n,r,a){if(r<0)throw new Error("QramanaComputeDriver#getExpectationValueMap: invalid steps");if(0===r)return[];var o=[];function i(r){var a=h(d(t,{position:n,param:r}),e);o.push({param:r,expectationValue:a})}i(0);for(var u=1;u<r;u+=1)i(u/(r-1)*a);return o},e.prototype.runShotTask=function(t,e){for(var n=Math.pow(2,t.size),r=new Array(n).fill(0),a=d(t),o=function(t){var e=a[0].simulated.clone().qubits.map((function(t){return t.measure()})),n=0;e.forEach((function(t,r){if(0!==t){var a=e.length-r-1;n+=Math.pow(2,a)}})),r[n]+=1},i=0;i<e;i+=1)o();return r},e}((function(){}));function d(t,e){var n=function(t){for(var e=[new s.xz({value:0})],n=1;n<t;n+=1){var r=new s.xz({value:0});e[0].simulated.mergeStateVector(r),e.push(r)}return e}(t.size);return t.circuit.forEach((function(t,r){t.forEach((function(t,a){if(t){var o=n[a];e&&r===e.position.step&&a===e.position.index?l({size:1,type:t.type,param:e.param},o,n):l(t,o,n)}}))})),n}function h(t,e){var n;n=u(e)?{observable:[{operators:[],coefficient:1}]}:e;var r=0;return n.observable.forEach((function(e){var n=t[0].simulated.clone().qubits,a=n[0].simulated.getStateVector();e.operators.forEach((function(t,e){t&&l({type:t,size:1},n[e],n)}));var o,i,u,c=(o=a,i=n[0].simulated.getStateVector(),u={re:0,im:0},o.forEach((function(t,e){var n,r;u=function(t,e){return{re:t.re+e.re,im:t.im+e.im}}((n={re:t.re,im:-1*t.im},r=i[e],{re:n.re*r.re-n.im*r.im,im:n.re*r.im+n.im*r.re}),u)})),u).re;r+=c*e.coefficient})),r}var b=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),v=function(t){function e(e){var n=t.call(this,e)||this;return n.computeDriver=new m,n}return b(e,t),e.prototype.update=function(t){if(!function(t){var e=t.circuitInformation.size,n=0,r=0;return t.circuitInformation.circuit.forEach((function(t){t&&(n=Math.max(n,t.length))})),t.observableInformation.observable.forEach((function(t){t&&t.operators&&(r=Math.max(r,t.operators.length))})),!(e<n||e<r)}(t))return Promise.reject(new Error("invalid uiState"));this.uiState=t;var e=this.computeDriver.getStateVectorWithExpectationValue(t.circuitInformation,t.observableInformation),n=e.stateVector.map((function(t){return e=t,Math.sqrt(Math.pow(e.re,2)+Math.pow(e.im,2));var e}));return Promise.resolve({expectationValue:e.expectationValue,stateVector:e.stateVector,stateVectorAbsoluted:n,stateVectorArgument:e.stateVector.map((function(t){return e=t,Math.atan2(e.im,e.re)/Math.PI;var e})),probabilityVector:n.map((function(t){return Math.pow(t,2)})),translateCode:c(t.circuitInformation,t.observableInformation)})},e.prototype.requestParametricExpectedValues=function(t){if(!this.uiState)return Promise.reject(new Error("Need Circuit information before request expected values"));var e=this.computeDriver.getExpectationValueMap(this.uiState.circuitInformation,this.uiState.observableInformation,t.position,t.steps,this.parametricGateRange);return Promise.resolve({steps:t.steps,expectationValueMap:e})},e.prototype.startShot=function(t){if(!this.uiState)return Promise.reject(new Error("Need Circuit information before request start shots"));var e=this.computeDriver.runShotTask(this.uiState.circuitInformation,t.shot);return Promise.resolve({samplingMap:e})},e}((function(t){var e;this.parametricGateRange=null!==(e=t.parametricGateRange)&&void 0!==e?e:2}))})(),e.v=a})()},53260:function(){}},function(t){t.O(0,[220,774,888,179],(function(){return e=8738,t(t.s=e);var e}));var e=t.O();_N_E=e}]);