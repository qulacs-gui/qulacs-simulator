(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8631:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return ha}});var r=n(2784),a=n(2732),o=n(52746),i=n(8529),u=n(95235);function c(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(Object(n),!0).forEach((function(e){(0,u.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var l={EMPTY:{type:"empty",size:1}},p={CONTROL_QUBIT:{type:"control_qubit",connectedMultiGate:{type:"cnot",position:[0,0]},size:1}},f={X:{type:"x",size:1},Y:{type:"y",size:1},Z:{type:"z",size:1}},d=s(s({},f),{},{H:{type:"h",size:1},T:{type:"t",size:1},S:{type:"s",size:1}}),m={RX:{type:"rx",param:0,size:1},RY:{type:"ry",param:0,size:1},RZ:{type:"rz",param:0,size:1}},h={CNOT:{type:"cnot",controllQubitIndex:[0],size:2},CCNOT:{type:"ccnot",controllQubitIndex:[0],size:3}},v=s(s({},l),f),b=s(s(s(s(s({},l),p),d),m),h),y=n(79162);function g(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function O(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?g(Object(n),!0).forEach((function(e){(0,u.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var _=function(t){return"empty"===t.type},x=function(t){return"rx"===t.type||"ry"===t.type||"rz"===t.type},j=function(t){return"cnot"===t.type||"ccnot"===t.type},w=function(t){return"control_qubit"===t.type},S=function(t){return!_(t.item)&&"control_qubit"!==t.item.type},C=function(t){return{item:t,id:(0,y.x0)()}},q=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M;return new Array(t).fill("").map((function(){return C(b.EMPTY)}))},M=1,R=(0,a.cn)({key:"circuitGateItemsAtom",default:[q(M)],dangerouslyAllowMutability:!0}),k=(0,a.cn)({key:"circuitSelectedParametricGateState",default:null}),E=(0,a.nZ)({key:"circuiteGateItemsState",get:function(t){return(0,t.get)(R)},set:function(t,e){var n=t.set;if(!(e instanceof a.nY))if(e[e.length-1].some((function(t){var e=t.item;return!_(e)})))e.push(q(e[0].length));else for(var r=e.length-1;r>0;r-=1){if(!e[r-1].every((function(t){var e=t.item;return _(e)})))break;e.pop()}n(R,e)},dangerouslyAllowMutability:!0}),P=function(t,e,n){var r=t,a=(0,i.Z)(e,2),o=a[0],u=a[1],c=(0,i.Z)(n,2),s=c[0],l=c[1],p=[r[s][l],r[o][u]];return r[o][u]=p[0],r[s][l]=p[1],r},Z=function(t){return"desc"===t?function(t,e){return e-t}:function(t,e){return t-e}},T=function(t,e,n,r){var a=(0,i.Z)(n,2),o=a[0],u=a[1],c=e.type,s=null!==r&&void 0!==r?r:function(t,e,n){var r=(0,i.Z)(n,2),a=r[0],o=t[r[1]],u=function(t){return t.every((function(t){var e;return"empty"===(null===(e=o[t])||void 0===e?void 0:e.item.type)}))},c=new Array(e.size-1).fill(""),s=c.map((function(t,e){return a-(e+1)})),l=c.map((function(t,e){return a+(e+1)}));if(u(s))return s;if(u(l))return l;var p=[a-1,a+1];return"ccnot"===e.type&&u(p)?p:[]}(t,e,n).sort(Z("asc"));return t[u]=t[u].map((function(t,e){return s.includes(e)?(r={position:n,type:c},C(O(O({},p.CONTROL_QUBIT),{},{connectedMultiGate:r}))):e===o?function(t,e){var n="cnot"===t?b.CNOT:b.CCNOT;return C(O(O({},n),{},{controllQubitIndex:e}))}(c,s):t;var r})),t},I=function(t,e,n){var r=(0,i.Z)(n,2),a=r[0],o=r[1],u=t.slice();return u[o].splice(a,1,e),u},Q=function(t,e,n){var r=I(t,C(e),n);return j(e)&&T(r,e,n),r},N=function(t,e,n){var r=I(t,C(b.EMPTY),n);if(j(e))for(var a=(0,i.Z)(n,2)[1],o=(0,i.Z)(e.controllQubitIndex,2),u=o[0],c=o[1],s=u;s<=(null!==c&&void 0!==c?c:u);s+=1)r[a].splice(s,1,C(b.EMPTY));return r},G=function(t,e,n,r){if(j(e))return Q(N(t,e,n),e,r);if(w(e))return function(t,e,n,r){var a=(0,i.Z)(n,1)[0],o=(0,i.Z)(r,1)[0],u=e.connectedMultiGate.position,c=(0,i.Z)(u,2),s=c[0],l=t[c[1]][s].item;if(!j(l))throw new Error("Update item is NOT MultiGate type. target:".concat(l.type));var p=l.controllQubitIndex.findIndex((function(t){return t===a})),f=l.controllQubitIndex.map((function(t,e){return e===p?o:t})).sort(Z("asc")),d=I(N(t,l,u),C(l),u);return T(d,l,u,f),d}(t,e,n,r);var a=(0,i.Z)(n,2),o=a[0],u=a[1],c=(0,i.Z)(r,2),s=c[0],l=c[1];return P(t.slice(),[u,o],[l,s])},D=n(52322),V=r.createContext(null),L=function(){return(0,r.useContext)(V)},A=function(t){var e=t.children,n=(0,a.FV)(k),u=(0,i.Z)(n,2),c=u[0],s=u[1],l=(0,a.FV)(E),p=(0,i.Z)(l,2),f=p[0],d=p[1],m=(0,r.useMemo)((function(){return{gateItemsColumnLength:f.length,gateItemsRowLength:f[0].length}}),[f]),h=m.gateItemsColumnLength,v=m.gateItemsRowLength,y=(0,r.useCallback)((function(){v>=5||d((function(t){return t.map((function(t){return[].concat((0,o.Z)(t),[C(b.EMPTY)])}))}))}),[d,v]),g=(0,r.useCallback)((function(t,e){d((function(n){return Q(n,t,e)}))}),[d]),O=(0,r.useCallback)((function(t,e){d((function(n){return N(n,t,e)}))}),[d]),_=(0,r.useCallback)((function(t,e,n){d((function(r){return G(r,t,e,n)}))}),[d]),x=(0,r.useCallback)((function(t,e){d((function(n){return function(t,e,n){return I(t,C(e),n)}(n,t,e)}))}),[d]),j=(0,r.useCallback)((function(){return d([q()])}),[d]),w=(0,r.useMemo)((function(){return{selectedParametricGate:c,gateItems:f,gateItemsColumnLength:h,gateItemsRowLength:v,updateSelectedParametricGate:s,addGateItemsRow:y,addGateItem:g,removeGateItem:O,moveGateItem:_,updateGateItem:x,reset:j}}),[c,f,h,v,s,y,g,O,_,x,j]);return(0,r.useEffect)((function(){console.log(w.gateItems)}),[w.gateItems]),(0,D.jsx)(V.Provider,{value:w,children:e})},B=(0,a.cn)({key:"observableGateItemsAtom",default:[q(M)],dangerouslyAllowMutability:!0}),z=(0,a.cn)({key:"observableCoefficientsState",default:[0],dangerouslyAllowMutability:!0}),Y=(0,a.nZ)({key:"observableeGateItemsState",get:function(t){return(0,t.get)(B)},set:function(t,e){var n=t.get,r=t.set,o=n(z).slice();if(!(e instanceof a.nY))if(e[e.length-1].some((function(t){var e=t.item;return!_(e)})))e.push(q(e[0].length)),o.push(0);else for(var i=e.length-1;i>0;i-=1){if(!e[i-1].every((function(t){var e=t.item;return _(e)})))break;e.pop(),o.pop()}r(z,o),r(B,e)},dangerouslyAllowMutability:!0}),F=function(t,e,n){var r=(0,i.Z)(n,2),a=r[0],o=r[1],u=t.slice();return u[o].splice(a,1,e),u},X=r.createContext(null),U=function(){return(0,r.useContext)(X)},H=function(t){var e=t.children,n=(0,a.FV)(z),u=(0,i.Z)(n,2),c=u[0],s=u[1],l=(0,a.FV)(Y),p=(0,i.Z)(l,2),f=p[0],d=p[1],m=(0,r.useMemo)((function(){return{gateItemsColumnLength:f.length,gateItemsRowLength:f[0].length}}),[f]),h=m.gateItemsColumnLength,b=m.gateItemsRowLength,y=(0,r.useCallback)((function(t,e){s((function(n){var r=n.slice();return r.splice(t,1,e),r}))}),[s]),g=(0,r.useCallback)((function(){b>=5||d((function(t){return t.map((function(t){return[].concat((0,o.Z)(t),[C(v.EMPTY)])}))}))}),[d,b]),O=(0,r.useCallback)((function(t,e){d((function(n){return function(t,e,n){return F(t,C(e),n)}(n,t,e)}))}),[d]),_=(0,r.useCallback)((function(t){d((function(e){return function(t,e){return F(t,C(v.EMPTY),e)}(e,t)}))}),[d]),x=(0,r.useCallback)((function(t,e){d((function(n){return function(t,e,n){var r=(0,i.Z)(e,2),a=r[0],o=r[1],u=(0,i.Z)(n,2),c=u[0],s=u[1];return P(t.slice(),[o,a],[s,c])}(n,t,e)}))}),[d]),j=(0,r.useCallback)((function(){s([0]),d([q()])}),[s,d]),w=(0,r.useMemo)((function(){return{coefficients:c,updateCoefficients:y,gateItems:f,gateItemsColumnLength:h,gateItemsRowLength:b,addGateItemsRow:g,addGateItem:O,removeGateItem:_,moveGateItem:x,reset:j}}),[c,y,f,h,b,g,O,_,x,j]);return(0,r.useEffect)((function(){console.log(w.gateItems)}),[w.gateItems]),(0,D.jsx)(X.Provider,{value:w,children:e})},W=n(59186),K=new(0,W.v.BrowserUIClient)({parametricGateRange:2}),J=r.createContext(null),$=function(t){var e=t.children;return(0,D.jsx)(J.Provider,{value:K,children:e})},tt=n(79520),et=n(28367),nt=n(6897),rt=n(62048),at=n(15923),ot=n(25665),it=n(69825);function ut(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ct(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ut(Object(n),!0).forEach((function(e){(0,u.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ut(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var st=(0,a.cn)({key:"appUIState",default:{isCodeViewTabOpened:!1}}),lt=function(){var t=(0,a.FV)(st),e=(0,i.Z)(t,2),n=e[0],o=e[1];return{appUIState:n,setAppUIState:(0,r.useCallback)((function(t){o((function(e){return ct(ct({},e),t)}))}),[o])}},pt=n(10713),ft=n.n(pt),dt=(0,at.ZP)(rt.Z)({color:"#fff"}),mt=function(){var t=lt().setAppUIState,e=(0,r.useCallback)((function(){t({isCodeViewTabOpened:!0})}),[t]);return(0,D.jsx)(nt.Z,{position:"static",children:(0,D.jsxs)(ot.Z,{variant:"dense",children:[(0,D.jsx)("div",{className:ft().heading,children:(0,D.jsx)(it.Z,{variant:"h6",noWrap:!0,children:"Qulacs Simulator"})}),(0,D.jsxs)(dt,{onClick:e,children:[(0,D.jsx)(et.Z,{}),(0,D.jsx)(it.Z,{variant:"overline",children:"code"})]})]})})},ht=n(92096),vt=function(t,e){return Math.round(t*Math.pow(10,e))/Math.pow(10,e)},bt=function(t,e){return"0000".concat(t.toString(2)).slice(-e)},yt=n(18205),gt=n(80739),Ot=n(55484),_t=n(25556),xt=n(81224),jt=n(3131),wt=n(47857),St=n(24908),Ct=n(11011),qt=n(6884),Mt=n.n(qt),Rt=function(t){var e,n=t.active,r=t.payload;if(n&&null!=r&&r.length>0){var a=r[0].payload;return(0,D.jsxs)("div",{className:Mt().tooltipWrapper,children:[(0,D.jsx)("p",{className:Mt().tooltipLabel,children:a.name}),(0,D.jsxs)("div",{className:Mt().tooltipValue,children:[(0,D.jsx)("p",{className:Mt().tooltipLabel,children:"stateVectorAbsoluted: ".concat(a.stateVectorAbsoluted)}),(0,D.jsx)("p",{className:Mt().tooltipLabel,children:"stateVectorArgument: ".concat(a.stateVectorArgument)}),(0,D.jsx)("p",{className:Mt().tooltipLabel,children:"stateVector: ".concat(a.stateVector.re).concat((e=a.stateVector.im,e>=0?"+".concat(e):e),"i")})]})]})}return null},kt=function(t){var e=t.data;return(0,D.jsx)(yt.h,{width:"100%",height:"100%",children:(0,D.jsxs)(gt.v,{data:e,children:[(0,D.jsx)(Ot.q,{strokeDasharray:"3 3"}),(0,D.jsx)(_t.K,{dataKey:"name",children:(0,D.jsx)(xt._,{value:"Computational basis states",offset:0,position:"insideBottom"})}),(0,D.jsx)(jt.B,{domain:[0,1],children:(0,D.jsx)(xt._,{value:"Amplitude Value",angle:-90,position:"insideBottomLeft"})}),(0,D.jsx)(wt.u,{content:(0,D.jsx)(Rt,{})}),(0,D.jsx)(St.$,{dataKey:"stateVectorAbsoluted",children:e.map((function(t){var e,n=t.name,r=t.stateVectorArgument;return(0,D.jsx)(Ct.b,{fill:(e=r,"hsl(".concat(180*e,", 100%, 70%)"))},"cell-".concat(n))}))})]})})},Et=function(t,e){return t.updateResult===e.updateResult},Pt=r.memo((function(t){var e=t.updateResult,n=L().gateItemsRowLength,a=(0,r.useMemo)((function(){for(var t=[],r=0;r<e.stateVectorAbsoluted.length;r+=1)t.push({name:bt(r,n),stateVector:{re:vt(e.stateVector[r].re,5),im:vt(e.stateVector[r].im,5)},stateVectorAbsoluted:vt(e.stateVectorAbsoluted[r],5),stateVectorArgument:vt(e.stateVectorArgument[r],5)});return t}),[e,n]);return(0,D.jsx)(kt,{data:a})}),Et),Zt=n(90734),Tt=n.n(Zt),It=n(60995),Qt=n(36197),Nt=n(30840),Gt=n(63004),Dt=function(t){var e=t.data,n=t.onRequestChangeParam,a=(0,r.useMemo)((function(){var t;return null===(t=e.find((function(t){return null!=t.currentExpectationValue})))||void 0===t?void 0:t.param}),[e]),o=(0,r.useMemo)((function(){return e.length>0?["auto","auto"]:[0,1]}),[e.length]),i=(0,r.useCallback)((function(t,e){var r=e.payload;null!=(null===r||void 0===r?void 0:r.param)&&n(r.param)}),[n]);return(0,D.jsx)(yt.h,{width:"100%",height:"100%",children:(0,D.jsxs)(It.c,{data:e,children:[(0,D.jsx)(Ot.q,{strokeDasharray:"3 3"}),(0,D.jsx)(_t.K,{dataKey:"param",domain:[0,2],unit:"\u03c0",type:"number",children:(0,D.jsx)(xt._,{value:"Angle",offset:0,position:"insideBottom"})}),(0,D.jsx)(jt.B,{domain:o,children:(0,D.jsx)(xt._,{value:"Expectation Value",angle:-90,position:"insideBottomLeft"})}),(0,D.jsx)(wt.u,{}),(0,D.jsx)(Qt.b,{dataKey:"currentExpectationValue",fill:"#ff7300"}),null!=a&&(0,D.jsx)(Nt.d,{x:a,stroke:"#ff7300"}),(0,D.jsx)(Gt.x,{dataKey:"expectationValue",type:"monotone",dot:!1,activeDot:{onClick:i,r:5}})]})})};function Vt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Lt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Vt(Object(n),!0).forEach((function(e){(0,u.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Vt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var At,Bt,zt=function(t,e){return t.currentExpectationValue===e.currentExpectationValue&&t.parametricExpectedValueResult===e.parametricExpectedValueResult},Yt=r.memo((function(t){var e=t.currentExpectationValue,n=t.parametricExpectedValueResult,a=L(),o=a.gateItems,u=a.selectedParametricGate,c=a.updateGateItem,s=(0,r.useMemo)((function(){for(var t=[],r=n.expectationValueMap,a=function(t,e,n){if(null==e)return null;var r=(0,i.Z)(e,2),a=r[0],o=t[r[1]][a].item;if(!x(o))return null;var u=vt(n,5);return{param:o.param,expectationValue:u,currentExpectationValue:u}}(o,u,e),c=0;c<r.length;c+=1){var s=r[c],l=s.param,p=s.expectationValue;t.push({param:l,expectationValue:vt(p,5)}),null!=a&&(l===a.param?t[t.length-1].currentExpectationValue=a.currentExpectationValue:c<r.length-1&&Tt()(a.param,l,r[c+1].param)&&t.push(a))}return t}),[o,u,e,n]),l=(0,r.useCallback)((function(t){if(null!=u){var e=(0,i.Z)(u,2),n=e[0],r=e[1],a=o[r][n].item;x(a)&&c(Lt(Lt({},a),{},{param:t}),u)}}),[o,u,c]);return(0,D.jsx)(Dt,{data:s,onRequestChangeParam:l})}),zt),Ft=function(t){var e=t.data,n=t.scale,r=void 0===n?"auto":n;return(0,D.jsx)(yt.h,{width:"100%",height:240,children:(0,D.jsxs)(It.c,{data:e,children:[(0,D.jsx)(Ot.q,{strokeDasharray:"3 3"}),(0,D.jsx)(_t.K,{dataKey:"name",children:(0,D.jsx)(xt._,{value:"Computational basis states",offset:0,position:"insideBottom"})}),(0,D.jsx)(jt.B,{yAxisId:"1",domain:["auto","auto"],scale:r,children:(0,D.jsx)(xt._,{value:"Probability Value",angle:-90,position:"insideBottomLeft"})}),(0,D.jsx)(jt.B,{yAxisId:"2",orientation:"right",hide:!0}),(0,D.jsx)(wt.u,{}),(0,D.jsx)(St.$,{dataKey:"samplingMap",yAxisId:"2",fill:"#82ca9d",fillOpacity:"0.4"}),(0,D.jsx)(Gt.x,{type:"linear",dataKey:"probabilityVector",yAxisId:"1",dot:!1})]})})},Xt=n(20406),Ut=n(28526),Ht=n.n(Ut),Wt=n(17952),Kt="circuitInformation",Jt="observableInformation",$t="selectedParametricQuantumGatePosition",te=(At={},(0,u.Z)(At,Kt,{gateItems:[q()]}),(0,u.Z)(At,Jt,{coefficients:[0],gateItems:[q()]}),(0,u.Z)(At,$t,null),"updateResult"),ee="shotResult",ne="parametricExpectedValueResult",re=(Bt={},(0,u.Z)(Bt,te,{expectationValue:0,stateVector:[],stateVectorAbsoluted:[],stateVectorArgument:[],probabilityVector:[],translateCode:""}),(0,u.Z)(Bt,ee,{samplingMap:[]}),(0,u.Z)(Bt,ne,{steps:10,expectationValueMap:[]}),Bt),ae=function(t){var e=t.gateItems.map((function(t){return t.map((function(t){return S(t)?t.item:void 0}))})).filter((function(t){return t.some((function(t){return void 0!==t}))}));return{circuit:e,size:e[0].length}},oe=function(t){var e=t.coefficients;return{observable:t.gateItems.map((function(t,n){return{operators:t.map((function(t){return S(t)?t.item.type:void 0})),coefficient:e[n]}}))}},ie=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:51,n=(0,i.Z)(t,2),r=n[0],a=n[1];return{steps:e,position:{step:a,index:r}}};function ue(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ce(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ue(Object(n),!0).forEach((function(e){(0,u.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ue(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var se=new(0,W.v.BrowserUIClient)({parametricGateRange:2}),le=(0,a.nZ)({key:"clientDataState",get:function(t){var e=t.get,n=e(E),r=e(Y);return{circuitInformation:{gateItems:n},observableInformation:{coefficients:e(z),gateItems:r}}},dangerouslyAllowMutability:!0}),pe=(0,a.cn)({key:"simulatorResultAtom",default:re}),fe=(0,a.nZ)({key:"simulatorResultState",get:function(){var t=(0,Xt.Z)(Ht().mark((function t(e){var n,r,a,o,i,u;return Ht().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.get,r=n(pe),a=n(le),t.next=5,se.update({circuitInformation:ae((c=a).circuitInformation),observableInformation:oe(c.observableInformation)});case 5:if(o=t.sent,null==(i=n(k))){t.next=12;break}return t.next=10,se.requestParametricExpectedValues(ie(i));case 10:return u=t.sent,t.abrupt("return",ce(ce({},r),{},{updateResult:o,parametricExpectedValueResult:u}));case 12:return t.abrupt("return",ce(ce({},r),{},{updateResult:o}));case 13:case"end":return t.stop()}var c}),t)})));return function(e){return t.apply(this,arguments)}}(),set:function(t,e){return(0,t.set)(pe,e)}});function de(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function me(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?de(Object(n),!0).forEach((function(e){(0,u.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):de(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var he=r.createContext(null),ve=function(){return(0,r.useContext)(he)},be=function(t){var e=t.children,n=(0,a.$P)(fe),o=(0,r.useState)(re),i=o[0],u=o[1],c=(0,r.useRef)(),s=(0,r.useMemo)((function(){return"loading"===n.state}),[n.state]),l=(0,r.useCallback)((function(t){u((function(e){return me(me({},e),{},{shotResult:t})}))}),[]);(0,r.useEffect)((function(){n.state!==c.current&&"hasValue"===n.state&&u(n.contents),c.current=n.state}),[n.state]),(0,r.useEffect)((function(){console.log(i)}),[i]);var p=(0,r.useMemo)((function(){return{simulatorResult:i,isLoading:s,updateShotResult:l}}),[i,s,l]);return(0,D.jsx)(he.Provider,{value:p,children:e})},ye=n(30790),ge=n.n(ye),Oe=1e3,_e=(0,at.ZP)(it.Z)({marginRight:"5px"}),xe=(0,at.ZP)(Wt.Z)({width:"60px"}),je=(0,at.ZP)(rt.Z)({marginLeft:"10px"}),we=function(){var t=ve().updateShotResult,e=(0,r.useState)(!1),n=e[0],a=e[1],o=(0,r.useState)(0),i=o[0],u=o[1],c=(0,r.useMemo)((function(){return"number"!==typeof i||n}),[i,n]),s=(0,r.useCallback)((function(t){var e=t.target.value;u(""===e?"":parseInt(e,10))}),[]),l=(0,r.useCallback)((0,Xt.Z)(Ht().mark((function e(){var n;return Ht().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"number"===typeof i){e.next=3;break}return e.abrupt("return");case 3:return a(!0),e.next=6,se.startShot({shot:i});case 6:n=e.sent,t(n),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:return e.prev=13,a(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[0,10,13,16]])}))),[i,t]),p=(0,r.useCallback)((function(){"number"!==typeof i||i<0?u(0):i>Oe&&u(Oe)}),[i]);return(0,D.jsxs)("div",{className:ge().wrapper,children:[(0,D.jsx)(_e,{variant:"caption",children:"Sampling Count:"}),(0,D.jsx)(xe,{value:i,onChange:s,onBlur:p,inputProps:{min:0,max:Oe,step:1,type:"number"}}),(0,D.jsx)(je,{variant:"outlined",color:"primary",disabled:c,onClick:l,children:"Run"})]})},Se=n(88110),Ce=n(11782),qe=(0,at.ZP)(it.Z)({marginRight:"5px"}),Me=function(t,e){return t.value===e.value},Re=r.memo((function(t){var e=t.value,n=t.onChange,a=(0,r.useCallback)((function(t){var e=t.target.value;(function(t){return"string"===typeof t})(e)&&n(e)}),[n]);return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(qe,{variant:"caption",children:"Scale:"}),(0,D.jsxs)(Ce.Z,{variant:"standard",value:e,onChange:a,children:[(0,D.jsx)(Se.Z,{value:"auto",children:"Auto"}),(0,D.jsx)(Se.Z,{value:"log",children:"Log"})]})]})}),Me),ke=n(95533),Ee=n.n(ke),Pe=function(t){var e=t.data,n=(0,r.useState)("auto"),a=n[0],o=n[1];return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(Ft,{data:e,scale:a}),(0,D.jsxs)("div",{className:Ee().control,children:[(0,D.jsx)(Re,{value:a,onChange:o}),(0,D.jsx)(we,{})]})]})},Ze=function(t,e){return t.updateResult===e.updateResult&&t.shotResult===e.shotResult},Te=r.memo((function(t){var e=t.updateResult,n=t.shotResult,a=L().gateItemsRowLength,o=(0,r.useMemo)((function(){for(var t=[],r=0;r<e.stateVectorAbsoluted.length;r+=1)t.push({name:bt(r,a),probabilityVector:vt(e.probabilityVector[r],5),samplingMap:n.samplingMap[r]});return t}),[e,n,a]);return(0,D.jsx)(Pe,{data:o})}),Ze),Ie=n(69350),Qe=n.n(Ie),Ne=(0,at.ZP)(ht.Z)({height:"100%",padding:"8px 15px",overflowY:"auto"}),Ge=function(){var t=ve().simulatorResult,e=t.updateResult,n=t.parametricExpectedValueResult,r=t.shotResult;return(0,D.jsxs)("div",{className:Qe().wrapper,children:[(0,D.jsx)("div",{className:Qe().tab,children:(0,D.jsx)(Ne,{variant:"outlined",children:(0,D.jsx)(Pt,{updateResult:e})})}),(0,D.jsx)("div",{className:Qe().tab,children:(0,D.jsx)(Ne,{variant:"outlined",children:(0,D.jsx)(Te,{updateResult:e,shotResult:r})})}),(0,D.jsx)("div",{className:Qe().tab,children:(0,D.jsx)(Ne,{variant:"outlined",children:(0,D.jsx)(Yt,{currentExpectationValue:e.expectationValue,parametricExpectedValueResult:n})})})]})},De=n(13091),Ve=n(63898),Le=n(53712),Ae=n.n(Le);n(71109),n(90389),n(65622),n(17559);Ae().manual=!0;var Be=Ae(),ze=function(t){var e=t.code;return(0,r.useEffect)((function(){Be.highlightAll()}),[e]),(0,D.jsx)("pre",{className:"line-numbers",children:(0,D.jsx)("code",{className:"language-python","data-prismjs-copy":"copy",children:e})})},Ye=(0,Ve.Z)({paper:{backgroundColor:"#272822"}})(De.Z),Fe=function(t,e){return t.isOpened===e.isOpened},Xe=r.memo((function(t){var e=t.isOpened,n=t.translateCode,r=t.onRequestClose;return(0,D.jsx)(Ye,{onClose:r,open:e,children:(0,D.jsx)(ze,{code:n})})}),Fe),Ue=function(){var t=lt(),e=t.appUIState,n=t.setAppUIState,a=ve().simulatorResult.updateResult,o=(0,r.useCallback)((function(){n({isCodeViewTabOpened:!1})}),[n]);return(0,D.jsx)(Xe,{isOpened:e.isCodeViewTabOpened,translateCode:a.translateCode,onRequestClose:o})},He=n(72779),We=n.n(He),Ke=n(74974),Je=function(t){var e=t.onClick;return(0,D.jsx)(rt.Z,{variant:"outlined",size:"small",startIcon:(0,D.jsx)(Ke.Z,{}),onClick:e,children:"Reset"})},$e=function(t){var e,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{async:!0,onLoad:null};if(null==document.querySelector('script[src="'.concat(t,'"]'))){var a=document,o=a.head,i=document.createElement("script");i.src=t,i.async=null===(e=r.async)||void 0===e||e,i.onload=null!==(n=r.onLoad)&&void 0!==n?n:null,o.appendChild(i)}},tn=function(t,e){return t.coefficients===e.coefficients&&t.itemMatrix===e.itemMatrix},en=r.memo((function(t){var e=t.coefficients,n=t.itemMatrix,a=(0,r.useState)(!1),o=a[0],i=a[1],u=(0,r.useRef)(null),c=(0,r.useMemo)((function(){return n.map((function(t,n){var r=e[n],a=t.reduce((function(t,e,n){return"empty"!==e.item.type&&t.push("".concat(e.item.type.toUpperCase(),"_").concat(n)),t}),[]);return 0===a.length||0===r?"":"".concat(function(t,e){return t<0?"-":0===e?"":"+"}(r,n)).concat(Math.abs(r)).concat(a.join(""))})).join("")}),[e,n]);return(0,r.useEffect)((function(){var t=function(){var t=(0,Xt.Z)(Ht().mark((function t(){return Ht().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!o||null==window.MathJax||null==u.current){t.next=3;break}return t.next=3,window.MathJax.typesetPromise([u.current]);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}),[c,o]),(0,r.useEffect)((function(){var t=function(){var t=(0,Xt.Z)(Ht().mark((function t(){return Ht().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:$e("https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js",{onLoad:function(){i(!0)}});case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}),[]),(0,D.jsx)("div",{ref:u,children:"$H=".concat(c,"$")})}),tn),nn="#2196f3",rn="#e91e63",an="#673ab7",on="draggable_quantum_gate",un="droppable_quantum_gate",cn="droppable_multi_quantum_gate",sn="draggable_observable_gate",ln="droppable_observable_gate",pn="draggable_control_qubit_gate",fn=n(23435),dn=n(93553),mn=n(56720),hn=n.n(mn),vn=(0,at.ZP)(it.Z)({fontSize:"1rem"}),bn=r.forwardRef((function(t,e){var n,a=t.gateType,o=t.isDragging,i=t.color,c=t.canDrop,s=void 0!==c&&c,l=t.parametricValue,p=(0,r.useMemo)((function(){return"cnot"===a||"ccnot"===a}),[a]),f=(0,r.useMemo)((function(){return null!=l?"(".concat(l,")"):null}),[l]),d=(0,r.useMemo)((function(){return"control_qubit"===a?null:p?s?(0,D.jsx)(dn.Z,{}):(0,D.jsx)(vn,{children:a.toUpperCase()}):(0,D.jsx)(it.Z,{children:a.toUpperCase()})}),[a,s,p]);return(0,D.jsxs)("div",{className:We()(hn().wrapper,(n={},(0,u.Z)(n,hn().isDragging,o),(0,u.Z)(n,hn().multiGate,s&&p),(0,u.Z)(n,hn().controlQubitGate,"control_qubit"===a),n)),style:{backgroundColor:i},ref:e,children:[d,null!=l&&(0,D.jsx)("div",{className:hn().parametricValue,children:f})]})})),yn=n(41755),gn=n.n(yn),On=function(t){var e=t.gate,n=t.type,a=t.color,o=function(t){var e=t.gate,n=t.type,a=(0,r.useRef)(null),o=(0,fn.c)((function(){return{type:n,item:{gate:e,type:n},collect:function(t){return{isDragging:t.isDragging()}}}}),[e,n]),u=(0,i.Z)(o,2),c=u[0].isDragging;return(0,u[1])(a),{ref:a,isDragging:c}}({gate:e,type:n}),u=o.ref,c=o.isDragging;return(0,D.jsx)("div",{className:gn().wrapper,children:(0,D.jsx)(bn,{ref:u,gateType:e.type,color:a,isDragging:c})})},_n=n(33502),xn=n.n(_n),jn=function(){return(0,D.jsx)("div",{className:xn().wrapper,children:Object.values(f).map((function(t){return(0,D.jsx)("div",{className:xn().item,children:(0,D.jsx)(On,{gate:t,color:nn,type:sn})},t.type)}))})},wn=n(27508),Sn=n(85801),Cn=function(){var t=L().addGateItemsRow,e=U().addGateItemsRow,n=(0,r.useCallback)((function(){t(),e()}),[t,e]);return(0,D.jsx)(Sn.Z,{onClick:n,children:(0,D.jsx)(wn.Z,{})})},qn=n(62840),Mn=n.n(qn);function Rn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function kn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Rn(Object(n),!0).forEach((function(e){(0,u.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Rn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var En=function(t){var e=t.gateItemsColumnLength,n=t.gateItemsRowLength,a=(0,r.useMemo)((function(){return n>=5}),[n]),o=(0,r.useMemo)((function(){return new Array(n).fill("").map((function(t,e){return e+1}))}),[n]);return(0,D.jsx)(D.Fragment,{children:o.map((function(t){var o={gridRow:t};return(0,D.jsxs)(r.Fragment,{children:[(0,D.jsxs)("div",{className:Mn().label,style:o,children:[(0,D.jsxs)("div",{children:[(0,D.jsx)("span",{children:"q"}),(0,D.jsx)("span",{className:Mn().labelIndex,children:t-1})]}),t===n&&!a&&(0,D.jsx)("div",{className:Mn().addButton,children:(0,D.jsx)(Cn,{})})]}),(0,D.jsx)("div",{className:Mn().line,style:kn(kn({},o),{},{gridColumn:"2 / ".concat(2+e)}),"aria-hidden":"true"})]},t)}))})};function Pn(t){throw new Error('"'.concat(t,'" is Unexpected value. Should have been never.'))}function Zn(t,e){if(null==t){var n=null!==e&&void 0!==e?e:"Expected 'value' to be defined, but received ".concat(t);throw new Error(n)}}var Tn=n(73510),In=n.n(Tn),Qn=n(44715),Nn=n(35635),Gn=n(40436),Dn=n.n(Gn),Vn={x:null,y:null},Ln=function(t){var e=t.menuItems,n=t.children,a=(0,r.useState)(Vn),o=a[0],i=a[1],u=(0,r.useCallback)((function(t){t.preventDefault(),i({x:t.clientX-2,y:t.clientY-4})}),[]),c=(0,r.useCallback)((function(){i(Vn)}),[]),s=(0,r.useCallback)((function(t){return function(e){t(e),c()}}),[c]);return(0,D.jsxs)("div",{className:Dn().wrapper,onContextMenu:u,children:[n,(0,D.jsx)(Nn.Z,{keepMounted:!0,open:null!=o.y,onClose:c,anchorReference:"anchorPosition",anchorPosition:null!=o.y&&null!=o.x?{top:o.y,left:o.x}:void 0,children:e.map((function(t){var e=t.text,n=t.onClick;return(0,D.jsx)(Se.Z,{onClick:s(n),children:e},e)}))})]})},An=function(t){var e=t.gate,n=t.position,a=t.type,u=t.color,c=t.menuItems,s=void 0===c?[]:c,l=t.onRequestMoveGate,p=t.onRequestRemoveGate,f=function(t){var e=t.accept,n=t.gate,a=t.position,o=t.type,u=t.onDrop,c=(0,r.useRef)(null),s=(0,Qn.L)({accept:e,drop:u}),l=(0,i.Z)(s,2)[1],p=(0,fn.c)((function(){return{type:o,item:{gate:n,position:a,type:o},collect:function(t){return{isDragging:t.isDragging()}}}}),[n,a,o]),f=(0,i.Z)(p,2),d=f[0].isDragging;return(0,f[1])(l(c)),{ref:c,isDragging:d}}({gate:e,position:n,type:a,accept:[a],onDrop:function(t){switch(t.type){case"droppable_quantum_gate":case"droppable_observable_gate":l(t,n);break;case"droppable_multi_quantum_gate":break;default:Pn(t.type)}}}),d=f.ref,m=f.isDragging,h=(0,r.useMemo)((function(){return function(t){return"rx"===t.type||"ry"===t.type||"rz"===t.type}(e)?e.param:void 0}),[e]),v=(0,r.useCallback)((function(t){t.stopPropagation(),p(e,n)}),[e,n,p]),b=(0,r.useMemo)((function(){return[].concat((0,o.Z)(s),[{text:"Delete Gate",onClick:v}])}),[s,v]);return(0,D.jsx)(Ln,{menuItems:b,children:(0,D.jsx)(bn,{ref:d,gateType:e.type,color:u,isDragging:m,parametricValue:h,canDrop:!0})})},Bn=n(99643),zn=n.n(Bn),Yn=function(t){var e,n=t.position,a=t.onRequestAddGate,o=t.onRequestMoveGate,c=(0,Qn.L)({accept:[sn,ln],drop:function(t){switch(t.type){case"draggable_observable_gate":a(t,n);break;case"droppable_observable_gate":o(t,n);break;default:Pn(t.type)}},collect:function(t){return{isOver:t.isOver(),canDrop:t.canDrop()}}}),s=(0,i.Z)(c,2),l=s[0],p=l.isOver,f=l.canDrop,d=s[1],m=(0,r.useMemo)((function(){return p&&f}),[p,f]);return(0,D.jsx)("div",{ref:d,className:We()(zn().wrapper,(e={},(0,u.Z)(e,zn().isActive,m),(0,u.Z)(e,zn().canDrop,!m&&f),e))})},Fn=function(t){var e=t.gate,n=t.position,a=t.onRequestAddGate,o=t.onRequestMoveGate,i=t.onRequestRemoveGate,u=(0,r.useMemo)((function(){switch(e.type){case"empty":return(0,D.jsx)(Yn,{position:n,onRequestAddGate:a,onRequestMoveGate:o});case"x":case"y":case"z":return(0,D.jsx)(An,{gate:e,position:n,type:ln,color:nn,onRequestMoveGate:o,onRequestRemoveGate:i});default:return Pn(e)}}),[e,n,a,o,i]);return(0,D.jsx)(D.Fragment,{children:u})},Xn=function(t,e){return{gridRow:t+1,gridColumn:e+1}},Un=function(t,e){return t.itemMatrix===e.itemMatrix},Hn=r.memo((function(t){var e=t.itemMatrix,n=U(),a=n.gateItemsColumnLength,o=n.gateItemsRowLength,i=n.addGateItem,u=n.moveGateItem,c=n.removeGateItem,s=(0,r.useCallback)((function(t,e){console.log("add",t,e),i(t.gate,e)}),[]),l=(0,r.useCallback)((function(t,e){console.log("move",t,e);var n=t.position;Zn(n),u(n,e)}),[]),p=(0,r.useCallback)((function(t,e){console.log("remove",t,e),c(e)}),[]);return(0,D.jsxs)("div",{className:In().wrapper,children:[(0,D.jsx)(En,{gateItemsColumnLength:a,gateItemsRowLength:o}),e.map((function(t,e){return(0,D.jsx)(r.Fragment,{children:t.map((function(t,n){return(0,D.jsx)("div",{className:In().gateCell,style:Xn(n,e+1),children:(0,D.jsx)(Fn,{gate:t.item,position:[n,e],onRequestAddGate:s,onRequestMoveGate:l,onRequestRemoveGate:p})},t.id)}))},e)}))]})}),Un),Wn=n(82269),Kn=n(48760),Jn=["value","onChange"];function $n(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}var tr=function(t,e){return t.value===e.value},er=r.memo((function(t){var e=t.value,n=t.onChange,a=(0,Wn.Z)(t,Jn),o=(0,r.useState)(e),i=o[0],c=o[1],s=(0,r.useState)(0),l=s[0],p=s[1],f=(0,r.useCallback)((function(t){var e=t.currentTarget.value;c(""===e?"":parseFloat(e))}),[]),d=(0,r.useCallback)((function(){"number"!==typeof i&&c(0)}),[i]);return(0,Kn.Z)((function(){p(i)}),1e3,[i]),(0,r.useEffect)((function(){"number"===typeof l&&n(l)}),[l,n]),(0,D.jsx)(Wt.Z,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?$n(Object(n),!0).forEach((function(e){(0,u.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$n(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({value:i,onChange:f,onBlur:d},a))}),tr),nr=n(70865),rr=n.n(nr),ar=function(t,e){return t.coefficients.length===e.coefficients.length},or=r.memo((function(t){var e=t.coefficients,n=t.onChange,a=(0,r.useCallback)((function(t){return function(e){n(t,e)}}),[n]);return(0,D.jsx)("div",{className:rr().wrapper,children:e.map((function(t,e){return(0,D.jsx)("div",{className:rr().item,children:(0,D.jsx)(er,{type:"number",value:t,inputProps:{step:"0.01"},onChange:a(e),fullWidth:!0})},e)}))})}),ar),ir=n(25377),ur=n.n(ir),cr=function(){var t=U(),e=t.coefficients,n=t.gateItems,r=t.updateCoefficients,a=t.reset;return(0,D.jsxs)("div",{className:ur().wrapper,children:[(0,D.jsxs)("div",{className:ur().heading,children:[(0,D.jsx)(it.Z,{variant:"overline",children:"Observable"}),(0,D.jsx)(Je,{onClick:a})]}),(0,D.jsx)("div",{className:ur().collections,children:(0,D.jsx)(jn,{})}),(0,D.jsxs)("div",{className:ur().composer,children:[(0,D.jsx)(or,{coefficients:e,onChange:r}),(0,D.jsx)(Hn,{itemMatrix:n})]}),(0,D.jsx)(en,{coefficients:e,itemMatrix:n})]})},sr=n(46983),lr=n.n(sr),pr=function(){return(0,D.jsxs)("div",{className:lr().wrapper,children:[Object.values(d).map((function(t){return(0,D.jsx)("div",{className:lr().item,children:(0,D.jsx)(On,{gate:t,color:nn,type:on})},t.type)})),Object.values(m).map((function(t){return(0,D.jsx)("div",{className:lr().item,children:(0,D.jsx)(On,{gate:t,color:rn,type:on})},t.type)})),Object.values(h).map((function(t){return(0,D.jsx)("div",{className:lr().item,children:(0,D.jsx)(On,{gate:t,color:an,type:on})},t.type)}))]})},fr=n(96258),dr=n.n(fr),mr=n(34909),hr=n.n(mr),vr=["gate","position"];function br(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function yr(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?br(Object(n),!0).forEach((function(e){(0,u.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):br(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var gr=function(t){var e=t.gate,n=t.position,a=(0,Wn.Z)(t,vr),o=(0,r.useMemo)((function(){return j(e)?e.controllQubitIndex:[]}),[e]),u=(0,r.useCallback)((function(t){var e=(0,i.Z)(n,1)[0];return{style:{height:"".concat(50*(Math.abs(e-t)-1)+20,"px")},"data-direction":e>t?"upper":"lower"}}),[n]);return(0,D.jsxs)("div",{className:hr().wrapper,children:[o.map((function(t){return(0,D.jsx)("div",yr(yr({className:hr().connectedLine},u(t)),{},{"aria-hidden":!0}),t)})),(0,D.jsx)(An,yr({gate:e,position:n,type:cn,color:an},a))]})},Or=n(9225),_r=n.n(Or),xr=function(t){var e=t.gate,n=t.position,a=t.onRequestMoveGate,o=t.onRequestRemoveGate,c=Wr(),s=L(),l=s.selectedParametricGate,p=s.updateSelectedParametricGate,f=(0,r.useMemo)((function(){return null!=l&&function(t,e){var n=(0,i.Z)(t,2),r=n[0],a=n[1],o=(0,i.Z)(e,2),u=o[0],c=o[1];return r===u&&a===c}(n,l)}),[n,l]),d=(0,r.useMemo)((function(){return[{text:"Edit Gate",onClick:function(t){t.stopPropagation(),c(e,n)}}]}),[c,e,n]),m=(0,r.useCallback)((function(){p(n)}),[p,n]),h=(0,r.useCallback)((function(t,e){p(e),a(t,e)}),[p,a]),v=(0,r.useCallback)((function(t,e){p(null),o(t,e)}),[p,o]);return(0,D.jsx)("div",{className:We()(_r().wrapper,(0,u.Z)({},_r().isSelected,f)),role:"button",tabIndex:-1,onClick:m,children:(0,D.jsx)(An,{gate:e,position:n,type:un,color:rn,menuItems:d,onRequestMoveGate:h,onRequestRemoveGate:v})})},jr=n(33291),wr=n.n(jr);function Sr(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}var Cr=function(t,e){var n=(0,i.Z)(e,2),r=n[0],a=t[n[1]].reduce((function(t,e,n){var r=e.item;return j(r)&&t.push(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Sr(Object(n),!0).forEach((function(e){(0,u.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Sr(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({index:n},r)),t}),[]);return 0===a.length||a.every((function(t){return t.controllQubitIndex.every((function(e){return t.index>e?!Tt()(r,e,t.index):!Tt()(r,t.index,e)}))}))},qr=function(t){var e,n=t.position,a=t.onRequestAddGate,o=t.onRequestMoveGate,c=L().gateItems,s=(0,r.useCallback)((function(t){var e=t.gate;return!!Cr(c,n)&&(j(e)?function(t,e,n){var r=(0,i.Z)(n,2),a=r[0],o=t[r[1]],u=function(t){return t.every((function(t){var e;return"empty"===(null===(e=o[t])||void 0===e?void 0:e.item.type)}))},c=new Array(e.size-1).fill(""),s=c.map((function(t,e){return a-(e+1)})),l=c.map((function(t,e){return a+(e+1)}));return u(s)||u(l)||"ccnot"===e.type&&u([a-1,a+1])}(c,e,n):!w(e)||function(t,e,n){var r=(0,i.Z)(n,2),a=r[0],o=r[1],u=(0,i.Z)(e.connectedMultiGate.position,2),c=u[0],s=u[1];if(s!==o)return!1;var l=t[s];return(a>c?l.slice(c+1,a+1):l.slice(a,c)).every((function(t){var e=t.item;return _(e)||w(e)}))}(c,e,n))}),[c,n]),l=(0,Qn.L)({accept:[on,pn,un,cn],canDrop:s,drop:function(t){switch(t.type){case"draggable_quantum_gate":a(t,n);break;case"draggable_control_qubit_gate":case"droppable_quantum_gate":case"droppable_multi_quantum_gate":o(t,n);break;default:Pn(t.type)}},collect:function(t){return{isOver:t.isOver(),canDrop:t.canDrop()}}}),p=(0,i.Z)(l,2),f=p[0],d=f.isOver,m=f.canDrop,h=p[1],v=(0,r.useMemo)((function(){return d&&m}),[d,m]);return(0,D.jsx)("div",{ref:h,className:We()(wr().wrapper,(e={},(0,u.Z)(e,wr().isActive,v),(0,u.Z)(e,wr().canDrop,!v&&m),e))})},Mr=n(14735),Rr=n.n(Mr),kr=function(t){var e=t.gate,n=t.position,a=(0,r.useRef)(null),o=(0,fn.c)((function(){return{type:pn,item:{gate:e,position:n,type:pn},collect:function(t){return{isDragging:t.isDragging()}}}}),[e,n]),u=(0,i.Z)(o,2),c=u[0].isDragging;return(0,u[1])(a),(0,D.jsx)("div",{className:Rr().wrapper,children:(0,D.jsx)(bn,{ref:a,gateType:e.type,color:"transparent",isDragging:c})})},Er=function(t){var e=t.gate,n=t.position,a=t.onRequestAddGate,o=t.onRequestMoveGate,i=t.onRequestRemoveGate,u=(0,r.useMemo)((function(){switch(e.type){case"empty":return(0,D.jsx)(qr,{position:n,onRequestAddGate:a,onRequestMoveGate:o});case"control_qubit":return(0,D.jsx)(kr,{gate:e,position:n});case"x":case"y":case"z":case"h":case"t":case"s":return(0,D.jsx)(An,{gate:e,position:n,type:un,color:nn,onRequestMoveGate:o,onRequestRemoveGate:i});case"rx":case"ry":case"rz":return(0,D.jsx)(xr,{gate:e,position:n,onRequestMoveGate:o,onRequestRemoveGate:i});case"cnot":case"ccnot":return(0,D.jsx)(gr,{gate:e,position:n,onRequestMoveGate:o,onRequestRemoveGate:i});default:return Pn(e)}}),[e,n,a,o,i]);return(0,D.jsx)(D.Fragment,{children:u})},Pr=function(t,e){return{gridRow:t+1,gridColumn:e+1}},Zr=function(t,e){return t.itemMatrix===e.itemMatrix},Tr=r.memo((function(t){var e=t.itemMatrix,n=L(),a=n.gateItemsColumnLength,o=n.gateItemsRowLength,i=n.addGateItem,u=n.removeGateItem,c=n.moveGateItem,s=(0,r.useCallback)((function(t,e){console.log("add",t,e),i(t.gate,e)}),[]),l=(0,r.useCallback)((function(t,e){console.log("move",t,e);var n=t.gate,r=t.position;Zn(r),c(n,r,e)}),[]),p=(0,r.useCallback)((function(t,e){console.log("remove",t,e),u(t,e)}),[]);return(0,D.jsxs)("div",{className:dr().wrapper,children:[(0,D.jsx)(En,{gateItemsColumnLength:a,gateItemsRowLength:o}),e.map((function(t,e){return(0,D.jsx)(r.Fragment,{children:t.map((function(t,n){return(0,D.jsx)("div",{className:dr().gateCell,style:Pr(n,e+1),children:(0,D.jsx)(Er,{gate:t.item,position:[n,e],onRequestAddGate:s,onRequestMoveGate:l,onRequestRemoveGate:p})},t.id)}))},e)}))]})}),Zr),Ir=n(5971),Qr=n(6060),Nr=n(35936),Gr=n(58913),Dr=n(97910),Vr=n.n(Dr),Lr=(0,at.ZP)(Wt.Z)({minWidth:"80px"}),Ar=function(t){var e=t.initialValue,n=t.onChange,a=(0,r.useState)(e),o=a[0],i=a[1],u=(0,r.useCallback)((function(t,e){"number"===typeof e&&i(e)}),[]),c=(0,r.useCallback)((function(t){var e=t.target.value;i(""===e?"":parseFloat(e))}),[]),s=(0,r.useCallback)((function(){"number"!==typeof o||o<0?i(0):o>2&&i(2)}),[o]);return(0,r.useEffect)((function(){"number"===typeof o&&n(o)}),[o,n]),(0,D.jsxs)("div",{className:Vr().wrapper,children:[(0,D.jsx)(Gr.ZP,{min:0,max:2,step:.01,size:"small",value:"number"===typeof o?o:0,onChange:u}),(0,D.jsx)("div",{className:Vr().inputWrapper,children:(0,D.jsx)(Lr,{value:o,onChange:c,onBlur:s,inputProps:{min:0,max:2,step:.01,type:"number"}})})]})};function Br(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function zr(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Br(Object(n),!0).forEach((function(e){(0,u.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Br(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Yr=function(t,e){return t.isOpened===e.isOpened},Fr=r.memo((function(t){var e=t.isOpened,n=t.gateItem,a=t.onClose,o=n.gate,i=n.position,u=L().updateGateItem,c=(0,r.useState)(o.param),s=c[0],l=c[1],p=(0,r.useCallback)((function(t){l(t)}),[]),f=(0,r.useCallback)((function(){u(zr(zr({},o),{},{param:s}),i),a()}),[o,i,s,a,u]);return(0,D.jsxs)(De.Z,{open:e,onClose:a,children:[(0,D.jsx)(Nr.Z,{children:"Edit ".concat(o.type.toUpperCase()," Gate")}),(0,D.jsx)(Qr.Z,{children:(0,D.jsx)(Ar,{initialValue:o.param,onChange:p})}),(0,D.jsxs)(Ir.Z,{children:[(0,D.jsx)(rt.Z,{onClick:a,color:"primary",children:"Cancel"}),(0,D.jsx)(rt.Z,{onClick:f,color:"primary",autoFocus:!0,children:"Save"})]})]})}),Yr),Xr=n(73818),Ur=n.n(Xr),Hr=r.createContext(null),Wr=function(){return(0,r.useContext)(Hr)},Kr=function(){var t=function(){var t=(0,r.useState)(!1),e=t[0],n=t[1],a=(0,r.useState)(),o=a[0],i=a[1];return{isOpened:e,gateItem:o,open:(0,r.useCallback)((function(t,e){i({gate:t,position:e}),n(!0)}),[]),close:(0,r.useCallback)((function(){n(!1)}),[])}}(),e=L(),n=e.gateItems,a=e.reset;return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)("div",{className:Ur().wrapper,children:[(0,D.jsxs)("div",{className:Ur().heading,children:[(0,D.jsx)(it.Z,{variant:"overline",children:"Quantum Circuit"}),(0,D.jsx)(Je,{onClick:a})]}),(0,D.jsx)("div",{className:Ur().collections,children:(0,D.jsx)(pr,{})}),(0,D.jsx)(Hr.Provider,{value:t.open,children:(0,D.jsx)("div",{className:Ur().composer,children:(0,D.jsx)(Tr,{itemMatrix:n})})})]}),null!=t.gateItem&&(0,D.jsx)(Fr,{isOpened:t.isOpened,gateItem:t.gateItem,onClose:t.close})]})},Jr=n(87687),$r=n(66403),ta=function(t){var e=t.children;return(0,D.jsx)(Jr.W,{backend:$r.PD,children:e})},ea=n(27835),na=n.n(ea),ra=(0,at.ZP)(ht.Z)({height:"100%",padding:"8px 15px",overflow:"auto"}),aa=function(){return(0,D.jsx)("div",{className:na().wrapper,children:(0,D.jsxs)(ta,{children:[(0,D.jsx)("div",{className:We()(na().tab,na().circuitTab),children:(0,D.jsx)(ra,{variant:"outlined",children:(0,D.jsx)(Kr,{})})}),(0,D.jsx)("div",{className:We()(na().tab,na().observableTab),children:(0,D.jsx)(ra,{variant:"outlined",children:(0,D.jsx)(cr,{})})})]})})},oa=n(96412),ia=n(13089),ua=n(80304),ca=n(94214),sa=n(48200);function la(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,sa.Z)(t);if(e){var a=(0,sa.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,ca.Z)(this,n)}}var pa=function(t){(0,ua.Z)(n,t);var e=la(n);function n(t){var r;return(0,oa.Z)(this,n),(r=e.call(this,t)).state={hasError:!1},r}return(0,ia.Z)(n,[{key:"componentDidCatch",value:function(t,e){var n=this.props.errorHandler;console.error(t),null!=n&&n(t,e)}},{key:"render",value:function(){return(0,this.props.children)(this.state.hasError)}}],[{key:"getDerivedStateFromError",value:function(){return{hasError:!0}}}]),n}(r.Component),fa=n(150),da=n.n(fa),ma=function(){return(0,D.jsx)(pa,{children:function(){return(0,D.jsxs)(tt.wT,{children:[(0,D.jsx)(mt,{}),(0,D.jsxs)("div",{className:da().wrapper,children:[(0,D.jsx)("div",{className:da().uiState,children:(0,D.jsx)(aa,{})}),(0,D.jsxs)(be,{children:[(0,D.jsx)("div",{className:da().charts,children:(0,D.jsx)(Ge,{})}),(0,D.jsx)(Ue,{})]})]})]})}})},ha=function(){return(0,D.jsx)(a.Wh,{children:(0,D.jsx)(A,{children:(0,D.jsx)(H,{children:(0,D.jsx)($,{children:(0,D.jsx)(ma,{})})})})})}},8738:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(8631)}])},6884:function(t){t.exports={tooltipWrapper:"AmplitudesChart_tooltipWrapper__TDeOL",tooltipLabel:"AmplitudesChart_tooltipLabel__hXlqF",tooltipValue:"AmplitudesChart_tooltipValue__7ddKW"}},99643:function(t){t.exports={wrapper:"EmptyGate_wrapper__HJYW6",isActive:"EmptyGate_isActive__Qj3_V",canDrop:"EmptyGate_canDrop__07pxm"}},33502:function(t){t.exports={wrapper:"GateCollections_wrapper__qhUsD",item:"GateCollections_item__TTKX_"}},73510:function(t){t.exports={wrapper:"GateComposer_wrapper__Wpy1N",gateCell:"GateComposer_gateCell__M3_49"}},70865:function(t){t.exports={wrapper:"GateInput_wrapper__mq7EK",item:"GateInput_item__bUwNV"}},25377:function(t){t.exports={wrapper:"ObservableTab_wrapper__9OQDX",heading:"ObservableTab_heading__T6icl",collections:"ObservableTab_collections__ywOPc",composer:"ObservableTab_composer__C1Ijy"}},10713:function(t){t.exports={heading:"AppHeader_heading__W1R2i"}},69350:function(t){t.exports={wrapper:"ChartTabContainer_wrapper__yBkwl",tab:"ChartTabContainer_tab__bl9dv"}},27835:function(t){t.exports={wrapper:"UIStateTabContainer_wrapper___G6H6",tab:"UIStateTabContainer_tab__fDDXM",circuitTab:"UIStateTabContainer_circuitTab__ZkGud",observableTab:"UIStateTabContainer_observableTab__jm1WI"}},95533:function(t){t.exports={control:"ChartContainer_control__ZBDdw"}},30790:function(t){t.exports={wrapper:"RunButton_wrapper__O3LjR"}},34909:function(t){t.exports={wrapper:"DroppableMultiGate_wrapper__YLar9",connectedLine:"DroppableMultiGate_connectedLine__aIc7d"}},9225:function(t){t.exports={wrapper:"DroppableParametricGate_wrapper__3piGk",isSelected:"DroppableParametricGate_isSelected__95rgG"}},33291:function(t){t.exports={wrapper:"EmptyGate_wrapper__GTPVD",isActive:"EmptyGate_isActive__jLo_F",canDrop:"EmptyGate_canDrop___30Pi"}},14735:function(t){t.exports={wrapper:"QubitGate_wrapper__jmJz1"}},46983:function(t){t.exports={wrapper:"CircuitGateCollections_wrapper__LsMrX",item:"CircuitGateCollections_item__KMtYg"}},96258:function(t){t.exports={wrapper:"CircuitGateComposer_wrapper__J523M",gateCell:"CircuitGateComposer_gateCell__rf_M4"}},97910:function(t){t.exports={wrapper:"ParametricValueSlider_wrapper__F1Myu",inputWrapper:"ParametricValueSlider_inputWrapper__74f3E"}},73818:function(t){t.exports={wrapper:"QuantumCircuitTab_wrapper__FYqSg",heading:"QuantumCircuitTab_heading__EckJj",collections:"QuantumCircuitTab_collections__YMGwe",composer:"QuantumCircuitTab_composer__ZPqxz"}},40436:function(t){t.exports={wrapper:"ContextMenu_wrapper___4z38"}},56720:function(t){t.exports={wrapper:"Gate_wrapper__pyKuG",isDragging:"Gate_isDragging__TOZcF",parametricValue:"Gate_parametricValue__ohPcl",multiGate:"Gate_multiGate__WPF31",controlQubitGate:"Gate_controlQubitGate__Fyl8t"}},41755:function(t){t.exports={wrapper:"DraggableGate_wrapper__WFCSu"}},62840:function(t){t.exports={label:"GateLabels_label__hethD",labelIndex:"GateLabels_labelIndex__obGm0",line:"GateLabels_line__biYo7",addButton:"GateLabels_addButton__A_V_e"}},150:function(t){t.exports={wrapper:"Home_wrapper__1h3zx",uiState:"Home_uiState__SjV35",charts:"Home_charts__Jfxme"}},59186:function(t,e){(()=>{"use strict";var t={799:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});e.QuantumState=function(t){}},914:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0});var r=n(799);e.QuantumState=r.QuantumState},234:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0});var r=n(412),a=n(984),o=n(46),i=function(){function t(t){this._quantumStateGenerator=t.quantumStateGenerator,this._mapQubitQuantumState=[]}return t.prototype.createNewQubit=function(t,e){var n=this._quantumStateGenerator(e.value);this._mapQubitQuantumState.push({qubit:t,bitId:0,quantumState:n})},t.prototype.requestOperation=function(t){for(var e=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i,u=n.map((function(t){return e._lookupQubitQuantumStateMapElementFromQubit(t)}));switch(t){case a.QuantumOperationTypes.X:case a.QuantumOperationTypes.Y:case a.QuantumOperationTypes.Z:case a.QuantumOperationTypes.S:case a.QuantumOperationTypes.T:case a.QuantumOperationTypes.H:var c=u[0];this._requestOperationSingleQubit(t,c);break;case a.QuantumOperationTypes.CONTROLLED_X:case a.QuantumOperationTypes.CONTROLLED_Y:case a.QuantumOperationTypes.CONTROLLED_Z:var s=u[0];i=u[1],s.quantumState!==i.quantumState&&this._mergeQubitMapElement(s,i),this._requestControlledOperationQubit(t,s,i);break;case a.QuantumOperationTypes.TOFFOLI:var l=u[0],p=u[1];i=u[2],l.quantumState!==p.quantumState&&this._mergeQubitMapElement(l,p),l.quantumState!==i.quantumState&&this._mergeQubitMapElement(l,i),o.toffoli(l.quantumState,l.bitId,p.bitId,i.bitId)}},t.prototype.requestRotateOperation=function(t,e,n){var r=this._lookupQubitQuantumStateMapElementFromQubit(n);switch(t){case a.QuantumOperationTypes.R:r.quantumState.r(r.bitId,e);break;case a.QuantumOperationTypes.ROTATEX:r.quantumState.rx(r.bitId,e);break;case a.QuantumOperationTypes.ROTATEY:r.quantumState.ry(r.bitId,e);break;case a.QuantumOperationTypes.ROTATEZ:r.quantumState.rz(r.bitId,e)}},t.prototype.requestMeasure=function(t){var e=this._lookupQubitQuantumStateMapElementFromQubit(t);return this._measureQubit(e)},t.prototype.toStringQubit=function(t){return this._lookupQubitQuantumStateMapElementFromQubit(t).quantumState.toString()},t.prototype.getCompositedQubits=function(t){var e=this._lookupQubitQuantumStateMapElementFromQubit(t).quantumState;return this._mapQubitQuantumState.filter((function(t){return t.quantumState===e})).map((function(t){return t.qubit}))},t.prototype.cloneQubits=function(t){var e=this,n=this._lookupQubitQuantumStateMapElementFromQubit(t).quantumState,a=n.simulated.clone(),o=this._mapQubitQuantumState.filter((function(t){return t.quantumState===n})),i=o.map((function(t){var n=new r.Qubit,o=e._lookupQubitQuantumStateMapElementFromQubit(n);return o.quantumState,o.bitId=t.bitId,o.quantumState=a,o}));return{index:o.findIndex((function(e){return e.qubit===t})),qubits:i.map((function(t){return t.qubit}))}},t.prototype.getStateVectorFromQubit=function(t){return this._lookupQubitQuantumStateMapElementFromQubit(t).quantumState.simulated.getStateVector()},t.prototype.mergeStateVector=function(t){var e=this,n=t.map((function(t){return e._lookupQubitQuantumStateMapElementFromQubit(t)})),r=n[0];n.slice(1).forEach((function(t){r.quantumState!==t.quantumState&&e._mergeQubitMapElement(r,t)}))},t.prototype._requestOperationSingleQubit=function(t,e){switch(t){case a.QuantumOperationTypes.X:e.quantumState.x(e.bitId);break;case a.QuantumOperationTypes.Y:e.quantumState.y(e.bitId);break;case a.QuantumOperationTypes.Z:e.quantumState.z(e.bitId);break;case a.QuantumOperationTypes.S:e.quantumState.s(e.bitId);break;case a.QuantumOperationTypes.T:e.quantumState.t(e.bitId);break;case a.QuantumOperationTypes.H:e.quantumState.h(e.bitId)}},t.prototype._requestControlledOperationQubit=function(t,e,n){switch(t){case a.QuantumOperationTypes.CONTROLLED_X:n.quantumState.controlledX(e.bitId,n.bitId);break;case a.QuantumOperationTypes.CONTROLLED_Y:n.quantumState.controlledY(e.bitId,n.bitId);break;case a.QuantumOperationTypes.CONTROLLED_Z:n.quantumState.controlledZ(e.bitId,n.bitId)}},t.prototype._measureQubit=function(t){return t.quantumState.measure(t.bitId).result},t.prototype._lookupQubitQuantumStateMapElementFromQubit=function(t){return this._mapQubitQuantumState.find((function(e){return e.qubit===t}))},t.prototype._mergeQubitMapElement=function(t,e){var n=e.quantumState.length,r=this._mapQubitQuantumState.filter((function(e){return e.quantumState===t.quantumState})),a=this._mapQubitQuantumState.filter((function(t){return t.quantumState===e.quantumState})),o=t.quantumState.merge(e.quantumState);r.forEach((function(t){t.quantumState=o})),a.forEach((function(t){t.quantumState=o})),r.forEach((function(t){return t.bitId=t.bitId+n}))},t}();e.Core=i},196:function(t,e,n){var r,a=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},r(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(914),i=n(202);e.quantumStateJsQubitsGenerator=function(t){return new u(t)};var u=function(t){function e(n){var r=t.call(this,n)||this;if(r._qstate=i.jsqubits("|0>"),"number"==typeof n)switch(n){case 0:break;case 1:r._qstate=r._qstate.x(0)}else switch(n){case"0":case"|0>":break;case"1":case"|1>":r._qstate=r._qstate.x(0);break;case"+":r._qstate=r._qstate.hadamard(0);break;case"-":r._qstate=r._qstate.x(0),r._qstate=r._qstate.hadamard(0)}return r.simulated={clone:function(){var t=new e(0);return t._qstate=r._qstate.normalize(),t},getStateVector:function(){for(var t=Math.pow(2,r._qstate.numBits()),e=[],n=0;n<t;n++){var a=r._qstate.amplitude(n);e.push({re:a.real,im:a.imaginary})}return e}},r}return a(e,t),e.prototype.x=function(t){this._qstate=this._qstate.X(t)},e.prototype.y=function(t){this._qstate=this._qstate.Y(t)},e.prototype.z=function(t){this._qstate=this._qstate.Z(t)},e.prototype.r=function(t,e){this._qstate=this._qstate.r(t,e)},e.prototype.s=function(t){this._qstate=this._qstate.s(t)},e.prototype.t=function(t){this._qstate=this._qstate.t(t)},e.prototype.h=function(t){this._qstate=this._qstate.hadamard(t)},e.prototype.cnot=function(t,e){this._qstate=this._qstate.controlledX(t,e)},e.prototype.controlledX=function(t,e){this._qstate=this._qstate.controlledX(t,e)},e.prototype.controlledY=function(t,e){this._qstate=this._qstate.controlledY(t,e)},e.prototype.controlledZ=function(t,e){this._qstate=this._qstate.controlledZ(t,e)},e.prototype.rx=function(t,e){this._qstate=this._qstate.rotateX(t,e)},e.prototype.ry=function(t,e){this._qstate=this._qstate.rotateY(t,e)},e.prototype.rz=function(t,e){this._qstate=this._qstate.rotateZ(t,e)},e.prototype.measure=function(t){var e=this._qstate.measure(t);return this._qstate=e.newState,{newQuantumState:this,result:e.result}},e.prototype.merge=function(t){return this._qstate=this._qstate.tensorProduct(t._qstate),this},Object.defineProperty(e.prototype,"length",{get:function(){return this._qstate.numBits()},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return this._qstate.toString()},e}(o.QuantumState);e.QuantumStateJsqubits=u},412:function(t,e,n){var r=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),a=0;for(e=0;e<n;e++)for(var o=arguments[e],i=0,u=o.length;i<u;i++,a++)r[a]=o[i];return r};Object.defineProperty(e,"__esModule",{value:!0});var a=n(984),o=function(){function t(e){void 0===e&&(e={value:0}),t._core.createNewQubit(this,e),this._createSimulated()}return t.prototype.x=function(){t._core.requestOperation(a.QuantumOperationTypes.X,this)},t.prototype.y=function(){t._core.requestOperation(a.QuantumOperationTypes.Y,this)},t.prototype.z=function(){t._core.requestOperation(a.QuantumOperationTypes.Z,this)},t.prototype.r=function(e){t._core.requestRotateOperation(a.QuantumOperationTypes.R,e,this)},t.prototype.s=function(){t._core.requestOperation(a.QuantumOperationTypes.S,this)},t.prototype.t=function(){t._core.requestOperation(a.QuantumOperationTypes.T,this)},t.prototype.h=function(){t._core.requestOperation(a.QuantumOperationTypes.H,this)},t.prototype.cnot=function(e){t._core.requestOperation(a.QuantumOperationTypes.CONTROLLED_X,e,this)},t.prototype.controlledX=function(e){t._core.requestOperation(a.QuantumOperationTypes.CONTROLLED_X,e,this)},t.prototype.controlledY=function(e){t._core.requestOperation(a.QuantumOperationTypes.CONTROLLED_Y,e,this)},t.prototype.controlledZ=function(e){t._core.requestOperation(a.QuantumOperationTypes.CONTROLLED_Z,e,this)},t.prototype.rotateX=function(e){t._core.requestRotateOperation(a.QuantumOperationTypes.ROTATEX,e,this)},t.prototype.rotateY=function(e){t._core.requestRotateOperation(a.QuantumOperationTypes.ROTATEY,e,this)},t.prototype.rotateZ=function(e){t._core.requestRotateOperation(a.QuantumOperationTypes.ROTATEZ,e,this)},t.prototype.toffoli=function(e,n){t._core.requestOperation(a.QuantumOperationTypes.TOFFOLI,e,n,this)},t.prototype.measure=function(){return t._core.requestMeasure(this)},t.prototype.toString=function(){return t._core.toStringQubit(this)},t.prototype._createSimulated=function(){var e=this;this.simulated={clone:function(){return t._core.cloneQubits(e)},compositedQubits:function(){return t._core.getCompositedQubits(e)},getStateVector:function(){return t._core.getStateVectorFromQubit(e)},mergeStateVector:function(n){Array.isArray(n)||(n=[n]),t._core.mergeStateVector(r([e],n))}}},t}();e.Qubit=o},458:(t,e,n)=>{n(914).QuantumState;var r=n(196);r.QuantumStateJsqubits;var a=n(412);e.xz=a.Qubit;var o=n(234);o.Core,n(299);var i={quantumStateGenerator:r.quantumStateJsQubitsGenerator},u=new o.Core(i);a.Qubit._core=u},46:(t,e)=>{function n(t,e){t.t(e),t.t(e),t.t(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.toffoli=function(t,e,r,a){t.t(r),t.h(a),t.t(a),t.cnot(r,a),n(t,a),t.cnot(r,a),t.cnot(e,r),n(t,r),t.cnot(r,a),t.t(a),t.cnot(r,a),t.cnot(e,r),t.cnot(e,a),n(t,a),t.cnot(e,a),t.t(e),t.h(a)}},299:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0});var r=n(412);e.intToQubits=function(t,e){if(!Number.isInteger(t))throw new Error("value must be integer.");var n=t.toString(2),a=n.length;if(a>e)throw new Error("Designated qubits length cannot express given number.");for(var o=[],i=0;i<e;i++)i<a&&"1"===n[a-i-1]?o.push(new r.Qubit({value:1})):o.push(new r.Qubit({value:0}));return o}},984:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.X=0]="X",t[t.Y=1]="Y",t[t.Z=2]="Z",t[t.R=3]="R",t[t.S=4]="S",t[t.T=5]="T",t[t.H=6]="H",t[t.CONTROLLED_X=7]="CONTROLLED_X",t[t.CONTROLLED_Y=8]="CONTROLLED_Y",t[t.CONTROLLED_Z=9]="CONTROLLED_Z",t[t.ROTATEX=10]="ROTATEX",t[t.ROTATEY=11]="ROTATEY",t[t.ROTATEZ=12]="ROTATEZ",t[t.TOFFOLI=13]="TOFFOLI"}(e.QuantumOperationTypes||(e.QuantumOperationTypes={}))},644:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=i(n(766)),o=i(n(287));function i(t){return t&&t.__esModule?t:{default:t}}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var c=function(){function t(e,n){u(this,t),this.equal=this.eql,this.equals=this.eql,(0,a.default)(arguments,1,2,"Must supply a real, and optionally an imaginary, argument to Complex()"),n=n||0,this.real=e,this.imaginary=n}return r(t,[{key:"add",value:function(e){return(0,a.default)(arguments,1,1,"Must supply 1 parameter to add()"),o.default.isNumber(e)?new t(this.real+e,this.imaginary):new t(this.real+e.real,this.imaginary+e.imaginary)}},{key:"multiply",value:function(e){return(0,a.default)(arguments,1,1,"Must supply 1 parameter to multiply()"),o.default.isNumber(e)?new t(this.real*e,this.imaginary*e):new t(this.real*e.real-this.imaginary*e.imaginary,this.real*e.imaginary+this.imaginary*e.real)}},{key:"conjugate",value:function(){return new t(this.real,-this.imaginary)}},{key:"toString",value:function(){if(0===this.imaginary)return""+this.real;var t;if(t=1===this.imaginary?"i":-1===this.imaginary?"-i":this.imaginary+"i",0===this.real)return t;var e=this.imaginary<0?"":"+";return this.real+e+t}},{key:"inspect",value:function(){return this.toString()}},{key:"format",value:function(e){var n=this.real,r=this.imaginary;if(e&&null!=e.decimalPlaces){var a=Math.pow(10,e.decimalPlaces);n=Math.round(n*a)/a,r=Math.round(r*a)/a}return new t(n,r).toString()}},{key:"negate",value:function(){return new t(-this.real,-this.imaginary)}},{key:"magnitude",value:function(){return Math.sqrt(this.real*this.real+this.imaginary*this.imaginary)}},{key:"phase",value:function(){return Math.atan2(this.imaginary,this.real)}},{key:"subtract",value:function(e){return(0,a.default)(arguments,1,1,"Must supply 1 parameter to subtract()"),o.default.isNumber(e)?new t(this.real-e,this.imaginary):new t(this.real-e.real,this.imaginary-e.imaginary)}},{key:"eql",value:function(e){return e instanceof t&&this.real===e.real&&this.imaginary===e.imaginary}},{key:"closeTo",value:function(t){return Math.abs(this.real-t.real)<1e-4&&Math.abs(this.imaginary-t.imaginary)<1e-4}}]),t}();c.ONE=new c(1,0),c.ZERO=new c(0,0),c.SQRT2=new c(Math.SQRT2,0),c.SQRT1_2=new c(Math.SQRT1_2,0),e.default=c},382:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=e-t.length,r=0;r<n;r++)t="0"+t;return t}var o=function(){function t(e,n,a){r(this,t),this.numBits=e,this.result=n,this.newState=a}return n(t,[{key:"toString",value:function(){return"{result: "+this.result+", newState: "+this.newState+"}"}},{key:"asBitString",value:function(){return a(this.result.toString(2),this.numBits)}}]),t}();e.default=o,e.QStateComponent=function(){function t(e,n,a){r(this,t),this.numBits=e,this.index=n,this.amplitude=a}return n(t,[{key:"asNumber",value:function(){return parseInt(this.index,10)}},{key:"asBitString",value:function(){return a(parseInt(this.index,10).toString(2),this.numBits)}}]),t}()},933:(t,e)=>{function n(t,e,r){if(0===e)return 1;if(1===e)return t;var a=n(t,Math.floor(e/2),r),o=a*a%r;return e%2==1&&(o=t*o%r),o}function r(t){return Math.abs(t-Math.round(t))<1e-7}function a(t){var e=Math.log(t)/Math.log(2),n=Math.floor(e);if(e===n)return 2;for(n--;n>1;n--){var a=Math.pow(t,1/n);if(r(a))return Math.round(a)}return 0}function o(t,e){for(;0!==e;){var n=t%e;t=e,e=n}return t}function i(t,e){return t*e/o(t,e)}function u(t){return t>=0?Math.floor(t):Math.ceil(t)}function c(t,e){var n=void 0,r=void 0;Math.abs(t)>=1?r=t-(n=u(t)):(n=0,r=t);for(var a={numerator:1,denominator:0},o={numerator:n,denominator:1},i=[n];Math.abs(t-o.numerator/o.denominator)>e;){var c=1/r,s=u(c);r=c-s,i.push(s);var l={numerator:s*o.numerator+a.numerator,denominator:s*o.denominator+a.denominator};a=o,o=l}var p=o,f=p.numerator,d=p.denominator;return o.denominator<0&&(f*=-1,d*=-1),{quotients:i,numerator:f,denominator:d}}function s(t,e){var n=function(t){for(var e=[],n=0;n<t.length;n++)e[n]=t[n];return e}(t);function r(t,e){var r=1<<t;if(!(r&n[e]))for(var a=e+1;a<n.length;a++)if(r&n[a]){var o=n[e];return n[e]=n[a],void(n[a]=o)}}function a(t,e){for(var r=n[e],a=1<<t,o=0;o<n.length;o++)o!==e&&a&n[o]&&(n[o]^=r)}function o(t,e,r){for(var a=1<<e,o=a,i=0;i<r;i++)n[i]&a&&(o+=1<<t[i]);return o}var i=[];return function(t){for(var o=0,i=e-1;i>=0;i--)r(i,o),1<<i&n[o]&&(t[o]=i,a(i,o),o++)}(i),function(t){for(var n=[],r=0,a=t[r],i=e-1;i>=0;i--)i===a?a=t[++r]:n.push(o(t,i,r));return n}(i)}Object.defineProperty(e,"__esModule",{value:!0}),e.powerMod=n,e.powerFactor=a,e.gcd=o,e.lcm=i,e.continuedFraction=c,e.findNullSpaceMod2=s,e.default={powerMod:n,powerFactor:a,gcd:o,lcm:i,continuedFraction:c,findNullSpaceMod2:s}},899:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(382),o=l(a),i=l(n(644)),u=l(n(766)),c=l(n(287)),s=l(n(163));function l(t){return t&&t.__esModule?t:{default:t}}function p(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t){return t=t.replace(/^\|/,"").replace(/>$/,""),{value:parseInt(t,2),length:t.length}}function d(t,e,n){n.magnitude()>s.default.roundToZero&&(t[e]=n)}function m(t,e,n){var r=(t[e]||i.default.ZERO).add(n);r.magnitude()>s.default.roundToZero?t[e]=r:delete t[e]}function h(t,e){if(null==t)throw new Error("bit qualification must be supplied");if(t===s.default.ALL)return{from:0,to:e-1};if(c.default.isNumber(t))return{from:t,to:t};if(null!=t.from&&null!=t.to){if(t.from>t.to)throw new Error('bit range must have "from" being less than or equal to "to"');return t}throw new Error("bit qualification must be either: a number, Constants.ALL, or {from: n, to: m}")}function v(t,e){for(var n=0;n<t.length;n++)for(var r=t[n],a=0;a<e.length;a++)if(r===e[a])throw new Error("control and target bits must not be the same nor overlap")}function b(t){var e=t.random(),n=void 0,r=0;return t.each((function(t){var a=t.amplitude.magnitude();return r+=a*a,n=t.index,r<=e})),parseInt(n,10)}function y(t,e){if(t>e)throw new Error("bit range must have `from` being less than or equal to `to`");for(var n=[],r=t;r<=e;r++)n.push(r);return n}function g(t,e){if(null==t)throw new Error("bit qualification must be supplied");if(c.default.isArray(t))return t;if(c.default.isNumber(t))return[t];if(t===s.default.ALL)return y(0,e-1);if(null!=t.from&&null!=t.to)return y(t.from,t.to);throw new Error("bit qualification must be either: a number, an array of numbers, Constants.ALL, or {from: n, to: m}")}function O(t){var e=null;if(t){e=0;for(var n=0;n<t.length;n++)e+=1<<t[n]}return e}var _=[[i.default.SQRT1_2,i.default.SQRT1_2],[i.default.SQRT1_2,i.default.SQRT1_2.negate()]],x=[[i.default.ZERO,i.default.ONE],[i.default.ONE,i.default.ZERO]],j=[[i.default.ZERO,new i.default(0,-1)],[new i.default(0,1),i.default.ZERO]],w=[[i.default.ONE,i.default.ZERO],[i.default.ZERO,i.default.ONE.negate()]],S=[[i.default.ONE,i.default.ZERO],[i.default.ZERO,new i.default(0,1)]],C=[[i.default.ONE,i.default.ZERO],[i.default.ZERO,new i.default(Math.SQRT1_2,Math.SQRT1_2)]],q=function(){function t(e,n){p(this,t),this.kron=this.tensorProduct,this.R=this.r,this.cnot=this.controlledX,this.not=this.x,this.X=this.x,this.Y=this.y,this.Z=this.z,this.S=this.s,this.T=this.t,this.equal=this.eql,(0,u.default)(arguments,1,"new QState() must be supplied with number of bits (optionally with amplitudes as well)"),n=n||[s.default.ONE],this.numBits=function(){return e},this.amplitude=function(t){var e=c.default.isString(t)?f(t).value:t;return n[e]||i.default.ZERO},this.each=function(t){for(var r=Object.keys(n),o=0;o<r.length;o++){var i=r[o];if(!1===t(new a.QStateComponent(e,i,n[i])))break}}}return r(t,[{key:"multiply",value:function(e){c.default.isNumber(e)&&(e=new i.default(e));var n={};return this.each((function(t){n[t.index]=t.amplitude.multiply(e)})),new t(this.numBits(),n)}},{key:"add",value:function(e){var n={};return this.each((function(t){n[t.index]=t.amplitude})),e.each((function(t){var e=n[t.index]||i.default.ZERO;n[t.index]=t.amplitude.add(e)})),new t(this.numBits(),n)}},{key:"subtract",value:function(t){return this.add(t.multiply(-1))}},{key:"tensorProduct",value:function(e){var n={};return this.each((function(t){e.each((function(r){var a=(t.asNumber()<<e.numBits())+r.asNumber(),o=t.amplitude.multiply(r.amplitude);n[a]=o}))})),new t(this.numBits()+e.numBits(),n)}},{key:"controlledHadamard",value:function(t,e){return(0,u.default)(arguments,2,2,"Must supply control and target bits to controlledHadamard()"),this.controlledApplicationOfqBitOperator(t,e,_)}},{key:"hadamard",value:function(t){return(0,u.default)(arguments,1,1,"Must supply target bits to hadamard() as either a single index or a range."),this.controlledHadamard(null,t)}},{key:"controlledXRotation",value:function(t,e,n){(0,u.default)(arguments,3,3,"Must supply control bits, target bits, and an angle, to controlledXRotation()");var r=n/2,a=new i.default(Math.cos(r)),o=new i.default(0,-Math.sin(r)),c=[[a,o],[o,a]];return this.controlledApplicationOfqBitOperator(t,e,c)}},{key:"rotateX",value:function(t,e){return(0,u.default)(arguments,2,2,"Must supply target bits and angle to rotateX."),this.controlledXRotation(null,t,e)}},{key:"controlledYRotation",value:function(t,e,n){(0,u.default)(arguments,3,3,"Must supply control bits, target bits, and an angle, to controlledYRotation()");var r=n/2,a=new i.default(Math.cos(r)),o=new i.default(Math.sin(r)),c=[[a,o.negate()],[o,a]];return this.controlledApplicationOfqBitOperator(t,e,c)}},{key:"rotateY",value:function(t,e){return(0,u.default)(arguments,2,2,"Must supply target bits and angle to rotateY."),this.controlledYRotation(null,t,e)}},{key:"controlledZRotation",value:function(t,e,n){(0,u.default)(arguments,3,3,"Must supply control bits, target bits, and an angle to controlledZRotation()");var r=n/2,a=new i.default(Math.cos(r)),o=new i.default(0,Math.sin(r)),c=[[a.subtract(o),i.default.ZERO],[i.default.ZERO,a.add(o)]];return this.controlledApplicationOfqBitOperator(t,e,c)}},{key:"rotateZ",value:function(t,e){return(0,u.default)(arguments,2,2,"Must supply target bits and angle to rotateZ."),this.controlledZRotation(null,t,e)}},{key:"controlledR",value:function(t,e,n){(0,u.default)(arguments,3,3,"Must supply control and target bits, and an angle to controlledR().");var r=new i.default(Math.cos(n)),a=new i.default(0,Math.sin(n)),o=[[i.default.ONE,i.default.ZERO],[i.default.ZERO,r.add(a)]];return this.controlledApplicationOfqBitOperator(t,e,o)}},{key:"r",value:function(t,e){return(0,u.default)(arguments,2,2,"Must supply target bits and angle to r()."),this.controlledR(null,t,e)}},{key:"controlledX",value:function(t,e){return(0,u.default)(arguments,2,2,"Must supply control and target bits to cnot() / controlledX()."),this.controlledApplicationOfqBitOperator(t,e,x)}},{key:"x",value:function(t){return(0,u.default)(arguments,1,1,"Must supply target bits to x() / not()."),this.controlledX(null,t)}},{key:"controlledY",value:function(t,e){return(0,u.default)(arguments,2,2,"Must supply control and target bits to controlledY()."),this.controlledApplicationOfqBitOperator(t,e,j)}},{key:"y",value:function(t){return(0,u.default)(arguments,1,1,"Must supply target bits to y()."),this.controlledY(null,t)}},{key:"controlledZ",value:function(t,e){return(0,u.default)(arguments,2,2,"Must supply control and target bits to controlledZ()."),this.controlledApplicationOfqBitOperator(t,e,w)}},{key:"z",value:function(t){return(0,u.default)(arguments,1,1,"Must supply target bits to z()."),this.controlledZ(null,t)}},{key:"controlledS",value:function(t,e){return(0,u.default)(arguments,2,2,"Must supply control and target bits to controlledS()."),this.controlledApplicationOfqBitOperator(t,e,S)}},{key:"s",value:function(t){return(0,u.default)(arguments,1,1,"Must supply target bits to s()."),this.controlledS(null,t)}},{key:"controlledT",value:function(t,e){return(0,u.default)(arguments,2,2,"Must supply control and target bits to controlledT()."),this.controlledApplicationOfqBitOperator(t,e,C)}},{key:"t",value:function(t){return(0,u.default)(arguments,1,1,"Must supply target bits to t()."),this.controlledT(null,t)}},{key:"controlledSwap",value:function(e,n,r){(0,u.default)(arguments,3,3,"Must supply controlBits, targetBit1, and targetBit2 to controlledSwap()");var a={};null!=e&&(e=g(e,this.numBits()));var o=O(e),i=1<<n,c=1<<r;return this.each((function(t){var u=t.asNumber(),s=u;null!=e&&(u&o)!==o||(s=u&~i&~c|(u&c)>>r<<n|(u&i)>>n<<r),a[s]=t.amplitude})),new t(this.numBits(),a)}},{key:"swap",value:function(t,e){return(0,u.default)(arguments,2,2,"Must supply targetBit1 and targetBit2 to swap()"),this.controlledSwap(null,t,e)}},{key:"toffoli",value:function(){(0,u.default)(arguments,2,"At least one control bit and a target bit must be supplied to calls to toffoli()");for(var t=arguments[arguments.length-1],e=[],n=0;n<arguments.length-1;n++)e.push(arguments[n]);return this.controlledX(e,t)}},{key:"controlledApplicationOfqBitOperator",value:function(e,n,r){(0,u.default)(arguments,3,3,"Must supply control bits, target bits, and qbitFunction to controlledApplicationOfqBitOperator().");var a=g(n,this.numBits()),o=null;null!=e&&v(o=g(e,this.numBits()),a);for(var i=this,c=0;c<a.length;c++){var s=a[c];i=t.applyToOneBit(o,s,r,i)}return i}},{key:"applyFunction",value:function(e,n,r){function a(t,e){if(t.to>=e.from&&e.to>=t.from)throw new Error("control and target bits must not be the same nor overlap")}(0,u.default)(arguments,3,3,"Must supply control bits, target bits, and functionToApply to applyFunction().");var o=this,i=h(e,this.numBits()),c=h(n,this.numBits());a(i,c);var s={},l={},p=(1<<i.to+1)-1,f=(1<<1+c.to-c.from)-1<<c.from;return this.each((function(t){var e=t.asNumber();if(!l[t.index]){var n=(e&p)>>i.from,a=e^r(n)<<c.from&f;a===e?d(s,e,t.amplitude):(l[a]=!0,d(s,e,o.amplitude(a)),d(s,a,t.amplitude))}})),new t(this.numBits(),s)}},{key:"random",value:function(){return Math.random()}},{key:"normalize",value:function(){var e={},n=0;this.each((function(t){var e=t.amplitude.magnitude();n+=e*e}));var r=new i.default(1/Math.sqrt(n));return this.each((function(t){e[t.index]=t.amplitude.multiply(r)})),new t(this.numBits(),e)}},{key:"measure",value:function(e){(0,u.default)(arguments,1,1,"Must supply bits to be measured to measure().");var n=this.numBits(),r=g(e,n),a=b(this),i=O(r),c=a&i,s={};this.each((function(t){var e=t.asNumber();(e&i)===c&&(s[e]=t.amplitude)}));for(var l=0,p=n-1;p>=0;p--)r.indexOf(p)>=0&&(l<<=1,a&1<<p&&(l+=1));var f=new t(this.numBits(),s).normalize();return new o.default(r.length,l,f)}},{key:"qft",value:function(t){function e(t,n){var r=n[0];if(n.length>1){t=e(t,n.slice(1));for(var a=1;a<n.length;a++){var o=n[a],i=2*Math.PI/(1<<a+1);t=t.controlledR(r,o,i)}}return t.hadamard(r)}function n(t,e){for(;e.length>1;)t=t.swap(e[0],e[e.length-1]),e=e.slice(1,e.length-1);return t}(0,u.default)(arguments,1,1,"Must supply bits to be measured to qft().");var r=g(t,this.numBits()),a=e(this,r);return n(a,r)}},{key:"eql",value:function(e){function n(t,e){var n=!0;return t.each((function(t){return n=t.amplitude.eql(e.amplitude(t.asNumber()))})),n}return!!e&&e instanceof t&&this.numBits()===e.numBits()&&n(this,e)&&n(e,this)}},{key:"toString",value:function(){function t(t,e){var n=t.format(e);return"1"===n?"":"("+n+")"}function e(t,e){return t.asNumber()-e.asNumber()}for(var n=void 0,r="",a={decimalPlaces:4},o=function(t){var n=[];return t.each((function(t){n.push(t)})),n.sort(e),n}(this),i=0;i<o.length;i++)""!==r&&(r+=" + "),r=r+t((n=o[i]).amplitude,a)+"|"+n.asBitString()+">";return r}}],[{key:"fromBits",value:function(e){(0,u.default)(arguments,1,1,"Must supply a bit string");var n=f(e),r={};return r[n.value]=s.default.ONE,new t(n.length,r)}},{key:"applyOperatorMatrix",value:function(t,e,n){return[t[0][e].multiply(n),t[1][e].multiply(n)]}},{key:"applyToOneBit",value:function(e,n,r,a){var o={},i=1<<n,u=~i,c=O(e);return a.each((function(n){var a=n.asNumber();if(null==e||(a&c)===c){var s=(i&a)>0?1:0,l=t.applyOperatorMatrix(r,s,n.amplitude),p=a|i;m(o,a&u,l[0]),m(o,p,l[1])}else o[a]=n.amplitude})),new t(a.numBits(),o)}}]),t}();e.default=q},163:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0});var r,a=(r=n(644))&&r.__esModule?r:{default:r};e.default={ZERO:a.default.ZERO,ONE:new a.default(1,0),ALL:"ALL",roundToZero:1e-7}},202:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.jsqubits=void 0;var r=s(n(899)),a=s(n(644)),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(933)),i=n(382),u=s(i),c=s(n(163));function s(t){return t&&t.__esModule?t:{default:t}}function l(t){return r.default.fromBits(t)}l.complex=function(t,e){return new a.default(t,e)},l.real=function(t){return new a.default(t,0)},l.QMath=o,l.Complex=a.default,l.QState=r.default,l.Measurement=u.default,l.QStateComponent=i.QStateComponent,Object.assign(l,c.default),e.default=l,e.jsqubits=l},287:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){return Object.prototype.toString.call(t)};e.default={isNull:function(t){return"[object Null]"===n(t)},isObject:function(t){return"[object Object]"===n(t)},isArray:function(t){return"[object Array]"===n(t)},isString:function(t){return"[object String]"===n(t)},isNumber:function(t){return"[object Number]"===n(t)},isBoolean:function(t){return"[object Boolean]"===n(t)},isDate:function(t){return"[object Date]"===n(t)},isUndefined:function(t){return"[object Undefined]"===n(t)},isRegExp:function(t){return"[object RegExp]"===n(t)}}},766:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){for(var n=1e4,r="Must supply at least "+e+" parameters.",a=arguments.length,o=Array(a>2?a-2:0),i=2;i<a;i++)o[i-2]=arguments[i];if(o.length>2)throw new Error("Internal error: too many arguments to validateArgs");if(2===o.length?(n=o[0],r=o[1]):1===o.length&&(r=o[0]),t.length<e||t.length>n)throw r}}},n={};function r(e){var a=n[e];if(void 0!==a)return a.exports;var o=n[e]={exports:{}};return t[e].call(o.exports,o,o.exports,r),o.exports}r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var a={};(()=>{r.r(a),r.d(a,{BrowserUIClient:()=>b});var t=function(){return t=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t},t.apply(this,arguments)},e={X:"x",Y:"y",Z:"z",H:"h",T:"t",S:"s"},n={RX:"rx",RY:"ry",RZ:"rz"},o={CNOT:"cnot",CCNOT:"ccnot"},i=t(t(t({},e),n),o);function u(t){if(!t.observable||0===t.observable.length||0===t.observable[0].operators.length)return!0;var e=function(t){var e=new Set;return t.forEach((function(t){t.operators.forEach((function(t){t&&e.add(t)}))})),e}(t.observable);return!(e.has("x")||e.has("y")||e.has("z"))}function c(t,r){var a=function(t){var e=new Set;return t.forEach((function(t){t.forEach((function(t){t&&e.add(t.type)}))})),e}(t.circuit),c=function(t){return t.has("rx")||t.has("ry")||t.has("rz")}(a),s=[];return function(t,e,n){if(n?(t.push("from numpy import pi"),t.push("from qulacs import QuantumState, ParametricQuantumCircuit, Observable")):t.push("from qulacs import QuantumState, QuantumCircuit, Observable"),e.size>0){var r="from qulacs.gate import";Array.from(e).sort().forEach((function(t,n){var a=function(t){return t===i.CCNOT?"TOFFOLI":t.toUpperCase()}(t);r+=" ".concat(a),n<e.size-1&&(r+=",")})),t.push(r)}}(s,a,c),s.push(""),function(t,r,a){var i;t.push((i=r.size,"state = QuantumState(".concat(i,")\nstate.set_zero_state()"))),t.push(function(t,e){return e?"circuit = ParametricQuantumCircuit(".concat(t,")"):"circuit = QuantumCircuit(".concat(t,")")}(r.size,a)),t.push(""),function(t,r){r.forEach((function(r){r.forEach((function(r,a){if(r){var i=function(t,r){switch(t.type){case e.X:case e.Y:case e.Z:case e.H:case e.S:case e.T:return function(t,n){switch(t.type){case e.X:return"circuit.add_gate(X(".concat(n,"))");case e.Y:return"circuit.add_gate(Y(".concat(n,"))");case e.Z:return"circuit.add_gate(Z(".concat(n,"))");case e.H:return"circuit.add_gate(H(".concat(n,"))");case e.S:return"circuit.add_gate(S(".concat(n,"))");case e.T:return"circuit.add_gate(T(".concat(n,"))");default:throw new Error("applySingleGate: cannot apply unknown gate: ".concat(t.type))}}(t,r);case n.RX:case n.RY:case n.RZ:return function(t,e){var r=t.param;switch(t.type){case n.RX:return"circuit.add_gate(RX(".concat(e,", pi * ").concat(r,"))");case n.RY:return"circuit.add_gate(RY(".concat(e,", pi * ").concat(r,"))");case n.RZ:return"circuit.add_gate(RZ(".concat(e,", pi * ").concat(r,"))");default:throw new Error("applyParametricSingleGate: cannot apply unknown gate: ".concat(t.type))}}(t,r);case o.CNOT:case o.CCNOT:return function(t,e){switch(t.type){case o.CNOT:return"circuit.add_gate(CNOT(".concat(e,", ").concat(t.controllQubitIndex[0],"))");case o.CCNOT:return"circuit.add_gate(TOFFOLI(".concat(t.controllQubitIndex.join(", "),", ").concat(e,"))");default:throw new Error("applyMultiGate: cannot apply unknown gate: ".concat(t.type))}}(t,r);default:return console.log("applyGate: invalid gate type, ".concat(t.type)),""}}(r,a);t.push(i)}}))}))}(t,r.circuit),t.push("circuit.update_quantum_state(state)")}(s,t,c),s.push(""),function(t,e,n){var r;r=u(e)?{observable:[{operators:[],coefficient:1}]}:e,t.push("expectation_value = 0"),r.observable.forEach((function(e){t.push("copied_state = state.copy()"),t.push("observable = Observable(".concat(n,")"));var r="";e.operators.forEach((function(t,e){t&&(e>0&&r.length>0&&(r+=" "),r+="".concat(t.toUpperCase()," ").concat(e))})),t.push("observable.add_operator(".concat(e.coefficient,', "').concat(r,'")')),t.push("expectation_value += observable.get_expectation_value(copied_state)")}))}(s,r,t.size),s.push("print(expectation_value)"),s.join("\n")}var s=r(458);function l(t,r,a){switch(t.type){case e.X:r.x();break;case e.Y:r.y();break;case e.Z:r.z();break;case e.H:r.h();break;case e.T:r.t();break;case e.S:r.s();break;case n.RX:r.rotateX(t.param*Math.PI);break;case n.RY:r.rotateY(t.param*Math.PI);break;case n.RZ:r.rotateZ(t.param*Math.PI);break;case o.CNOT:var i=t.controllQubitIndex[0];r.cnot(a[i]);break;case o.CCNOT:var u=t.controllQubitIndex[0],c=t.controllQubitIndex[1];r.toffoli(a[u],a[c]);break;default:null!=t&&console.log("applyGate: unexpected gate type, ".concat(t.type))}}var p,f=(p=function(t,e){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},p(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}p(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return f(e,t),e.prototype.getStateVectorWithExpectationValue=function(t,e){var n=m(t);return{stateVector:n[0].simulated.getStateVector(),expectationValue:h(n,e)}},e.prototype.getExpectationValueMap=function(t,e,n,r,a){if(r<0)throw new Error("QramanaComputeDriver#getExpectationValueMap: invalid steps");if(0===r)return[];var o=[];function i(r){var a=h(m(t,{position:n,param:r}),e);o.push({param:r,expectationValue:a})}i(0);for(var u=1;u<r;u+=1)i(u/(r-1)*a);return o},e.prototype.runShotTask=function(t,e){for(var n=Math.pow(2,t.size),r=new Array(n).fill(0),a=m(t),o=function(t){var e=a[0].simulated.clone().qubits.map((function(t){return t.measure()})),n=0;e.forEach((function(t,r){if(0!==t){var a=e.length-r-1;n+=Math.pow(2,a)}})),r[n]+=1},i=0;i<e;i+=1)o();return r},e}((function(){}));function m(t,e){var n=function(t){for(var e=[new s.xz({value:0})],n=1;n<t;n+=1){var r=new s.xz({value:0});e[0].simulated.mergeStateVector(r),e.push(r)}return e}(t.size);return t.circuit.forEach((function(t,r){t.forEach((function(t,a){if(t){var o=n[a];e&&r===e.position.step&&a===e.position.index?l({size:1,type:t.type,param:e.param},o,n):l(t,o,n)}}))})),n}function h(t,e){var n;n=u(e)?{observable:[{operators:[],coefficient:1}]}:e;var r=0;return n.observable.forEach((function(e){var n=t[0].simulated.clone().qubits,a=n[0].simulated.getStateVector();e.operators.forEach((function(t,e){t&&l({type:t,size:1},n[e],n)}));var o,i,u,c=(o=a,i=n[0].simulated.getStateVector(),u={re:0,im:0},o.forEach((function(t,e){var n,r;u=function(t,e){return{re:t.re+e.re,im:t.im+e.im}}((n={re:t.re,im:-1*t.im},r=i[e],{re:n.re*r.re-n.im*r.im,im:n.re*r.im+n.im*r.re}),u)})),u).re;r+=c*e.coefficient})),r}var v=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),b=function(t){function e(e){var n=t.call(this,e)||this;return n.computeDriver=new d,n}return v(e,t),e.prototype.update=function(t){if(!function(t){var e=t.circuitInformation.size,n=0,r=0;return t.circuitInformation.circuit.forEach((function(t){t&&(n=Math.max(n,t.length))})),t.observableInformation.observable.forEach((function(t){t&&t.operators&&(r=Math.max(r,t.operators.length))})),!(e<n||e<r)}(t))return Promise.reject(new Error("invalid uiState"));this.uiState=t;var e=this.computeDriver.getStateVectorWithExpectationValue(t.circuitInformation,t.observableInformation),n=e.stateVector.map((function(t){return e=t,Math.sqrt(Math.pow(e.re,2)+Math.pow(e.im,2));var e}));return Promise.resolve({expectationValue:e.expectationValue,stateVector:e.stateVector,stateVectorAbsoluted:n,stateVectorArgument:e.stateVector.map((function(t){return e=t,Math.atan2(e.im,e.re)/Math.PI;var e})),probabilityVector:n.map((function(t){return Math.pow(t,2)})),translateCode:c(t.circuitInformation,t.observableInformation)})},e.prototype.requestParametricExpectedValues=function(t){if(!this.uiState)return Promise.reject(new Error("Need Circuit information before request expected values"));var e=this.computeDriver.getExpectationValueMap(this.uiState.circuitInformation,this.uiState.observableInformation,t.position,t.steps,this.parametricGateRange);return Promise.resolve({steps:t.steps,expectationValueMap:e})},e.prototype.startShot=function(t){if(!this.uiState)return Promise.reject(new Error("Need Circuit information before request start shots"));var e=this.computeDriver.runShotTask(this.uiState.circuitInformation,t.shot);return Promise.resolve({samplingMap:e})},e}((function(t){var e;this.parametricGateRange=null!==(e=t.parametricGateRange)&&void 0!==e?e:2}))})(),e.v=a})()}},function(t){t.O(0,[749,465,774,888,179],(function(){return e=8738,t(t.s=e);var e}));var e=t.O();_N_E=e}]);