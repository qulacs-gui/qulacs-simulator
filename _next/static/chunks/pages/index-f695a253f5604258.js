/*! For license information please see index-f695a253f5604258.js.LICENSE.txt */
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{87314:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(62771)}])},62771:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return Xa}});var a=n(52322),r=n(53476),o=n(2784),i=n(76539);const u=1;var s=n(53416);const c={x:"X",y:"Y",z:"Z",h:"H",t:"T",s:"S",rx:"RX",ry:"RY",rz:"RZ",cnot:"CNOT",ccnot:"CCNOT",empty:"EMPTY",identity:"Identity"},l={EMPTY:{type:"empty",size:1}},p={CONTROL_QUBIT:{type:"control_qubit",connectedMultiGate:{type:"cnot",position:[0,0]},size:1}},d={Identity:{type:"identity",size:1},X:{type:"x",size:1},Y:{type:"y",size:1},Z:{type:"z",size:1}},m={...d,H:{type:"h",size:1},T:{type:"t",size:1},S:{type:"s",size:1}},f={RX:{type:"rx",param:0,size:1},RY:{type:"ry",param:0,size:1},RZ:{type:"rz",param:0,size:1}},h={CNOT:{type:"cnot",controllQubitIndex:[0],size:2},CCNOT:{type:"ccnot",controllQubitIndex:[0],size:3}},v={...l,...d},b={...l,...p,...m,...f,...h},y=t=>"empty"===t.type,g=t=>"rx"===t.type||"ry"===t.type||"rz"===t.type,x=t=>"cnot"===t.type||"ccnot"===t.type,_=t=>"control_qubit"===t.type,w=t=>!y(t.item)&&"control_qubit"!==t.item.type,q=t=>({item:t,id:(0,s.x0)()}),j=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:b.EMPTY;return new Array(t).fill("").map((()=>q(e)))},O=(0,r.cn)({key:"circuitGateItemsAtom",default:[j(u)],dangerouslyAllowMutability:!0}),C=(0,r.cn)({key:"circuitSelectedParametricGateState",default:null}),R=(0,r.nZ)({key:"circuiteGateItemsState",get:t=>{let{get:e}=t;return e(O)},set:(t,e)=>{let{set:n}=t;if(!(e instanceof r.nY))if(e[e.length-1].some((t=>{let{item:e}=t;return!y(e)})))e.push(j(e[0].length));else for(let t=e.length-1;t>0;t-=1){if(!e[t-1].every((t=>{let{item:e}=t;return y(e)})))break;e.pop()}n(O,e)},dangerouslyAllowMutability:!0}),S=(0,r.cn)({key:"observableGateItemsAtom",default:[j(u)],dangerouslyAllowMutability:!0}),M=(0,r.cn)({key:"observableCoefficientsState",default:[0],dangerouslyAllowMutability:!0}),k=(0,r.nZ)({key:"observableeGateItemsState",get:t=>{let{get:e}=t;return e(S)},set:(t,e)=>{let{get:n,set:a}=t;const o=n(M).slice();if(!(e instanceof r.nY))if(e[e.length-1].some((t=>{let{item:e}=t;return!y(e)})))e.push(j(e[0].length)),o.push(0);else for(let t=e.length-1;t>0;t-=1){if(!e[t-1].every((t=>{let{item:e}=t;return y(e)})))break;e.pop(),o.pop()}a(M,o),a(S,e)},dangerouslyAllowMutability:!0}),E=(t,e,n)=>{const a=t,[r,o]=e,[i,u]=n;return[a[r][o],a[i][u]]=[a[i][u],a[r][o]],a},T=t=>"desc"===t?(t,e)=>e-t:(t,e)=>t-e,I=(t,e,n,a)=>{const[r,o]=n,{type:i}=e,u=null!=a?a:((t,e,n)=>{const[a,r]=n,o=t[r],i=t=>t.every((t=>{var e;return"empty"===(null===(e=o[t])||void 0===e?void 0:e.item.type)})),u=new Array(e.size-1).fill(""),s=u.map(((t,e)=>a-(e+1))),c=u.map(((t,e)=>a+(e+1)));if(i(s))return s;if(i(c))return c;const l=[a-1,a+1];return"ccnot"===e.type&&i(l)?l:[]})(t,e,n).sort(T("asc"));return t[o]=t[o].map(((t,e)=>u.includes(e)?q({...p.CONTROL_QUBIT,connectedMultiGate:{position:n,type:i}}):e===r?((t,e)=>{const n="cnot"===t?b.CNOT:b.CCNOT;return q({...n,controllQubitIndex:e})})(i,u):t)),t},Q=(t,e,n)=>{const[a,r]=n,o=t.slice();return o[r].splice(a,1,e),o},Z=(t,e,n)=>{const a=Q(t,q(e),n);return x(e)?I(a,e,n):a},N=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return t.map((t=>[...t,...j(e,b.EMPTY)]))},G=(t,e,n)=>{const a=Q(t,q(b.EMPTY),n);if(x(e)){const[,t]=n,[r,o]=e.controllQubitIndex;for(let e=r;e<=(null!=o?o:r);e+=1)a[t].splice(e,1,q(b.EMPTY))}if(_(e)){const[n,a]=e.connectedMultiGate.position;G(t,t[a][n].item,[n,a])}return a},P=t=>{let e=t.slice();return t.forEach(((t,n)=>{if(t.length>1){const a=t.length-1;e=G(e,t[a].item,[a,n])}})),e.forEach((t=>{t.pop()})),e},A=(t,e,n,a)=>{if(x(e))return Z(G(t,e,n),e,a);if(_(e))return((t,e,n,a)=>{const[r]=n,[o]=a,{position:i}=e.connectedMultiGate,[u,s]=i,{item:c}=t[s][u];if(!x(c))throw new Error("Update item is NOT MultiGate type. target:".concat(c.type));const l=c.controllQubitIndex.findIndex((t=>t===r)),p=c.controllQubitIndex.map(((t,e)=>e===l?o:t)).sort(T("asc")),d=Q(G(t,c,i),q(c),i);return I(d,c,i,p),d})(t,e,n,a);const[r,o]=n,[i,u]=a;return E(t.slice(),[o,r],[u,i])},V=(t,e,n)=>{const[a,r]=n,o=t.slice();return o[r].splice(a,1,e),o},L=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return t.map((t=>[...t,...j(e,v.EMPTY)]))},D=t=>{const e=t.slice();return e.forEach((t=>{t.length>1&&t.pop()})),e},Y=o.createContext(null),z=()=>(0,o.useContext)(Y),X=t=>{let{children:e}=t;const[n,s]=(0,r.FV)(C),c=(0,r.Zl)(k),[l,p]=(0,r.FV)(R),{gateItemsColumnLength:d,gateItemsRowLength:m}=(0,o.useMemo)((()=>({gateItemsColumnLength:l.length,gateItemsRowLength:l[0].length})),[l]),f=(0,i.Z)(m),h=(0,o.useCallback)((()=>{m>=5||p((t=>N(t)))}),[p,m]),v=(0,o.useCallback)((()=>{m<=u||p((t=>P(t)))}),[p,m]),b=(0,o.useCallback)(((t,e)=>{p((n=>Z(n,t,e)))}),[p]),y=(0,o.useCallback)(((t,e)=>{p((n=>G(n,t,e)))}),[p]),g=(0,o.useCallback)(((t,e,n)=>{p((a=>A(a,t,e,n)))}),[p]),x=(0,o.useCallback)(((t,e)=>{p((n=>((t,e,n)=>Q(t,q(e),n))(n,t,e)))}),[p]),_=(0,o.useCallback)((t=>{const e=t.gateItems,n=e[0].length;p(e),c((t=>t[0].length<n?L(t,n-t[0].length):t))}),[p,c]),w=(0,o.useCallback)((()=>{s(null),p([j(m)])}),[s,p,m]),O=(0,o.useMemo)((()=>({selectedParametricGate:n,gateItems:l,gateItemsColumnLength:d,gateItemsRowLength:m,updateSelectedParametricGate:s,addGateItemsRow:h,removeGateItemsRow:v,addGateItem:b,removeGateItem:y,moveGateItem:g,updateGateItem:x,replace:_,reset:w})),[n,l,d,m,s,h,v,b,y,g,x,_,w]);return(0,o.useEffect)((()=>{null!=f&&m!==f&&c((t=>t[0].length>m?D(t):t))}),[m]),(0,a.jsx)(Y.Provider,{value:O,children:e})},B=o.createContext(null),F=()=>(0,o.useContext)(B),H=t=>{let{children:e}=t;const[n,s]=(0,r.FV)(M),c=(0,r.Zl)(R),[l,p]=(0,r.FV)(k),{gateItemsColumnLength:d,gateItemsRowLength:m}=(0,o.useMemo)((()=>({gateItemsColumnLength:l.length,gateItemsRowLength:l[0].length})),[l]),f=(0,i.Z)(m),h=(0,o.useCallback)(((t,e)=>{s((n=>{const a=n.slice();return a.splice(t,1,e),a}))}),[s]),b=(0,o.useCallback)((()=>{m>=5||p((t=>L(t)))}),[p,m]),y=(0,o.useCallback)((()=>{m<=u||p((t=>D(t)))}),[p,m]),g=(0,o.useCallback)(((t,e)=>{p((n=>((t,e,n)=>V(t,q(e),n))(n,t,e)))}),[p]),x=(0,o.useCallback)((t=>{p((e=>((t,e)=>V(t,q(v.EMPTY),e))(e,t)))}),[p]),_=(0,o.useCallback)(((t,e)=>{p((n=>((t,e,n)=>{const[a,r]=e,[o,i]=n;return E(t.slice(),[r,a],[i,o])})(n,t,e)))}),[p]),w=(0,o.useCallback)((t=>{const e=t.gateItems,n=e[0].length;s(t.coefficients),p(e),c((t=>t[0].length<n?N(t,n-t[0].length):t))}),[s,p,c]),O=(0,o.useCallback)((()=>{s([0]),p([j(m)])}),[m,s,p]),C=(0,o.useMemo)((()=>({coefficients:n,updateCoefficients:h,gateItems:l,gateItemsColumnLength:d,gateItemsRowLength:m,addGateItemsRow:b,removeGateItemsRow:y,addGateItem:g,removeGateItem:x,moveGateItem:_,replace:w,reset:O})),[n,h,l,d,m,b,y,g,x,_,w,O]);return(0,o.useEffect)((()=>{null!=f&&m!==f&&c((t=>t[0].length>m?P(t):t))}),[m]),(0,a.jsx)(B.Provider,{value:C,children:e})};var U=n(79520),W=n(52499),K=n(6897),J=n(62048),$=n(94199),tt=n(25665),et=n(69825);const nt=(0,r.cn)({key:"appUIState",default:{isCodeViewTabOpened:!1}}),at=()=>{const[t,e]=(0,r.FV)(nt);return{appUIState:t,setAppUIState:(0,o.useCallback)((t=>{e((e=>({...e,...t})))}),[e])}};var rt=n(12439),ot=n.n(rt);const it=(0,$.ZP)(J.Z)({color:"#fff"}),ut=()=>{const{setAppUIState:t}=at(),e=(0,o.useCallback)((()=>{t({isCodeViewTabOpened:!0})}),[t]);return(0,a.jsx)(K.Z,{position:"static",children:(0,a.jsxs)(tt.Z,{variant:"dense",children:[(0,a.jsx)("div",{className:ot().heading,children:(0,a.jsx)(et.Z,{variant:"h6",noWrap:!0,children:"Qulacs Simulator"})}),(0,a.jsxs)(it,{onClick:e,children:[(0,a.jsx)(W.Z,{}),(0,a.jsx)(et.Z,{sx:{ml:1},variant:"overline",children:"show code"})]})]})})};var st=n(92096);const ct=(t,e)=>Math.round(t*10**e)/10**e,lt=(t,e)=>"0000".concat(t.toString(2)).slice(-e);var pt=n(61660),dt=n(80739),mt=n(55484),ft=n(25556),ht=n(81224),vt=n(3131),bt=n(47857),yt=n(24908),gt=n(11011),xt=n(84471),_t=n.n(xt);const wt=t=>{let{active:e,payload:n}=t;if(e&&null!=n&&n.length>0){const t=n[0].payload;return(0,a.jsxs)("div",{className:_t().tooltipWrapper,children:[(0,a.jsx)("p",{className:_t().tooltipLabel,children:t.name}),(0,a.jsxs)("div",{className:_t().tooltipValue,children:[(0,a.jsx)("p",{className:_t().tooltipLabel,children:"stateVectorAbsoluted: ".concat(t.stateVectorAbsoluted)}),(0,a.jsx)("p",{className:_t().tooltipLabel,children:"stateVectorArgument: ".concat(t.stateVectorArgument)}),(0,a.jsx)("p",{className:_t().tooltipLabel,children:"stateVector: ".concat(t.stateVector.re).concat((r=t.stateVector.im,r>=0?"+".concat(r):r),"i")})]})]})}var r;return null},qt=t=>{let{data:e}=t;return(0,a.jsx)(pt.h,{width:"100%",height:"100%",children:(0,a.jsxs)(dt.v,{data:e,children:[(0,a.jsx)(mt.q,{strokeDasharray:"3 3"}),(0,a.jsx)(ft.K,{dataKey:"name",children:(0,a.jsx)(ht._,{value:"Computational basis states",offset:0,position:"insideBottom"})}),(0,a.jsx)(vt.B,{domain:[0,1],children:(0,a.jsx)(ht._,{value:"Amplitude Value",angle:-90,position:"insideBottomLeft"})}),(0,a.jsx)(bt.u,{content:(0,a.jsx)(wt,{})}),(0,a.jsx)(yt.$,{dataKey:"stateVectorAbsoluted",children:e.map((t=>{let{name:e,stateVectorArgument:n}=t;return(0,a.jsx)(gt.b,{fill:(r=n,"hsl(".concat(180*r,", 100%, 70%)"))},"cell-".concat(e));var r}))})]})})},jt=(t,e)=>t.updateResult===e.updateResult,Ot=o.memo((t=>{let{updateResult:e}=t;const{gateItemsRowLength:n}=z(),r=(0,o.useMemo)((()=>{const t=[];for(let a=0;a<e.stateVectorAbsoluted.length;a+=1)t.push({name:lt(a,n),stateVector:{re:ct(e.stateVector[a].re,5),im:ct(e.stateVector[a].im,5)},stateVectorAbsoluted:ct(e.stateVectorAbsoluted[a],5),stateVectorArgument:ct(e.stateVectorArgument[a],5)});return t}),[e,n]);return(0,a.jsx)(qt,{data:r})}),jt);var Ct=n(90734),Rt=n.n(Ct),St=n(60995),Mt=n(36197),kt=n(30840),Et=n(63004);const Tt=t=>{let{data:e,onRequestChangeParam:n}=t;const r=(0,o.useMemo)((()=>{var t;return null===(t=e.find((t=>{let{currentExpectationValue:e}=t;return null!=e})))||void 0===t?void 0:t.param}),[e]),i=(0,o.useMemo)((()=>e.length>0?["auto","auto"]:[0,1]),[e.length]),u=(0,o.useCallback)(((t,e)=>{const{payload:a}=e;null!=(null==a?void 0:a.param)&&n(a.param)}),[n]);return(0,a.jsx)(pt.h,{width:"100%",height:"100%",children:(0,a.jsxs)(St.c,{data:e,children:[(0,a.jsx)(mt.q,{strokeDasharray:"3 3"}),(0,a.jsx)(ft.K,{dataKey:"param",domain:[0,2],unit:"π",type:"number",children:(0,a.jsx)(ht._,{value:"Angle",offset:0,position:"insideBottom"})}),(0,a.jsx)(vt.B,{domain:i,children:(0,a.jsx)(ht._,{value:"Expectation Value",angle:-90,position:"insideBottomLeft"})}),(0,a.jsx)(bt.u,{}),(0,a.jsx)(Mt.b,{dataKey:"currentExpectationValue",fill:"#ff7300"}),null!=r&&(0,a.jsx)(kt.d,{x:r,stroke:"#ff7300"}),(0,a.jsx)(Et.x,{dataKey:"expectationValue",type:"monotone",dot:!1,activeDot:{onClick:u,r:5}})]})})},It=[],Qt=(t,e)=>t.currentExpectationValue===e.currentExpectationValue&&t.parametricExpectedValueResult===e.parametricExpectedValueResult,Zt=o.memo((t=>{let{currentExpectationValue:e,parametricExpectedValueResult:n}=t;const{gateItems:r,selectedParametricGate:i,updateGateItem:u,updateSelectedParametricGate:s}=z(),[c,l]=(0,o.useState)(It);(0,o.useEffect)((()=>{const t=((t,e,n)=>{var a;if(null==e)return null;const[r,o]=e;var i;const u=null===(a=(null!==(i=t[o])&&void 0!==i?i:[])[r])||void 0===a?void 0:a.item;if(null==u||!g(u))return null;const s=ct(n,5);return{param:u.param,expectationValue:s,currentExpectationValue:s}})(r,i,e);if(null==t)return s(null),void l(It);const a=[],{expectationValueMap:o}=n;for(let e=0;e<o.length;e+=1){const{param:n,expectationValue:r}=o[e];a.push({param:n,expectationValue:ct(r,5)}),n===t.param?a[a.length-1].currentExpectationValue=t.currentExpectationValue:e<o.length-1&&Rt()(t.param,n,o[e+1].param)&&a.push(t)}l(a)}),[r,i,e,n,s]);const p=(0,o.useCallback)((t=>{if(null!=i){const[e,n]=i,{item:a}=r[n][e];g(a)&&u({...a,param:t},i)}}),[r,i,u]);return(0,a.jsx)(Tt,{data:c,onRequestChangeParam:p})}),Qt),Nt=t=>{let{data:e,scale:n="auto"}=t;return(0,a.jsx)(pt.h,{width:"100%",height:240,children:(0,a.jsxs)(St.c,{data:e,children:[(0,a.jsx)(mt.q,{strokeDasharray:"3 3"}),(0,a.jsx)(ft.K,{dataKey:"name",children:(0,a.jsx)(ht._,{value:"Computational basis states",offset:0,position:"insideBottom"})}),(0,a.jsx)(vt.B,{yAxisId:"1",domain:["auto","auto"],scale:n,children:(0,a.jsx)(ht._,{value:"Probability Value",angle:-90,position:"insideBottomLeft"})}),(0,a.jsx)(vt.B,{yAxisId:"2",orientation:"right",hide:!0}),(0,a.jsx)(bt.u,{}),(0,a.jsx)(yt.$,{dataKey:"samplingMap",yAxisId:"2",fill:"#82ca9d",fillOpacity:"0.4"}),(0,a.jsx)(Et.x,{type:"linear",dataKey:"probabilityVector",yAxisId:"1",dot:!1})]})})};var Gt=n(17952);const Pt="observableInformation",At="selectedParametricQuantumGatePosition",Vt=(j(),j(),{["updateResult"]:{expectationValue:0,stateVector:[],stateVectorAbsoluted:[],stateVectorArgument:[],probabilityVector:[],codes:{translateCodes:{qiskit:"",qulacs:"",pennylane:""},observableCodes:{openFermion:""},circuitCodes:{qasm2:""}}},["shotResult"]:{samplingMap:[],samplingProbabilityMap:[]},["parametricExpectedValueResult"]:{steps:10,expectationValueMap:[]}});var Lt=n(59186);const Dt=t=>{const{gateItems:e}=t,n=e.map((t=>t.map((t=>w(t)?t.item:void 0))));return{circuit:n,size:n[0].length}},Yt=t=>{const{coefficients:e,gateItems:n}=t;return{observable:n.map(((t,n)=>({operators:t.map((t=>w(t)?t.item.type:void 0)),coefficient:e[n]})))}},zt=new(0,Lt.v.BrowserUIClient)({parametricGateRange:2}),Xt=(0,r.nZ)({key:"clientDataState",get:t=>{let{get:e}=t;const n=e(R),a=e(k);return{circuitInformation:{gateItems:n},observableInformation:{coefficients:e(M),gateItems:a}}},dangerouslyAllowMutability:!0}),Bt=(0,r.cn)({key:"simulatorResultAtom",default:Vt}),Ft=(0,r.nZ)({key:"simulatorResultState",get:async t=>{let{get:e}=t;const n=e(Bt),a=e(Xt);try{const t={circuitInformation:Dt((r=a).circuitInformation),observableInformation:Yt(r.observableInformation)};if(!zt.validate(t))return n;const o=await zt.update(t),i=e(C);if(null!=i){const t=await zt.requestParametricExpectedValues(function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:51;const[n,a]=t;return{steps:e,position:{step:a,index:n}}}(i));return{...n,updateResult:o,parametricExpectedValueResult:t}}return{...n,updateResult:o,parametricExpectedValueResult:Vt.parametricExpectedValueResult}}catch(t){}var r;return n},set:(t,e)=>{let{set:n}=t;return n(Bt,e)}}),Ht=o.createContext(null),Ut=()=>(0,o.useContext)(Ht),Wt=t=>{let{children:e}=t;const n=(0,r.$P)(Ft),[i,u]=(0,o.useState)(Vt),s=(0,o.useRef)(),c=(0,o.useMemo)((()=>"loading"===n.state),[n.state]),l=(0,o.useCallback)((t=>{u((e=>({...e,shotResult:t})))}),[]);(0,o.useEffect)((()=>{n.state!==s.current&&"hasValue"===n.state&&u(n.contents),s.current=n.state}),[n.state]);const p=(0,o.useMemo)((()=>({simulatorResult:i,isLoading:c,updateShotResult:l})),[i,c,l]);return(0,a.jsx)(Ht.Provider,{value:p,children:e})};var Kt=n(487),Jt=n.n(Kt);const $t=1e3,te=(0,$.ZP)(et.Z)({marginRight:"5px"}),ee=(0,$.ZP)(Gt.Z)({width:"60px"}),ne=(0,$.ZP)(J.Z)({marginLeft:"10px"}),ae=()=>{const{updateShotResult:t}=Ut(),[e,n]=(0,o.useState)(!1),[r,i]=(0,o.useState)(0),u=(0,o.useMemo)((()=>"number"!=typeof r||e),[r,e]),s=(0,o.useCallback)((t=>{const e=t.target.value;i(""===e?"":parseInt(e,10))}),[]),c=(0,o.useCallback)((async()=>{try{if("number"!=typeof r)return;n(!0);const e=await zt.startShot({shot:r});t(e)}catch(t){}finally{n(!1)}}),[r,t]),l=(0,o.useCallback)((()=>{"number"!=typeof r||r<0?i(0):r>$t&&i($t)}),[r]);return(0,a.jsxs)("div",{className:Jt().wrapper,children:[(0,a.jsx)(te,{variant:"caption",children:"Sampling Count:"}),(0,a.jsx)(ee,{value:r,onChange:s,onBlur:l,inputProps:{min:0,max:$t,step:1,type:"number"}}),(0,a.jsx)(ne,{variant:"outlined",color:"primary",size:"small",disabled:u,onClick:c,children:"Run"})]})};var re=n(88110),oe=n(11782);const ie=(0,$.ZP)(et.Z)({marginRight:"5px"}),ue=(t,e)=>t.value===e.value,se=o.memo((t=>{let{value:e,onChange:n}=t;const r=(0,o.useCallback)((t=>{const{value:e}=t.target;(t=>"string"==typeof t)(e)&&n(e)}),[n]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ie,{variant:"caption",children:"Scale:"}),(0,a.jsxs)(oe.Z,{variant:"standard",value:e,onChange:r,children:[(0,a.jsx)(re.Z,{value:"auto",children:"Auto"}),(0,a.jsx)(re.Z,{value:"log",children:"Log"})]})]})}),ue);var ce=n(60394),le=n.n(ce);const pe=t=>{let{data:e}=t;const[n,r]=(0,o.useState)("auto");return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(Nt,{data:e,scale:n}),(0,a.jsxs)("div",{className:le().control,children:[(0,a.jsx)(se,{value:n,onChange:r}),(0,a.jsx)(ae,{})]})]})},de=(t,e)=>t.updateResult===e.updateResult&&t.shotResult===e.shotResult,me=o.memo((t=>{let{updateResult:e,shotResult:n}=t;const{gateItemsRowLength:r}=z(),i=(0,o.useMemo)((()=>{const t=[];for(let a=0;a<e.stateVectorAbsoluted.length;a+=1)t.push({name:lt(a,r),probabilityVector:ct(e.probabilityVector[a],5),samplingMap:n.samplingMap[a]});return t}),[e,n,r]);return(0,a.jsx)(pe,{data:i})}),de);var fe=n(40547),he=n.n(fe);const ve=(0,$.ZP)(st.Z)({height:"100%",padding:"8px 15px",overflowY:"auto"}),be=()=>{const{simulatorResult:{updateResult:t,parametricExpectedValueResult:e,shotResult:n}}=Ut();return(0,a.jsxs)("div",{className:he().wrapper,children:[(0,a.jsx)("div",{className:he().tab,children:(0,a.jsx)(ve,{variant:"outlined",children:(0,a.jsx)(Ot,{updateResult:t})})}),(0,a.jsx)("div",{className:he().tab,children:(0,a.jsx)(ve,{variant:"outlined",children:(0,a.jsx)(me,{updateResult:t,shotResult:n})})}),(0,a.jsx)("div",{className:he().tab,children:(0,a.jsx)(ve,{variant:"outlined",children:(0,a.jsx)(Zt,{currentExpectationValue:t.expectationValue,parametricExpectedValueResult:e})})})]})};var ye=n(6060),ge=n(13091),xe=n(92794),_e=n(25674),we=n(5971),qe=n(35936),je=n(98235),Oe=n(25237),Ce=n.n(Oe),Re=n(7522);const Se=(t,e)=>t.value===e.value,Me=o.memo((t=>{let{value:e}=t;const{enqueueSnackbar:n}=(0,U.Ds)(),r=(0,o.useCallback)((()=>{null!=navigator.clipboard&&(navigator.clipboard.writeText(e),n("Copied!",{variant:"success"}))}),[e,n]);return(0,a.jsx)(J.Z,{variant:"outlined",size:"small",startIcon:(0,a.jsx)(Re.Z,{}),onClick:r,children:"copy"})}),Se),ke=Ce()((()=>Promise.all([n.e(32),n.e(220),n.e(262)]).then(n.bind(n,40262)).then((t=>t.CodeEditor))),{loadableGenerated:{webpack:()=>[40262]},ssr:!1,loading:()=>(0,a.jsx)("div",{style:{width:"100%",height:"500px",backgroundColor:"#272822"}})}),Ee=(0,je.Z)(qe.Z)({display:"flex",justifyContent:"space-between"}),Te=t=>{let{isOpened:e,defaultValue:n,onSave:r,onRequestClose:i}=t;const[u,s]=(0,o.useState)(n),c=(0,o.useCallback)((t=>{s(t)}),[]),l=(0,o.useCallback)((()=>{r(u)}),[u,r]);return(0,o.useEffect)((()=>{s(n)}),[n]),(0,a.jsxs)(ge.Z,{open:e,maxWidth:"md",fullWidth:!0,onClose:i,children:[(0,a.jsxs)(Ee,{children:["Edit Code",(0,a.jsx)(Me,{value:u})]}),(0,a.jsx)(ye.Z,{children:(0,a.jsx)(ke,{value:u,onChange:c})}),(0,a.jsxs)(we.Z,{children:[(0,a.jsx)(J.Z,{onClick:i,color:"primary",children:"Cancel"}),(0,a.jsx)(J.Z,{onClick:l,color:"primary",autoFocus:!0,children:"Save"})]})]})};var Ie=n(41577),Qe=n.n(Ie);const Ze=(t,e)=>t.isOpened===e.isOpened,Ne=o.memo((t=>{let{isOpened:e,codes:n,onRequestClose:r}=t;const[i,u]=(0,o.useState)("qulacs"),s=(0,o.useMemo)((()=>n.translateCodes[i]),[n,i]),c=(0,o.useCallback)(((t,e)=>{u(e)}),[]);return(0,a.jsx)(ge.Z,{open:e,maxWidth:"md",fullWidth:!0,onClose:r,children:(0,a.jsxs)(ye.Z,{children:[(0,a.jsxs)("div",{className:Qe().heading,children:[(0,a.jsxs)(_e.Z,{color:"primary",size:"small",value:i,exclusive:!0,onChange:c,children:[(0,a.jsx)(xe.Z,{value:"qulacs",children:"Qulacs"}),(0,a.jsx)(xe.Z,{value:"qiskit",children:"Qiskit"}),(0,a.jsx)(xe.Z,{value:"pennylane",children:"Pennylane"})]}),(0,a.jsx)(Me,{value:s})]}),(0,a.jsx)(ke,{value:s})]})})}),Ze),Ge=()=>{const{appUIState:t,setAppUIState:e}=at(),{simulatorResult:{updateResult:n}}=Ut(),r=(0,o.useCallback)((()=>{e({isCodeViewTabOpened:!1})}),[e]);return(0,a.jsx)(Ne,{isOpened:t.isCodeViewTabOpened,codes:n.codes,onRequestClose:r})};var Pe=n(72779),Ae=n.n(Pe),Ve=n(74974),Le=n(85801),De=n(26567);const Ye=t=>{let{onClick:e}=t;const n=(0,o.useCallback)((()=>{e()}),[e]);return(0,a.jsx)(De.Z,{title:"Reset",arrow:!0,children:(0,a.jsx)(Le.Z,{color:"primary",size:"small",onClick:n,children:(0,a.jsx)(Ve.Z,{})})})},ze=t=>{let{onClick:e}=t;return(0,a.jsx)(De.Z,{title:"Show code",arrow:!0,children:(0,a.jsx)(Le.Z,{color:"primary",size:"small",onClick:e,children:(0,a.jsx)(W.Z,{})})})},Xe=()=>{const[t,e]=(0,o.useState)(!1);return{isOpened:t,open:(0,o.useCallback)((()=>{e(!0)}),[]),close:(0,o.useCallback)((()=>{e(!1)}),[])}},Be=(t,e)=>t.isOpened===e.isOpened,Fe=o.memo((t=>{let{isOpened:e,onRequestClose:n}=t;const{enqueueSnackbar:r}=(0,U.Ds)(),{simulatorResult:i}=Ut(),{gateItemsRowLength:u}=z(),{replace:s}=F(),l=(0,o.useCallback)((async t=>{try{const e=await zt.textToObservableInformation({observableType:"openFermion",text:t,size:5});s(((t,e)=>{const n=Math.max(e,t.observable.reduce(((t,e)=>e.operators.length>t?e.operators.length:t),0));return{gateItems:t.observable.map((t=>{let{operators:e}=t;return e.length>0?e.map((t=>q(null!=t?v[c[t]]:v.EMPTY))).concat(j(n-e.length)):[q(v.EMPTY)]})),coefficients:t.observable.map((t=>{let{coefficient:e}=t;return e}))}})(e,u)),n()}catch(t){r("Parse error: syntax error",{variant:"error"})}}),[u,r,n,s]);return(0,a.jsx)(Te,{isOpened:e,defaultValue:i.updateResult.codes.observableCodes.openFermion,onSave:l,onRequestClose:n})}),Be),He=(t,e)=>t.coefficients===e.coefficients&&t.itemMatrix===e.itemMatrix,Ue=o.memo((t=>{let{coefficients:e,itemMatrix:n}=t;const{simulatorResult:r}=Ut(),[i,u]=(0,o.useState)(!1),s=(0,o.useRef)(null),c=(0,o.useMemo)((()=>{const t=n.map(((t,n)=>{const a=e[n],r=t.reduce(((t,e,n)=>(y(e.item)||t.push("".concat(e.item.type.toUpperCase(),"_").concat(n)),t)),[]);return 0===r.length||0===a?"":"".concat((t=>t<0?"-":"+")(a)).concat(Math.abs(a)).concat(r.join(""))})).join("").slice(1);return""!==t?t:"I"}),[e,n]);return(0,o.useEffect)((()=>{(async()=>{i&&null!=window.MathJax&&null!=s.current&&await window.MathJax.typesetPromise([s.current])})()}),[c,i,r.updateResult.expectationValue]),(0,o.useEffect)((()=>{(async()=>{!function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{async:!0,onLoad:null};if(null!=document.querySelector('script[src="'.concat(t,'"]')))return;const{head:n}=document,a=document.createElement("script");var r,o;a.src=t,a.async=null===(r=e.async)||void 0===r||r,a.onload=null!==(o=e.onLoad)&&void 0!==o?o:null,n.appendChild(a)}("https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js",{onLoad:()=>{u(!0)}})})()}),[]),(0,a.jsxs)("div",{ref:s,children:[(0,a.jsx)("div",{children:"$H = ".concat(c,"$")}),(0,a.jsx)("div",{children:"$\\langle H \\rangle = ".concat(r.updateResult.expectationValue,"$")})]})}),He),We="#2196f3",Ke="#e91e63",Je="#673ab7",$e="draggable_quantum_gate",tn="droppable_quantum_gate",en="droppable_multi_quantum_gate",nn="draggable_observable_gate",an="droppable_observable_gate",rn="draggable_control_qubit_gate";var on=n(92843);var un=n(93553),sn=n(34682),cn=n.n(sn);const ln=(0,$.ZP)(et.Z)({fontSize:"1rem"}),pn=o.forwardRef(((t,e)=>{let{gateType:n,isDragging:r,color:i,canDrop:u=!1,parametricValue:s}=t;const c=(0,o.useMemo)((()=>"cnot"===n||"ccnot"===n),[n]),l=(0,o.useMemo)((()=>null!=s?"(".concat(s,")"):null),[s]),p=(0,o.useMemo)((()=>"control_qubit"===n?null:c?u?(0,a.jsx)(un.Z,{}):(0,a.jsx)(ln,{children:n.toUpperCase()}):(0,a.jsx)(et.Z,{sx:{lineHeight:1},children:"identity"===n?"I":n.toUpperCase()})),[n,u,c]);return(0,a.jsxs)("div",{className:Ae()(cn().wrapper,{[cn().isDragging]:r,[cn().multiGate]:u&&c,[cn().controlQubitGate]:"control_qubit"===n}),style:{backgroundColor:i},ref:e,children:[p,null!=s&&(0,a.jsx)("div",{className:cn().parametricValue,children:l})]})}));var dn=n(74702),mn=n.n(dn);const fn=t=>{let{gate:e,type:n,color:r}=t;const{ref:i,isDragging:u}=(t=>{let{gate:e,type:n}=t;const a=(0,o.useRef)(null),[{isDragging:r},i]=(0,on.c)((()=>({type:n,item:{gate:e,type:n},collect:t=>({isDragging:t.isDragging()})})),[e,n]);return i(a),{ref:a,isDragging:r}})({gate:e,type:n});return(0,a.jsx)("div",{className:mn().wrapper,children:(0,a.jsx)(pn,{ref:i,gateType:e.type,color:r,isDragging:u})})};var hn=n(16009),vn=n.n(hn);const bn=()=>(0,a.jsx)("div",{className:vn().wrapper,children:Object.values(d).map((t=>(0,a.jsx)("div",{className:vn().item,children:(0,a.jsx)(fn,{gate:t,color:We,type:nn})},t.type)))});var yn=n(27508);const gn=t=>{let{isDisabled:e=!1}=t;const{addGateItemsRow:n}=z(),{addGateItemsRow:r}=F(),i=(0,o.useCallback)((()=>{n(),r()}),[n,r]);return(0,a.jsx)(De.Z,{title:"Add",placement:"bottom",arrow:!0,children:(0,a.jsx)(Le.Z,{disabled:e,onClick:i,children:(0,a.jsx)(yn.Z,{})})})};var xn=n(86912),_n=n.n(xn),wn=n(75874);const qn=t=>{let{isDisabled:e=!1,onClick:n}=t;const r=(0,o.useCallback)((()=>{n()}),[n]);return(0,a.jsx)(De.Z,{title:"Remove",placement:"top",arrow:!0,children:(0,a.jsx)(Le.Z,{disabled:e,onClick:r,children:(0,a.jsx)(wn.Z,{})})})},jn=t=>{let{gateItemsColumnLength:e,gateItemsRowLength:n,showMeasureIcon:r=!1,onRequestRemoveRow:i}=t;const u=(0,o.useMemo)((()=>n>=5),[n]),s=(0,o.useMemo)((()=>new Array(n).fill("").map(((t,e)=>e+1))),[n]);return(0,a.jsxs)(a.Fragment,{children:[n>1&&(0,a.jsx)("div",{className:_n().removeButton,children:(0,a.jsx)(qn,{onClick:i})}),s.map((t=>{const n={gridRow:t};return(0,a.jsxs)(o.Fragment,{children:[(0,a.jsxs)("div",{className:_n().label,style:n,children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{children:"q"}),(0,a.jsx)("span",{className:_n().labelIndex,children:t-1})]}),t===s.length&&!u&&(0,a.jsx)("div",{className:_n().addButton,children:(0,a.jsx)(gn,{})})]}),(0,a.jsx)("div",{className:_n().line,style:{...n,gridColumn:"2 / ".concat(2+e)},"aria-hidden":"true"}),r&&(0,a.jsx)("div",{className:_n().label,style:{...n,gridColumn:3+e},children:(0,a.jsx)("img",{src:"measurement.svg",width:"25",height:"14",alt:""})})]},t)}))]})};function On(t){throw new Error('"'.concat(t,'" is Unexpected value. Should have been never.'))}function Cn(t,e){if(null==t){const n=null!=e?e:"Expected 'value' to be defined, but received ".concat(t);throw new Error(n)}}var Rn=n(40630),Sn=n.n(Rn),Mn=n(20103);var kn=n(19986),En=n(73953),Tn=n.n(En);const In={x:null,y:null},Qn=t=>{let{menuItems:e,children:n}=t;const[r,i]=(0,o.useState)(In),u=(0,o.useCallback)((t=>{t.preventDefault(),i({x:t.clientX-2,y:t.clientY-4})}),[]),s=(0,o.useCallback)((()=>{i(In)}),[]),c=(0,o.useCallback)((t=>e=>{t(e),s()}),[s]);return(0,a.jsxs)("div",{className:Tn().wrapper,onContextMenu:u,children:[n,(0,a.jsx)(kn.Z,{keepMounted:!0,open:null!=r.y,onClose:s,anchorReference:"anchorPosition",anchorPosition:null!=r.y&&null!=r.x?{top:r.y,left:r.x}:void 0,children:e.map((t=>{let{text:e,onClick:n}=t;return(0,a.jsx)(re.Z,{onClick:c(n),children:e},e)}))})]})},Zn=t=>{let{gate:e,position:n,type:r,color:i,menuItems:u=[],onRequestMoveGate:s,onRequestRemoveGate:c}=t;const{ref:l,isDragging:p}=(t=>{let{accept:e,gate:n,position:a,type:r,onDrop:i}=t;const u=(0,o.useRef)(null),[,s]=(0,Mn.L)({accept:e,drop:i}),[{isDragging:c},l]=(0,on.c)((()=>({type:r,item:{gate:n,position:a,type:r},collect:t=>({isDragging:t.isDragging()})})),[n,a,r]);return l(s(u)),{ref:u,isDragging:c}})({gate:e,position:n,type:r,accept:[r],onDrop:t=>{switch(t.type){case"droppable_quantum_gate":case"droppable_observable_gate":s(t,n);break;case"droppable_multi_quantum_gate":break;default:On(t.type)}}}),d=(0,o.useMemo)((()=>(t=>"rx"===t.type||"ry"===t.type||"rz"===t.type)(e)?e.param:void 0),[e]),m=(0,o.useCallback)((t=>{t.stopPropagation(),c(e,n)}),[e,n,c]),f=(0,o.useMemo)((()=>[...u,{text:"Delete Gate",onClick:m}]),[u,m]);return(0,a.jsx)(Qn,{menuItems:f,children:(0,a.jsx)(pn,{ref:l,gateType:e.type,color:i,isDragging:p,parametricValue:d,canDrop:!0})})};var Nn=n(3423),Gn=n.n(Nn);const Pn=t=>{let{position:e,onRequestAddGate:n,onRequestMoveGate:r}=t;const[{isOver:i,canDrop:u},s]=(0,Mn.L)({accept:[nn,an],drop:t=>{switch(t.type){case"draggable_observable_gate":n(t,e);break;case"droppable_observable_gate":r(t,e);break;default:On(t.type)}},collect:t=>({isOver:t.isOver(),canDrop:t.canDrop()})}),c=(0,o.useMemo)((()=>i&&u),[i,u]);return(0,a.jsx)("div",{ref:s,className:Ae()(Gn().wrapper,{[Gn().isActive]:c,[Gn().canDrop]:!c&&u})})},An=t=>{let{gate:e,position:n,onRequestAddGate:r,onRequestMoveGate:i,onRequestRemoveGate:u}=t;const s=(0,o.useMemo)((()=>{switch(e.type){case"empty":return(0,a.jsx)(Pn,{position:n,onRequestAddGate:r,onRequestMoveGate:i});case"identity":case"x":case"y":case"z":return(0,a.jsx)(Zn,{gate:e,position:n,type:an,color:We,onRequestMoveGate:i,onRequestRemoveGate:u});default:return On(e)}}),[e,n,r,i,u]);return(0,a.jsx)(a.Fragment,{children:s})},Vn=(t,e)=>({gridRow:t+1,gridColumn:e+1}),Ln=(t,e)=>t.itemMatrix===e.itemMatrix,Dn=o.memo((t=>{let{itemMatrix:e}=t;const{gateItemsColumnLength:n,gateItemsRowLength:r,addGateItem:i,moveGateItem:u,removeGateItem:s,removeGateItemsRow:c}=F(),l=(0,o.useCallback)(((t,e)=>{i(t.gate,e)}),[]),p=(0,o.useCallback)(((t,e)=>{const{position:n}=t;Cn(n),u(n,e)}),[]),d=(0,o.useCallback)(((t,e)=>{s(e)}),[]);return(0,a.jsxs)("div",{className:Sn().wrapper,children:[(0,a.jsx)(jn,{gateItemsColumnLength:n,gateItemsRowLength:r,onRequestRemoveRow:c}),e.map(((t,e)=>(0,a.jsx)(o.Fragment,{children:t.map(((t,n)=>(0,a.jsx)("div",{className:Sn().gateCell,style:Vn(n,e+1),children:(0,a.jsx)(An,{gate:t.item,position:[n,e],onRequestAddGate:l,onRequestMoveGate:p,onRequestRemoveGate:d})},t.id)))},e)))]})}),Ln),Yn=(t,e)=>t.value===e.value,zn=o.memo((t=>{let{value:e,onChange:n,...r}=t;const[i,u]=(0,o.useState)(e),s=(0,o.useCallback)((t=>{const e=t.currentTarget.value;u(""===e?"":parseFloat(e))}),[]),c=(0,o.useCallback)((()=>{"number"!=typeof i?(u(0),n(0)):n(i)}),[i,n]);return(0,o.useEffect)((()=>{u(e)}),[e]),(0,a.jsx)(Gt.Z,{value:i,onChange:s,onBlur:c,...r})}),Yn);var Xn=n(7579),Bn=n.n(Xn);const Fn=t=>{let{coefficients:e,onChange:n}=t;const r=(0,o.useCallback)((t=>e=>{n(t,e)}),[n]);return(0,a.jsx)("div",{className:Bn().wrapper,children:e.map(((t,e)=>(0,a.jsx)("div",{className:Bn().item,children:(0,a.jsx)(zn,{type:"number",value:t,inputProps:{step:"0.01"},onChange:r(e),fullWidth:!0})},e)))})};var Hn=n(67914),Un=n.n(Hn);const Wn=()=>{const t=Xe(),{coefficients:e,gateItems:n,updateCoefficients:r,reset:o}=F();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:Un().wrapper,children:[(0,a.jsxs)("div",{className:Un().heading,children:[(0,a.jsx)(et.Z,{variant:"overline",children:"Observable"}),(0,a.jsxs)("div",{className:Un().actions,children:[(0,a.jsx)(ze,{onClick:t.open}),(0,a.jsx)(Ye,{onClick:o})]})]}),(0,a.jsx)("div",{children:(0,a.jsx)(bn,{})}),(0,a.jsxs)("div",{className:Un().composer,children:[(0,a.jsx)(Fn,{coefficients:e,onChange:r}),(0,a.jsx)(Dn,{itemMatrix:n})]}),(0,a.jsx)(Ue,{coefficients:e,itemMatrix:n})]}),(0,a.jsx)(Fe,{isOpened:t.isOpened,onRequestClose:t.close})]})};var Kn=n(6737),Jn=n.n(Kn);const $n=()=>(0,a.jsxs)("div",{className:Jn().wrapper,children:[Object.values(m).filter((t=>{let{type:e}=t;return"identity"!==e})).map((t=>(0,a.jsx)("div",{className:Jn().item,children:(0,a.jsx)(fn,{gate:t,color:We,type:$e})},t.type))),Object.values(f).map((t=>(0,a.jsx)("div",{className:Jn().item,children:(0,a.jsx)(fn,{gate:t,color:Ke,type:$e})},t.type))),Object.values(h).map((t=>(0,a.jsx)("div",{className:Jn().item,children:(0,a.jsx)(fn,{gate:t,color:Je,type:$e})},t.type)))]});var ta=n(8209),ea=n.n(ta),na=n(34965),aa=n.n(na);const ra=t=>{let{gate:e,position:n,...r}=t;const i=(0,o.useMemo)((()=>x(e)?e.controllQubitIndex:[]),[e]),u=(0,o.useCallback)((t=>{const[e]=n;return{style:{height:"".concat(50*(Math.abs(e-t)-1)+20,"px")},"data-direction":e>t?"upper":"lower"}}),[n]);return(0,a.jsxs)("div",{className:aa().wrapper,children:[i.map((t=>(0,a.jsx)("div",{className:aa().connectedLine,...u(t),"aria-hidden":!0},t))),(0,a.jsx)(Zn,{gate:e,position:n,type:en,color:Je,...r})]})};var oa=n(46312),ia=n.n(oa);const ua=t=>{let{gate:e,position:n,onRequestMoveGate:r,onRequestRemoveGate:i}=t;const u=Ta(),{selectedParametricGate:s,updateSelectedParametricGate:c}=z(),l=(0,o.useMemo)((()=>null!=s&&((t,e)=>{const[n,a]=t,[r,o]=e;return n===r&&a===o})(n,s)),[n,s]),p=(0,o.useMemo)((()=>[{text:"Edit Gate",onClick:t=>{t.stopPropagation(),u(e,n)}}]),[u,e,n]),d=(0,o.useCallback)((()=>{c(n)}),[c,n]),m=(0,o.useCallback)(((t,e)=>{c(e),r(t,e)}),[c,r]),f=(0,o.useCallback)(((t,e)=>{s===e&&c(null),i(t,e)}),[s,c,i]);return(0,a.jsx)("div",{className:Ae()(ia().wrapper,{[ia().isSelected]:l}),role:"button",tabIndex:-1,onClick:d,children:(0,a.jsx)(Zn,{gate:e,position:n,type:tn,color:Ke,menuItems:p,onRequestMoveGate:m,onRequestRemoveGate:f})})};var sa=n(37404),ca=n.n(sa);const la=t=>{let{position:e,onRequestAddGate:n,onRequestMoveGate:r}=t;const{gateItems:i}=z(),u=(0,o.useCallback)((t=>{const{gate:n}=t;return _(n)?((t,e,n)=>{let[a,r]=n;const[o,i]=e.connectedMultiGate.position;if(i!==r)return!1;const u=t[i];return(a>o?u.slice(o+1,a+1):u.slice(a,o)).every((t=>{let{item:e}=t;return y(e)||_(e)}))})(i,n,e):!!((t,e)=>{let[n,a]=e;const r=t[a].reduce(((t,e,n)=>{let{item:a}=e;return x(a)&&t.push({index:n,...a}),t}),[]);return 0===r.length||r.every((t=>t.controllQubitIndex.every((e=>t.index>e?!Rt()(n,e,t.index):!Rt()(n,t.index,e)))))})(i,e)&&(!x(n)||((t,e,n)=>{let[a,r]=n;const o=t[r],i=t=>t.every((t=>{var e;return"empty"===(null===(e=o[t])||void 0===e?void 0:e.item.type)})),u=new Array(e.size-1).fill(""),s=u.map(((t,e)=>a-(e+1))),c=u.map(((t,e)=>a+(e+1)));return i(s)||i(c)||"ccnot"===e.type&&i([a-1,a+1])})(i,n,e))}),[i,e]),[{isOver:s,canDrop:c},l]=(0,Mn.L)({accept:[$e,rn,tn,en],canDrop:u,drop:t=>{switch(t.type){case"draggable_quantum_gate":n(t,e);break;case"draggable_control_qubit_gate":case"droppable_quantum_gate":case"droppable_multi_quantum_gate":r(t,e);break;default:On(t.type)}},collect:t=>({isOver:t.isOver(),canDrop:t.canDrop()})}),p=(0,o.useMemo)((()=>s&&c),[s,c]);return(0,a.jsx)("div",{ref:l,className:Ae()(ca().wrapper,{[ca().isActive]:p,[ca().canDrop]:!p&&c})})};var pa=n(53090),da=n.n(pa);const ma=t=>{let{gate:e,position:n}=t;const r=(0,o.useRef)(null),[{isDragging:i},u]=(0,on.c)((()=>({type:rn,item:{gate:e,position:n,type:rn},collect:t=>({isDragging:t.isDragging()})})),[e,n]);return u(r),(0,a.jsx)("div",{className:da().wrapper,children:(0,a.jsx)(pn,{ref:r,gateType:e.type,color:"transparent",isDragging:i})})},fa=t=>{let{gate:e,position:n,onRequestAddGate:r,onRequestMoveGate:i,onRequestRemoveGate:u}=t;const s=(0,o.useMemo)((()=>{switch(e.type){case"empty":return(0,a.jsx)(la,{position:n,onRequestAddGate:r,onRequestMoveGate:i});case"control_qubit":return(0,a.jsx)(ma,{gate:e,position:n});case"x":case"y":case"z":case"h":case"t":case"s":return(0,a.jsx)(Zn,{gate:e,position:n,type:tn,color:We,onRequestMoveGate:i,onRequestRemoveGate:u});case"rx":case"ry":case"rz":return(0,a.jsx)(ua,{gate:e,position:n,onRequestMoveGate:i,onRequestRemoveGate:u});case"cnot":case"ccnot":return(0,a.jsx)(ra,{gate:e,position:n,onRequestMoveGate:i,onRequestRemoveGate:u});case"identity":throw new Error("Identity gates cannot be placed in this position.");default:return On(e)}}),[e,n,r,i,u]);return(0,a.jsx)(a.Fragment,{children:s})},ha=(t,e)=>({gridRow:t+1,gridColumn:e+1}),va=(t,e)=>t.itemMatrix===e.itemMatrix,ba=o.memo((t=>{let{itemMatrix:e}=t;const{gateItemsColumnLength:n,gateItemsRowLength:r,addGateItem:i,removeGateItem:u,moveGateItem:s,removeGateItemsRow:c}=z(),l=(0,o.useCallback)(((t,e)=>{i(t.gate,e)}),[]),p=(0,o.useCallback)(((t,e)=>{const{gate:n,position:a}=t;Cn(a),s(n,a,e)}),[]),d=(0,o.useCallback)(((t,e)=>{u(t,e)}),[]);return(0,a.jsxs)("div",{className:ea().wrapper,children:[(0,a.jsx)(jn,{gateItemsColumnLength:n,gateItemsRowLength:r,onRequestRemoveRow:c,showMeasureIcon:!0}),e.map(((t,e)=>(0,a.jsx)(o.Fragment,{children:t.map(((t,n)=>(0,a.jsx)("div",{className:ea().gateCell,style:ha(n,e+1),children:(0,a.jsx)(fa,{gate:t.item,position:[n,e],onRequestAddGate:l,onRequestMoveGate:p,onRequestRemoveGate:d})},t.id)))},e)))]})}),va),ya=(t,e)=>t.isOpened===e.isOpened,ga=o.memo((t=>{let{isOpened:e,onRequestClose:n}=t;const{enqueueSnackbar:r}=(0,U.Ds)(),{simulatorResult:i}=Ut(),{replace:u}=z(),s=(0,o.useCallback)((async t=>{try{const e=await zt.textToCircuitInformation({circuitType:"qasm2",text:t});u((t=>{const e=t.circuit.reduce(((t,e)=>e.length>t?e.length:t),0),n=t.circuit.map((t=>t.length>0?t.map((t=>q(null!=t?t:b.EMPTY))).concat(j(e-t.length)):[q(b.EMPTY)]));return n.forEach(((t,e)=>t.forEach(((t,a)=>{let{item:r}=t;x(r)&&I(n,r,[a,e],r.controllQubitIndex)})))),{gateItems:n}})(e)),n()}catch(t){r("Parse error: syntax error",{variant:"error"})}}),[n,r,u]);return(0,a.jsx)(Te,{isOpened:e,defaultValue:i.updateResult.codes.circuitCodes.qasm2,onSave:s,onRequestClose:n})}),ya);var xa=n(35469),_a=n(66510),wa=n(839),qa=n.n(wa);const ja=[{value:0,label:"0π"},{value:2,label:"2π"}],Oa=(0,$.ZP)(Gt.Z)({minWidth:"80px"}),Ca=t=>{let{initialValue:e,onChange:n}=t;const[r,i]=(0,o.useState)(e),u=(0,o.useCallback)(((t,e)=>{"number"==typeof e&&i(e)}),[]),s=(0,o.useCallback)((t=>{const e=t.target.value;i(""===e?"":parseFloat(e))}),[]),c=(0,o.useCallback)((()=>{"number"!=typeof r||r<0?i(0):r>2&&i(2)}),[r]);return(0,o.useEffect)((()=>{"number"==typeof r&&n(r)}),[r,n]),(0,a.jsxs)("div",{className:qa().wrapper,children:[(0,a.jsx)(_a.ZP,{min:0,max:2,step:.01,marks:ja,size:"small",value:"number"==typeof r?r:0,onChange:u,valueLabelDisplay:"auto"}),(0,a.jsx)("div",{className:qa().inputWrapper,children:(0,a.jsx)(Oa,{value:r,onChange:s,onBlur:c,inputProps:{min:0,max:2,step:.01,type:"number"},endAdornment:(0,a.jsx)(xa.Z,{position:"end",children:"π"})})})]})},Ra=(t,e)=>t.isOpened===e.isOpened,Sa=o.memo((t=>{let{isOpened:e,gateItem:n,onClose:r}=t;const{gate:i,position:u}=n,{updateGateItem:s}=z(),[c,l]=(0,o.useState)(i.param),p=(0,o.useCallback)((t=>{l(t)}),[]),d=(0,o.useCallback)((()=>{s({...i,param:c},u),r()}),[i,u,c,r,s]);return(0,a.jsxs)(ge.Z,{open:e,onClose:r,children:[(0,a.jsx)(qe.Z,{children:"Edit ".concat(i.type.toUpperCase()," Gate")}),(0,a.jsx)(ye.Z,{children:(0,a.jsx)(Ca,{initialValue:i.param,onChange:p})}),(0,a.jsxs)(we.Z,{children:[(0,a.jsx)(J.Z,{onClick:r,color:"primary",children:"Cancel"}),(0,a.jsx)(J.Z,{onClick:d,color:"primary",autoFocus:!0,children:"Save"})]})]})}),Ra);var Ma=n(46014),ka=n.n(Ma);const Ea=o.createContext(null),Ta=()=>(0,o.useContext)(Ea),Ia=()=>{const t=Xe(),e=(()=>{const[t,e]=(0,o.useState)(!1),[n,a]=(0,o.useState)();return{isOpened:t,gateItem:n,open:(0,o.useCallback)(((t,n)=>{a({gate:t,position:n}),e(!0)}),[]),close:(0,o.useCallback)((()=>{e(!1)}),[])}})(),{gateItems:n,reset:r}=z();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:ka().wrapper,children:[(0,a.jsxs)("div",{className:ka().heading,children:[(0,a.jsx)(et.Z,{variant:"overline",children:"Quantum Circuit"}),(0,a.jsxs)("div",{className:ka().actions,children:[(0,a.jsx)(ze,{onClick:t.open}),(0,a.jsx)(Ye,{onClick:r})]})]}),(0,a.jsx)("div",{children:(0,a.jsx)($n,{})}),(0,a.jsx)(Ea.Provider,{value:e.open,children:(0,a.jsx)("div",{className:ka().composer,children:(0,a.jsx)(ba,{itemMatrix:n})})})]}),(0,a.jsx)(ga,{isOpened:t.isOpened,onRequestClose:t.close}),null!=e.gateItem&&(0,a.jsx)(Sa,{isOpened:e.isOpened,gateItem:e.gateItem,onClose:e.close})]})};var Qa=n(8733),Za=n(52797);const Na=t=>{let{children:e}=t;return(0,a.jsx)(Qa.W,{backend:Za.PD,children:e})};var Ga=n(11370),Pa=n.n(Ga);const Aa=(0,$.ZP)(st.Z)({height:"100%",padding:"8px 15px",overflow:"auto"}),Va=()=>(0,a.jsx)("div",{className:Pa().wrapper,children:(0,a.jsxs)(Na,{children:[(0,a.jsx)("div",{className:Ae()(Pa().tab,Pa().circuitTab),children:(0,a.jsx)(Aa,{variant:"outlined",children:(0,a.jsx)(Ia,{})})}),(0,a.jsx)("div",{className:Ae()(Pa().tab,Pa().observableTab),children:(0,a.jsx)(Aa,{variant:"outlined",children:(0,a.jsx)(Wn,{})})})]})});class La extends o.Component{static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(t,e){const{errorHandler:n}=this.props;null!=n&&n(t,e)}render(){const{children:t}=this.props,{hasError:e}=this.state;return t(e)}constructor(t){super(t),this.state={hasError:!1}}}var Da=n(80307),Ya=n.n(Da);const za=()=>(0,a.jsx)(La,{children:()=>(0,a.jsxs)(U.wT,{autoHideDuration:3e3,children:[(0,a.jsx)(ut,{}),(0,a.jsx)(Wt,{children:(0,a.jsxs)("div",{className:Ya().wrapper,children:[(0,a.jsx)("div",{className:Ya().uiState,children:(0,a.jsx)(Va,{})}),(0,a.jsx)("div",{className:Ya().charts,children:(0,a.jsx)(be,{})}),(0,a.jsx)(Ge,{})]})})]})});var Xa=()=>(0,a.jsx)(r.Wh,{children:(0,a.jsx)(X,{children:(0,a.jsx)(H,{children:(0,a.jsx)(za,{})})})})},41577:function(t){t.exports={heading:"CodeViewTab_heading__5uGqB"}},84471:function(t){t.exports={tooltipWrapper:"AmplitudesChart_tooltipWrapper__TDeOL",tooltipLabel:"AmplitudesChart_tooltipLabel__hXlqF",tooltipValue:"AmplitudesChart_tooltipValue__7ddKW"}},3423:function(t){t.exports={wrapper:"EmptyGate_wrapper__HJYW6",isActive:"EmptyGate_isActive__Qj3_V",canDrop:"EmptyGate_canDrop__07pxm"}},16009:function(t){t.exports={wrapper:"GateCollections_wrapper__qhUsD",item:"GateCollections_item__TTKX_"}},40630:function(t){t.exports={wrapper:"GateComposer_wrapper__Wpy1N",gateCell:"GateComposer_gateCell__M3_49"}},7579:function(t){t.exports={wrapper:"GateInput_wrapper__mq7EK",item:"GateInput_item__bUwNV"}},67914:function(t){t.exports={wrapper:"ObservableTab_wrapper__9OQDX",heading:"ObservableTab_heading__T6icl",actions:"ObservableTab_actions__q9qNq",composer:"ObservableTab_composer__C1Ijy"}},12439:function(t){t.exports={heading:"AppHeader_heading__W1R2i"}},40547:function(t){t.exports={wrapper:"ChartTabContainer_wrapper__yBkwl",tab:"ChartTabContainer_tab__bl9dv"}},11370:function(t){t.exports={wrapper:"UIStateTabContainer_wrapper___G6H6",tab:"UIStateTabContainer_tab__fDDXM",circuitTab:"UIStateTabContainer_circuitTab__ZkGud",observableTab:"UIStateTabContainer_observableTab__jm1WI"}},60394:function(t){t.exports={control:"ChartContainer_control__ZBDdw"}},487:function(t){t.exports={wrapper:"RunButton_wrapper__O3LjR"}},34965:function(t){t.exports={wrapper:"DroppableMultiGate_wrapper__YLar9",connectedLine:"DroppableMultiGate_connectedLine__aIc7d"}},46312:function(t){t.exports={wrapper:"DroppableParametricGate_wrapper__3piGk",isSelected:"DroppableParametricGate_isSelected__95rgG"}},37404:function(t){t.exports={wrapper:"EmptyGate_wrapper__GTPVD",isActive:"EmptyGate_isActive__jLo_F",canDrop:"EmptyGate_canDrop___30Pi"}},53090:function(t){t.exports={wrapper:"QubitGate_wrapper__jmJz1"}},6737:function(t){t.exports={wrapper:"CircuitGateCollections_wrapper__LsMrX",item:"CircuitGateCollections_item__KMtYg"}},8209:function(t){t.exports={wrapper:"CircuitGateComposer_wrapper__J523M",gateCell:"CircuitGateComposer_gateCell__rf_M4"}},839:function(t){t.exports={wrapper:"ParametricValueSlider_wrapper__F1Myu",inputWrapper:"ParametricValueSlider_inputWrapper__74f3E"}},46014:function(t){t.exports={wrapper:"QuantumCircuitTab_wrapper__FYqSg",heading:"QuantumCircuitTab_heading__EckJj",actions:"QuantumCircuitTab_actions__DgSdi",composer:"QuantumCircuitTab_composer__ZPqxz"}},73953:function(t){t.exports={wrapper:"ContextMenu_wrapper___4z38"}},34682:function(t){t.exports={wrapper:"Gate_wrapper__pyKuG",isDragging:"Gate_isDragging__TOZcF",parametricValue:"Gate_parametricValue__ohPcl",multiGate:"Gate_multiGate__WPF31",controlQubitGate:"Gate_controlQubitGate__Fyl8t"}},74702:function(t){t.exports={wrapper:"DraggableGate_wrapper__WFCSu"}},86912:function(t){t.exports={label:"GateLabels_label__hethD",labelIndex:"GateLabels_labelIndex__obGm0",line:"GateLabels_line__biYo7",addButton:"GateLabels_addButton__A_V_e",removeButton:"GateLabels_removeButton__Vz_9X"}},80307:function(t){t.exports={wrapper:"Home_wrapper__1h3zx",uiState:"Home_uiState__SjV35",charts:"Home_charts__Jfxme"}},59186:function(t,e){(()=>{"use strict";var t={799:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});e.QuantumState=function(t){}},914:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0});var a=n(799);e.QuantumState=a.QuantumState},234:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0});var a=n(412),r=n(984),o=n(46),i=function(){function t(t){this._quantumStateGenerator=t.quantumStateGenerator,this._mapQubitQuantumState=[]}return t.prototype.createNewQubit=function(t,e){var n=this._quantumStateGenerator(e.value);this._mapQubitQuantumState.push({qubit:t,bitId:0,quantumState:n})},t.prototype.requestOperation=function(t){for(var e=this,n=[],a=1;a<arguments.length;a++)n[a-1]=arguments[a];var i,u=n.map((function(t){return e._lookupQubitQuantumStateMapElementFromQubit(t)}));switch(t){case r.QuantumOperationTypes.X:case r.QuantumOperationTypes.Y:case r.QuantumOperationTypes.Z:case r.QuantumOperationTypes.S:case r.QuantumOperationTypes.T:case r.QuantumOperationTypes.H:var s=u[0];this._requestOperationSingleQubit(t,s);break;case r.QuantumOperationTypes.CONTROLLED_X:case r.QuantumOperationTypes.CONTROLLED_Y:case r.QuantumOperationTypes.CONTROLLED_Z:var c=u[0];i=u[1],c.quantumState!==i.quantumState&&this._mergeQubitMapElement(c,i),this._requestControlledOperationQubit(t,c,i);break;case r.QuantumOperationTypes.TOFFOLI:var l=u[0],p=u[1];i=u[2],l.quantumState!==p.quantumState&&this._mergeQubitMapElement(l,p),l.quantumState!==i.quantumState&&this._mergeQubitMapElement(l,i),o.toffoli(l.quantumState,l.bitId,p.bitId,i.bitId)}},t.prototype.requestRotateOperation=function(t,e,n){var a=this._lookupQubitQuantumStateMapElementFromQubit(n);switch(t){case r.QuantumOperationTypes.R:a.quantumState.r(a.bitId,e);break;case r.QuantumOperationTypes.ROTATEX:a.quantumState.rx(a.bitId,e);break;case r.QuantumOperationTypes.ROTATEY:a.quantumState.ry(a.bitId,e);break;case r.QuantumOperationTypes.ROTATEZ:a.quantumState.rz(a.bitId,e)}},t.prototype.requestMeasure=function(t){var e=this._lookupQubitQuantumStateMapElementFromQubit(t);return this._measureQubit(e)},t.prototype.toStringQubit=function(t){return this._lookupQubitQuantumStateMapElementFromQubit(t).quantumState.toString()},t.prototype.getCompositedQubits=function(t){var e=this._lookupQubitQuantumStateMapElementFromQubit(t).quantumState;return this._mapQubitQuantumState.filter((function(t){return t.quantumState===e})).map((function(t){return t.qubit}))},t.prototype.cloneQubits=function(t){var e=this,n=this._lookupQubitQuantumStateMapElementFromQubit(t).quantumState,r=n.simulated.clone(),o=this._mapQubitQuantumState.filter((function(t){return t.quantumState===n})),i=o.map((function(t){var n=new a.Qubit,o=e._lookupQubitQuantumStateMapElementFromQubit(n);return o.quantumState,o.bitId=t.bitId,o.quantumState=r,o}));return{index:o.findIndex((function(e){return e.qubit===t})),qubits:i.map((function(t){return t.qubit}))}},t.prototype.getStateVectorFromQubit=function(t){return this._lookupQubitQuantumStateMapElementFromQubit(t).quantumState.simulated.getStateVector()},t.prototype.mergeStateVector=function(t){var e=this,n=t.map((function(t){return e._lookupQubitQuantumStateMapElementFromQubit(t)})),a=n[0];n.slice(1).forEach((function(t){a.quantumState!==t.quantumState&&e._mergeQubitMapElement(a,t)}))},t.prototype._requestOperationSingleQubit=function(t,e){switch(t){case r.QuantumOperationTypes.X:e.quantumState.x(e.bitId);break;case r.QuantumOperationTypes.Y:e.quantumState.y(e.bitId);break;case r.QuantumOperationTypes.Z:e.quantumState.z(e.bitId);break;case r.QuantumOperationTypes.S:e.quantumState.s(e.bitId);break;case r.QuantumOperationTypes.T:e.quantumState.t(e.bitId);break;case r.QuantumOperationTypes.H:e.quantumState.h(e.bitId)}},t.prototype._requestControlledOperationQubit=function(t,e,n){switch(t){case r.QuantumOperationTypes.CONTROLLED_X:n.quantumState.controlledX(e.bitId,n.bitId);break;case r.QuantumOperationTypes.CONTROLLED_Y:n.quantumState.controlledY(e.bitId,n.bitId);break;case r.QuantumOperationTypes.CONTROLLED_Z:n.quantumState.controlledZ(e.bitId,n.bitId)}},t.prototype._measureQubit=function(t){return t.quantumState.measure(t.bitId).result},t.prototype._lookupQubitQuantumStateMapElementFromQubit=function(t){return this._mapQubitQuantumState.find((function(e){return e.qubit===t}))},t.prototype._mergeQubitMapElement=function(t,e){var n=e.quantumState.length,a=this._mapQubitQuantumState.filter((function(e){return e.quantumState===t.quantumState})),r=this._mapQubitQuantumState.filter((function(t){return t.quantumState===e.quantumState})),o=t.quantumState.merge(e.quantumState);a.forEach((function(t){t.quantumState=o})),r.forEach((function(t){t.quantumState=o})),a.forEach((function(t){return t.bitId=t.bitId+n}))},t}();e.Core=i},196:function(t,e,n){var a,r=this&&this.__extends||(a=function(t,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},a(t,e)},function(t,e){function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(914),i=n(202);e.quantumStateJsQubitsGenerator=function(t){return new u(t)};var u=function(t){function e(n){var a=t.call(this,n)||this;if(a._qstate=i.jsqubits("|0>"),"number"==typeof n)switch(n){case 0:break;case 1:a._qstate=a._qstate.x(0)}else switch(n){case"0":case"|0>":break;case"1":case"|1>":a._qstate=a._qstate.x(0);break;case"+":a._qstate=a._qstate.hadamard(0);break;case"-":a._qstate=a._qstate.x(0),a._qstate=a._qstate.hadamard(0)}return a.simulated={clone:function(){var t=new e(0);return t._qstate=a._qstate.normalize(),t},getStateVector:function(){for(var t=Math.pow(2,a._qstate.numBits()),e=[],n=0;n<t;n++){var r=a._qstate.amplitude(n);e.push({re:r.real,im:r.imaginary})}return e}},a}return r(e,t),e.prototype.x=function(t){this._qstate=this._qstate.X(t)},e.prototype.y=function(t){this._qstate=this._qstate.Y(t)},e.prototype.z=function(t){this._qstate=this._qstate.Z(t)},e.prototype.r=function(t,e){this._qstate=this._qstate.r(t,e)},e.prototype.s=function(t){this._qstate=this._qstate.s(t)},e.prototype.t=function(t){this._qstate=this._qstate.t(t)},e.prototype.h=function(t){this._qstate=this._qstate.hadamard(t)},e.prototype.cnot=function(t,e){this._qstate=this._qstate.controlledX(t,e)},e.prototype.controlledX=function(t,e){this._qstate=this._qstate.controlledX(t,e)},e.prototype.controlledY=function(t,e){this._qstate=this._qstate.controlledY(t,e)},e.prototype.controlledZ=function(t,e){this._qstate=this._qstate.controlledZ(t,e)},e.prototype.rx=function(t,e){this._qstate=this._qstate.rotateX(t,e)},e.prototype.ry=function(t,e){this._qstate=this._qstate.rotateY(t,e)},e.prototype.rz=function(t,e){this._qstate=this._qstate.rotateZ(t,e)},e.prototype.measure=function(t){var e=this._qstate.measure(t);return this._qstate=e.newState,{newQuantumState:this,result:e.result}},e.prototype.merge=function(t){return this._qstate=this._qstate.tensorProduct(t._qstate),this},Object.defineProperty(e.prototype,"length",{get:function(){return this._qstate.numBits()},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return this._qstate.toString()},e}(o.QuantumState);e.QuantumStateJsqubits=u},412:function(t,e,n){var a=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var a=Array(t),r=0;for(e=0;e<n;e++)for(var o=arguments[e],i=0,u=o.length;i<u;i++,r++)a[r]=o[i];return a};Object.defineProperty(e,"__esModule",{value:!0});var r=n(984),o=function(){function t(e){void 0===e&&(e={value:0}),t._core.createNewQubit(this,e),this._createSimulated()}return t.prototype.x=function(){t._core.requestOperation(r.QuantumOperationTypes.X,this)},t.prototype.y=function(){t._core.requestOperation(r.QuantumOperationTypes.Y,this)},t.prototype.z=function(){t._core.requestOperation(r.QuantumOperationTypes.Z,this)},t.prototype.r=function(e){t._core.requestRotateOperation(r.QuantumOperationTypes.R,e,this)},t.prototype.s=function(){t._core.requestOperation(r.QuantumOperationTypes.S,this)},t.prototype.t=function(){t._core.requestOperation(r.QuantumOperationTypes.T,this)},t.prototype.h=function(){t._core.requestOperation(r.QuantumOperationTypes.H,this)},t.prototype.cnot=function(e){t._core.requestOperation(r.QuantumOperationTypes.CONTROLLED_X,e,this)},t.prototype.controlledX=function(e){t._core.requestOperation(r.QuantumOperationTypes.CONTROLLED_X,e,this)},t.prototype.controlledY=function(e){t._core.requestOperation(r.QuantumOperationTypes.CONTROLLED_Y,e,this)},t.prototype.controlledZ=function(e){t._core.requestOperation(r.QuantumOperationTypes.CONTROLLED_Z,e,this)},t.prototype.rotateX=function(e){t._core.requestRotateOperation(r.QuantumOperationTypes.ROTATEX,e,this)},t.prototype.rotateY=function(e){t._core.requestRotateOperation(r.QuantumOperationTypes.ROTATEY,e,this)},t.prototype.rotateZ=function(e){t._core.requestRotateOperation(r.QuantumOperationTypes.ROTATEZ,e,this)},t.prototype.toffoli=function(e,n){t._core.requestOperation(r.QuantumOperationTypes.TOFFOLI,e,n,this)},t.prototype.measure=function(){return t._core.requestMeasure(this)},t.prototype.toString=function(){return t._core.toStringQubit(this)},t.prototype._createSimulated=function(){var e=this;this.simulated={clone:function(){return t._core.cloneQubits(e)},compositedQubits:function(){return t._core.getCompositedQubits(e)},getStateVector:function(){return t._core.getStateVectorFromQubit(e)},mergeStateVector:function(n){Array.isArray(n)||(n=[n]),t._core.mergeStateVector(a([e],n))}}},t}();e.Qubit=o},458:(t,e,n)=>{n(914).QuantumState;var a=n(196);a.QuantumStateJsqubits;var r=n(412);e.xz=r.Qubit;var o=n(234);o.Core,n(299);var i={quantumStateGenerator:a.quantumStateJsQubitsGenerator},u=new o.Core(i);r.Qubit._core=u},46:(t,e)=>{function n(t,e){t.t(e),t.t(e),t.t(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.toffoli=function(t,e,a,r){t.t(a),t.h(r),t.t(r),t.cnot(a,r),n(t,r),t.cnot(a,r),t.cnot(e,a),n(t,a),t.cnot(a,r),t.t(r),t.cnot(a,r),t.cnot(e,a),t.cnot(e,r),n(t,r),t.cnot(e,r),t.t(e),t.h(r)}},299:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0});var a=n(412);e.intToQubits=function(t,e){if(!Number.isInteger(t))throw new Error("value must be integer.");var n=t.toString(2),r=n.length;if(r>e)throw new Error("Designated qubits length cannot express given number.");for(var o=[],i=0;i<e;i++)i<r&&"1"===n[r-i-1]?o.push(new a.Qubit({value:1})):o.push(new a.Qubit({value:0}));return o}},984:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.X=0]="X",t[t.Y=1]="Y",t[t.Z=2]="Z",t[t.R=3]="R",t[t.S=4]="S",t[t.T=5]="T",t[t.H=6]="H",t[t.CONTROLLED_X=7]="CONTROLLED_X",t[t.CONTROLLED_Y=8]="CONTROLLED_Y",t[t.CONTROLLED_Z=9]="CONTROLLED_Z",t[t.ROTATEX=10]="ROTATEX",t[t.ROTATEY=11]="ROTATEY",t[t.ROTATEZ=12]="ROTATEZ",t[t.TOFFOLI=13]="TOFFOLI"}(e.QuantumOperationTypes||(e.QuantumOperationTypes={}))},644:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}(),r=i(n(766)),o=i(n(287));function i(t){return t&&t.__esModule?t:{default:t}}var u=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.equal=this.eql,this.equals=this.eql,(0,r.default)(arguments,1,2,"Must supply a real, and optionally an imaginary, argument to Complex()"),n=n||0,this.real=e,this.imaginary=n}return a(t,[{key:"add",value:function(e){return(0,r.default)(arguments,1,1,"Must supply 1 parameter to add()"),o.default.isNumber(e)?new t(this.real+e,this.imaginary):new t(this.real+e.real,this.imaginary+e.imaginary)}},{key:"multiply",value:function(e){return(0,r.default)(arguments,1,1,"Must supply 1 parameter to multiply()"),o.default.isNumber(e)?new t(this.real*e,this.imaginary*e):new t(this.real*e.real-this.imaginary*e.imaginary,this.real*e.imaginary+this.imaginary*e.real)}},{key:"conjugate",value:function(){return new t(this.real,-this.imaginary)}},{key:"toString",value:function(){if(0===this.imaginary)return""+this.real;var t;if(t=1===this.imaginary?"i":-1===this.imaginary?"-i":this.imaginary+"i",0===this.real)return t;var e=this.imaginary<0?"":"+";return this.real+e+t}},{key:"inspect",value:function(){return this.toString()}},{key:"format",value:function(e){var n=this.real,a=this.imaginary;if(e&&null!=e.decimalPlaces){var r=Math.pow(10,e.decimalPlaces);n=Math.round(n*r)/r,a=Math.round(a*r)/r}return new t(n,a).toString()}},{key:"negate",value:function(){return new t(-this.real,-this.imaginary)}},{key:"magnitude",value:function(){return Math.sqrt(this.real*this.real+this.imaginary*this.imaginary)}},{key:"phase",value:function(){return Math.atan2(this.imaginary,this.real)}},{key:"subtract",value:function(e){return(0,r.default)(arguments,1,1,"Must supply 1 parameter to subtract()"),o.default.isNumber(e)?new t(this.real-e,this.imaginary):new t(this.real-e.real,this.imaginary-e.imaginary)}},{key:"eql",value:function(e){return e instanceof t&&this.real===e.real&&this.imaginary===e.imaginary}},{key:"closeTo",value:function(t){return Math.abs(this.real-t.real)<1e-4&&Math.abs(this.imaginary-t.imaginary)<1e-4}}]),t}();u.ONE=new u(1,0),u.ZERO=new u(0,0),u.SQRT2=new u(Math.SQRT2,0),u.SQRT1_2=new u(Math.SQRT1_2,0),e.default=u},382:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}();function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var n=e-t.length,a=0;a<n;a++)t="0"+t;return t}var o=function(){function t(e,n,r){a(this,t),this.numBits=e,this.result=n,this.newState=r}return n(t,[{key:"toString",value:function(){return"{result: "+this.result+", newState: "+this.newState+"}"}},{key:"asBitString",value:function(){return r(this.result.toString(2),this.numBits)}}]),t}();e.default=o,e.QStateComponent=function(){function t(e,n,r){a(this,t),this.numBits=e,this.index=n,this.amplitude=r}return n(t,[{key:"asNumber",value:function(){return parseInt(this.index,10)}},{key:"asBitString",value:function(){return r(parseInt(this.index,10).toString(2),this.numBits)}}]),t}()},933:(t,e)=>{function n(t,e,a){if(0===e)return 1;if(1===e)return t;var r=n(t,Math.floor(e/2),a),o=r*r%a;return e%2==1&&(o=t*o%a),o}function a(t){return Math.abs(t-Math.round(t))<1e-7}function r(t){var e=Math.log(t)/Math.log(2),n=Math.floor(e);if(e===n)return 2;for(n--;n>1;n--){var r=Math.pow(t,1/n);if(a(r))return Math.round(r)}return 0}function o(t,e){for(;0!==e;){var n=t%e;t=e,e=n}return t}function i(t,e){return t*e/o(t,e)}function u(t){return t>=0?Math.floor(t):Math.ceil(t)}function s(t,e){var n=void 0,a=void 0;Math.abs(t)>=1?a=t-(n=u(t)):(n=0,a=t);for(var r={numerator:1,denominator:0},o={numerator:n,denominator:1},i=[n];Math.abs(t-o.numerator/o.denominator)>e;){var s=1/a,c=u(s);a=s-c,i.push(c);var l={numerator:c*o.numerator+r.numerator,denominator:c*o.denominator+r.denominator};r=o,o=l}var p=o,d=p.numerator,m=p.denominator;return o.denominator<0&&(d*=-1,m*=-1),{quotients:i,numerator:d,denominator:m}}function c(t,e){var n=function(t){for(var e=[],n=0;n<t.length;n++)e[n]=t[n];return e}(t);function a(t,e){var a=1<<t;if(!(a&n[e]))for(var r=e+1;r<n.length;r++)if(a&n[r]){var o=n[e];return n[e]=n[r],void(n[r]=o)}}function r(t,e){for(var a=n[e],r=1<<t,o=0;o<n.length;o++)o!==e&&r&n[o]&&(n[o]^=a)}function o(t,e,a){for(var r=1<<e,o=r,i=0;i<a;i++)n[i]&r&&(o+=1<<t[i]);return o}var i=[];return function(t){for(var o=0,i=e-1;i>=0;i--)a(i,o),1<<i&n[o]&&(t[o]=i,r(i,o),o++)}(i),function(t){for(var n=[],a=0,r=t[a],i=e-1;i>=0;i--)i===r?r=t[++a]:n.push(o(t,i,a));return n}(i)}Object.defineProperty(e,"__esModule",{value:!0}),e.powerMod=n,e.powerFactor=r,e.gcd=o,e.lcm=i,e.continuedFraction=s,e.findNullSpaceMod2=c,e.default={powerMod:n,powerFactor:r,gcd:o,lcm:i,continuedFraction:s,findNullSpaceMod2:c}},899:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}(),r=n(382),o=l(r),i=l(n(644)),u=l(n(766)),s=l(n(287)),c=l(n(163));function l(t){return t&&t.__esModule?t:{default:t}}function p(t){return t=t.replace(/^\|/,"").replace(/>$/,""),{value:parseInt(t,2),length:t.length}}function d(t,e,n){n.magnitude()>c.default.roundToZero&&(t[e]=n)}function m(t,e,n){var a=(t[e]||i.default.ZERO).add(n);a.magnitude()>c.default.roundToZero?t[e]=a:delete t[e]}function f(t,e){if(null==t)throw new Error("bit qualification must be supplied");if(t===c.default.ALL)return{from:0,to:e-1};if(s.default.isNumber(t))return{from:t,to:t};if(null!=t.from&&null!=t.to){if(t.from>t.to)throw new Error('bit range must have "from" being less than or equal to "to"');return t}throw new Error("bit qualification must be either: a number, Constants.ALL, or {from: n, to: m}")}function h(t,e){if(t>e)throw new Error("bit range must have `from` being less than or equal to `to`");for(var n=[],a=t;a<=e;a++)n.push(a);return n}function v(t,e){if(null==t)throw new Error("bit qualification must be supplied");if(s.default.isArray(t))return t;if(s.default.isNumber(t))return[t];if(t===c.default.ALL)return h(0,e-1);if(null!=t.from&&null!=t.to)return h(t.from,t.to);throw new Error("bit qualification must be either: a number, an array of numbers, Constants.ALL, or {from: n, to: m}")}function b(t){var e=null;if(t){e=0;for(var n=0;n<t.length;n++)e+=1<<t[n]}return e}var y=[[i.default.SQRT1_2,i.default.SQRT1_2],[i.default.SQRT1_2,i.default.SQRT1_2.negate()]],g=[[i.default.ZERO,i.default.ONE],[i.default.ONE,i.default.ZERO]],x=[[i.default.ZERO,new i.default(0,-1)],[new i.default(0,1),i.default.ZERO]],_=[[i.default.ONE,i.default.ZERO],[i.default.ZERO,i.default.ONE.negate()]],w=[[i.default.ONE,i.default.ZERO],[i.default.ZERO,new i.default(0,1)]],q=[[i.default.ONE,i.default.ZERO],[i.default.ZERO,new i.default(Math.SQRT1_2,Math.SQRT1_2)]],j=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.kron=this.tensorProduct,this.R=this.r,this.cnot=this.controlledX,this.not=this.x,this.X=this.x,this.Y=this.y,this.Z=this.z,this.S=this.s,this.T=this.t,this.equal=this.eql,(0,u.default)(arguments,1,"new QState() must be supplied with number of bits (optionally with amplitudes as well)"),n=n||[c.default.ONE],this.numBits=function(){return e},this.amplitude=function(t){var e=s.default.isString(t)?p(t).value:t;return n[e]||i.default.ZERO},this.each=function(t){for(var a=Object.keys(n),o=0;o<a.length;o++){var i=a[o];if(!1===t(new r.QStateComponent(e,i,n[i])))break}}}return a(t,[{key:"multiply",value:function(e){s.default.isNumber(e)&&(e=new i.default(e));var n={};return this.each((function(t){n[t.index]=t.amplitude.multiply(e)})),new t(this.numBits(),n)}},{key:"add",value:function(e){var n={};return this.each((function(t){n[t.index]=t.amplitude})),e.each((function(t){var e=n[t.index]||i.default.ZERO;n[t.index]=t.amplitude.add(e)})),new t(this.numBits(),n)}},{key:"subtract",value:function(t){return this.add(t.multiply(-1))}},{key:"tensorProduct",value:function(e){var n={};return this.each((function(t){e.each((function(a){var r=(t.asNumber()<<e.numBits())+a.asNumber(),o=t.amplitude.multiply(a.amplitude);n[r]=o}))})),new t(this.numBits()+e.numBits(),n)}},{key:"controlledHadamard",value:function(t,e){return(0,u.default)(arguments,2,2,"Must supply control and target bits to controlledHadamard()"),this.controlledApplicationOfqBitOperator(t,e,y)}},{key:"hadamard",value:function(t){return(0,u.default)(arguments,1,1,"Must supply target bits to hadamard() as either a single index or a range."),this.controlledHadamard(null,t)}},{key:"controlledXRotation",value:function(t,e,n){(0,u.default)(arguments,3,3,"Must supply control bits, target bits, and an angle, to controlledXRotation()");var a=n/2,r=new i.default(Math.cos(a)),o=new i.default(0,-Math.sin(a)),s=[[r,o],[o,r]];return this.controlledApplicationOfqBitOperator(t,e,s)}},{key:"rotateX",value:function(t,e){return(0,u.default)(arguments,2,2,"Must supply target bits and angle to rotateX."),this.controlledXRotation(null,t,e)}},{key:"controlledYRotation",value:function(t,e,n){(0,u.default)(arguments,3,3,"Must supply control bits, target bits, and an angle, to controlledYRotation()");var a=n/2,r=new i.default(Math.cos(a)),o=new i.default(Math.sin(a)),s=[[r,o.negate()],[o,r]];return this.controlledApplicationOfqBitOperator(t,e,s)}},{key:"rotateY",value:function(t,e){return(0,u.default)(arguments,2,2,"Must supply target bits and angle to rotateY."),this.controlledYRotation(null,t,e)}},{key:"controlledZRotation",value:function(t,e,n){(0,u.default)(arguments,3,3,"Must supply control bits, target bits, and an angle to controlledZRotation()");var a=n/2,r=new i.default(Math.cos(a)),o=new i.default(0,Math.sin(a)),s=[[r.subtract(o),i.default.ZERO],[i.default.ZERO,r.add(o)]];return this.controlledApplicationOfqBitOperator(t,e,s)}},{key:"rotateZ",value:function(t,e){return(0,u.default)(arguments,2,2,"Must supply target bits and angle to rotateZ."),this.controlledZRotation(null,t,e)}},{key:"controlledR",value:function(t,e,n){(0,u.default)(arguments,3,3,"Must supply control and target bits, and an angle to controlledR().");var a=new i.default(Math.cos(n)),r=new i.default(0,Math.sin(n)),o=[[i.default.ONE,i.default.ZERO],[i.default.ZERO,a.add(r)]];return this.controlledApplicationOfqBitOperator(t,e,o)}},{key:"r",value:function(t,e){return(0,u.default)(arguments,2,2,"Must supply target bits and angle to r()."),this.controlledR(null,t,e)}},{key:"controlledX",value:function(t,e){return(0,u.default)(arguments,2,2,"Must supply control and target bits to cnot() / controlledX()."),this.controlledApplicationOfqBitOperator(t,e,g)}},{key:"x",value:function(t){return(0,u.default)(arguments,1,1,"Must supply target bits to x() / not()."),this.controlledX(null,t)}},{key:"controlledY",value:function(t,e){return(0,u.default)(arguments,2,2,"Must supply control and target bits to controlledY()."),this.controlledApplicationOfqBitOperator(t,e,x)}},{key:"y",value:function(t){return(0,u.default)(arguments,1,1,"Must supply target bits to y()."),this.controlledY(null,t)}},{key:"controlledZ",value:function(t,e){return(0,u.default)(arguments,2,2,"Must supply control and target bits to controlledZ()."),this.controlledApplicationOfqBitOperator(t,e,_)}},{key:"z",value:function(t){return(0,u.default)(arguments,1,1,"Must supply target bits to z()."),this.controlledZ(null,t)}},{key:"controlledS",value:function(t,e){return(0,u.default)(arguments,2,2,"Must supply control and target bits to controlledS()."),this.controlledApplicationOfqBitOperator(t,e,w)}},{key:"s",value:function(t){return(0,u.default)(arguments,1,1,"Must supply target bits to s()."),this.controlledS(null,t)}},{key:"controlledT",value:function(t,e){return(0,u.default)(arguments,2,2,"Must supply control and target bits to controlledT()."),this.controlledApplicationOfqBitOperator(t,e,q)}},{key:"t",value:function(t){return(0,u.default)(arguments,1,1,"Must supply target bits to t()."),this.controlledT(null,t)}},{key:"controlledSwap",value:function(e,n,a){(0,u.default)(arguments,3,3,"Must supply controlBits, targetBit1, and targetBit2 to controlledSwap()");var r={};null!=e&&(e=v(e,this.numBits()));var o=b(e),i=1<<n,s=1<<a;return this.each((function(t){var u=t.asNumber(),c=u;null!=e&&(u&o)!==o||(c=u&~i&~s|(u&s)>>a<<n|(u&i)>>n<<a),r[c]=t.amplitude})),new t(this.numBits(),r)}},{key:"swap",value:function(t,e){return(0,u.default)(arguments,2,2,"Must supply targetBit1 and targetBit2 to swap()"),this.controlledSwap(null,t,e)}},{key:"toffoli",value:function(){(0,u.default)(arguments,2,"At least one control bit and a target bit must be supplied to calls to toffoli()");for(var t=arguments[arguments.length-1],e=[],n=0;n<arguments.length-1;n++)e.push(arguments[n]);return this.controlledX(e,t)}},{key:"controlledApplicationOfqBitOperator",value:function(e,n,a){(0,u.default)(arguments,3,3,"Must supply control bits, target bits, and qbitFunction to controlledApplicationOfqBitOperator().");var r=v(n,this.numBits()),o=null;null!=e&&function(t,e){for(var n=0;n<t.length;n++)for(var a=t[n],r=0;r<e.length;r++)if(a===e[r])throw new Error("control and target bits must not be the same nor overlap")}(o=v(e,this.numBits()),r);for(var i=this,s=0;s<r.length;s++){var c=r[s];i=t.applyToOneBit(o,c,a,i)}return i}},{key:"applyFunction",value:function(e,n,a){(0,u.default)(arguments,3,3,"Must supply control bits, target bits, and functionToApply to applyFunction().");var r=this,o=f(e,this.numBits()),i=f(n,this.numBits());!function(t,e){if(t.to>=e.from&&e.to>=t.from)throw new Error("control and target bits must not be the same nor overlap")}(o,i);var s={},c={},l=(1<<o.to+1)-1,p=(1<<1+i.to-i.from)-1<<i.from;return this.each((function(t){var e=t.asNumber();if(!c[t.index]){var n=(e&l)>>o.from,u=e^a(n)<<i.from&p;u===e?d(s,e,t.amplitude):(c[u]=!0,d(s,e,r.amplitude(u)),d(s,u,t.amplitude))}})),new t(this.numBits(),s)}},{key:"random",value:function(){return Math.random()}},{key:"normalize",value:function(){var e={},n=0;this.each((function(t){var e=t.amplitude.magnitude();n+=e*e}));var a=new i.default(1/Math.sqrt(n));return this.each((function(t){e[t.index]=t.amplitude.multiply(a)})),new t(this.numBits(),e)}},{key:"measure",value:function(e){(0,u.default)(arguments,1,1,"Must supply bits to be measured to measure().");var n,a,r,i,s=this.numBits(),c=v(e,s),l=(a=(n=this).random(),r=void 0,i=0,n.each((function(t){var e=t.amplitude.magnitude();return i+=e*e,r=t.index,i<=a})),parseInt(r,10)),p=b(c),d=l&p,m={};this.each((function(t){var e=t.asNumber();(e&p)===d&&(m[e]=t.amplitude)}));for(var f=0,h=s-1;h>=0;h--)c.indexOf(h)>=0&&(f<<=1,l&1<<h&&(f+=1));var y=new t(this.numBits(),m).normalize();return new o.default(c.length,f,y)}},{key:"qft",value:function(t){(0,u.default)(arguments,1,1,"Must supply bits to be measured to qft().");var e=v(t,this.numBits());return function(t,e){for(;e.length>1;)t=t.swap(e[0],e[e.length-1]),e=e.slice(1,e.length-1);return t}(function t(e,n){var a=n[0];if(n.length>1){e=t(e,n.slice(1));for(var r=1;r<n.length;r++){var o=n[r],i=2*Math.PI/(1<<r+1);e=e.controlledR(a,o,i)}}return e.hadamard(a)}(this,e),e)}},{key:"eql",value:function(e){function n(t,e){var n=!0;return t.each((function(t){return n=t.amplitude.eql(e.amplitude(t.asNumber()))})),n}return!!e&&e instanceof t&&this.numBits()===e.numBits()&&n(this,e)&&n(e,this)}},{key:"toString",value:function(){function t(t,e){var n=t.format(e);return"1"===n?"":"("+n+")"}function e(t,e){return t.asNumber()-e.asNumber()}for(var n=void 0,a="",r={decimalPlaces:4},o=function(t){var n=[];return t.each((function(t){n.push(t)})),n.sort(e),n}(this),i=0;i<o.length;i++)""!==a&&(a+=" + "),a=a+t((n=o[i]).amplitude,r)+"|"+n.asBitString()+">";return a}}],[{key:"fromBits",value:function(e){(0,u.default)(arguments,1,1,"Must supply a bit string");var n=p(e),a={};return a[n.value]=c.default.ONE,new t(n.length,a)}},{key:"applyOperatorMatrix",value:function(t,e,n){return[t[0][e].multiply(n),t[1][e].multiply(n)]}},{key:"applyToOneBit",value:function(e,n,a,r){var o={},i=1<<n,u=~i,s=b(e);return r.each((function(n){var r=n.asNumber();if(null==e||(r&s)===s){var c=(i&r)>0?1:0,l=t.applyOperatorMatrix(a,c,n.amplitude),p=r|i;m(o,r&u,l[0]),m(o,p,l[1])}else o[r]=n.amplitude})),new t(r.numBits(),o)}}]),t}();e.default=j},163:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0});var a,r=(a=n(644))&&a.__esModule?a:{default:a};e.default={ZERO:r.default.ZERO,ONE:new r.default(1,0),ALL:"ALL",roundToZero:1e-7}},202:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.jsqubits=void 0;var a=c(n(899)),r=c(n(644)),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(933)),i=n(382),u=c(i),s=c(n(163));function c(t){return t&&t.__esModule?t:{default:t}}function l(t){return a.default.fromBits(t)}l.complex=function(t,e){return new r.default(t,e)},l.real=function(t){return new r.default(t,0)},l.QMath=o,l.Complex=r.default,l.QState=a.default,l.Measurement=u.default,l.QStateComponent=i.QStateComponent,Object.assign(l,s.default),e.default=l,e.jsqubits=l},287:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){return Object.prototype.toString.call(t)};e.default={isNull:function(t){return"[object Null]"===n(t)},isObject:function(t){return"[object Object]"===n(t)},isArray:function(t){return"[object Array]"===n(t)},isString:function(t){return"[object String]"===n(t)},isNumber:function(t){return"[object Number]"===n(t)},isBoolean:function(t){return"[object Boolean]"===n(t)},isDate:function(t){return"[object Date]"===n(t)},isUndefined:function(t){return"[object Undefined]"===n(t)},isRegExp:function(t){return"[object RegExp]"===n(t)}}},766:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){for(var n=1e4,a="Must supply at least "+e+" parameters.",r=arguments.length,o=Array(r>2?r-2:0),i=2;i<r;i++)o[i-2]=arguments[i];if(o.length>2)throw new Error("Internal error: too many arguments to validateArgs");if(2===o.length?(n=o[0],a=o[1]):1===o.length&&(a=o[0]),t.length<e||t.length>n)throw a}}},n={};function a(e){var r=n[e];if(void 0!==r)return r.exports;var o=n[e]={exports:{}};return t[e].call(o.exports,o,o.exports,a),o.exports}a.d=(t,e)=>{for(var n in e)a.o(e,n)&&!a.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},a.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),a.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var r={};(()=>{a.r(r),a.d(r,{BrowserUIClient:()=>Y});var t=function(){return t=Object.assign||function(t){for(var e,n=1,a=arguments.length;n<a;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},t.apply(this,arguments)},e={Identity:"identity",X:"x",Y:"y",Z:"z",H:"h",T:"t",S:"s"},n={RX:"rx",RY:"ry",RZ:"rz"},o={CNOT:"cnot",CCNOT:"ccnot"},i=t(t(t({},e),n),o);function u(t){var a=[];return function(t,e){t.push("OPENQASM 2.0;"),t.push('include "qelib1.inc";'),t.push(""),t.push("qreg q[".concat(e.size,"];"))}(a,t),function(t,a){a.circuit.forEach((function(a){a.forEach((function(a,r){if(a){var i=function(t,a){switch(t.type){case e.X:case e.Y:case e.Z:case e.H:case e.S:case e.T:return function(t,n){var a="q[".concat(n,"]");switch(t.type){case e.X:return"x ".concat(a,";");case e.Y:return"y ".concat(a,";");case e.Z:return"z ".concat(a,";");case e.H:return"h ".concat(a,";");case e.S:return"s ".concat(a,";");case e.T:return"t ".concat(a,";");default:throw new Error("applySingleGate: cannot apply unknown gate: ".concat(t.type))}}(t,a);case n.RX:case n.RY:case n.RZ:return function(t,e){var a=1===t.param?"(pi)":0===t.param?"(0)":"(pi * ".concat(t.param,")"),r="".concat(a," q[").concat(e,"]");switch(t.type){case n.RX:return"rx".concat(r,";");case n.RY:return"ry".concat(r,";");case n.RZ:return"rz".concat(r,";");default:throw new Error("applyParametricSingleGate: cannot apply unknown gate: ".concat(t.type))}}(t,a);case o.CNOT:case o.CCNOT:return function(t,e){var n=t.controllQubitIndex.map((function(t){return"q[".concat(t,"]")})).join(",");switch(t.type){case o.CNOT:return"cx ".concat(n,",q[").concat(e,"];");case o.CCNOT:return"ccx ".concat(n,",q[").concat(e,"];");default:throw new Error("applyMultiGate: cannot apply unknown gate: ".concat(t.type))}}(t,a);default:return""}}(a,r);t.push(i)}}))}))}(a,t),a.join("\n")}function s(t){var e=new Set;return t.forEach((function(t){t.forEach((function(t){t&&e.add(t.type)}))})),e}function c(t){if(!t.observable||0===t.observable.length||0===t.observable[0].operators.length)return!0;var e=function(t){var e=new Set;return t.forEach((function(t){t.operators.forEach((function(t){t&&e.add(t)}))})),e}(t.observable);return!(e.has("x")||e.has("y")||e.has("z"))}var l=function(t){return Object.values(e).some((function(e){return e===t}))},p=function(t){return Object.values(n).some((function(e){return e===t}))},d=function(t){return Object.values(o).some((function(e){return e===t}))},m="    ";function f(t,a){var r=[];return function(t,e){t.push("import pennylane as qml"),t.push("from numpy import pi"),t.push(""),t.push('device = qml.device("default.qubit", wires='.concat(e.size,")"))}(r,t),r.push(""),function(t,a){t.push("@qml.qnode(device)"),t.push("def circuit():"),a.circuit.forEach((function(a){a.forEach((function(a,r){if(a){var i=function(t,a){switch(t.type){case e.X:case e.Y:case e.Z:case e.H:case e.S:case e.T:return function(t,n){switch(t.type){case e.X:return"qml.PauliX(wires=".concat(n,")");case e.Y:return"qml.PauliY(wires=".concat(n,")");case e.Z:return"qml.PauliZ(wires=".concat(n,")");case e.H:return"qml.Hadamard(wires=".concat(n,")");case e.S:return"qml.S(wires=".concat(n,")");case e.T:return"qml.T(wires=".concat(n,")");default:throw new Error("applySingleGate: cannot apply unknown gate: ".concat(t.type))}}(t,a);case n.RX:case n.RY:case n.RZ:return function(t,e){var a=t.param;switch(t.type){case n.RX:return"qml.RX(pi * ".concat(a,", wires=").concat(e,")");case n.RY:return"qml.RY(pi * ".concat(a,", wires=").concat(e,")");case n.RZ:return"qml.RZ(pi * ".concat(a,", wires=").concat(e,")");default:throw new Error("applyParametricSingleGate: cannot apply unknown gate: ".concat(t.type))}}(t,a);case o.CNOT:case o.CCNOT:return function(t,e){switch(t.type){case o.CNOT:return"qml.CNOT(wires=[".concat(t.controllQubitIndex[0],", ").concat(e,"])");case o.CCNOT:return"qml.Toffoli(wires=[".concat(t.controllQubitIndex.join(", "),", ").concat(e,"])");default:throw new Error("applyMultiGate: cannot apply unknown gate: ".concat(t.type))}}(t,a);default:return""}}(a,r);t.push(m+i)}}))}))}(r,t),function(t,n,a){var r;r=c(n)?{observable:[{operators:Array(a).fill(void 0),coefficient:1}]}:n;var o="return ".concat(r.observable.map((function(t){var n=t.operators.map((function(t,n){return function(t,n){if(!t)return"qml.Identity(".concat(n,")");switch(t){case e.X:return"qml.PauliX(".concat(n,")");case e.Y:return"qml.PauliY(".concat(n,")");case e.Z:return"qml.PauliZ(".concat(n,")");default:throw new Error("applyObservableOperator: cannot apply unknown operator: ".concat(t))}}(t,n)}));return"qml.expval(".concat(t.coefficient," * ").concat(n.join(" @ "),")")})).join(", "));t.push(m+o),t.push(""),t.push("r = circuit()"),r.observable.length>2?t.push("print(sum(r))"):t.push("print(r)")}(r,a,t.size),r.join("\n")}function h(t){return t.has("rx")||t.has("ry")||t.has("rz")}function v(t,a){var r=[];return function(t,e){e&&t.push("from numpy import pi"),t.push("from qiskit import *"),t.push("from qiskit.opflow import X, Y, Z, I, StateFn, PauliExpectation, CircuitSampler"),t.push("from qiskit.opflow.expectations import AerPauliExpectation, MatrixExpectation"),t.push("from qiskit.opflow.state_fns import CircuitStateFn"),t.push("from qiskit.utils import QuantumInstance")}(r,h(s(t.circuit))),r.push(""),function(t,e){t.push("qc = QuantumCircuit()"),t.push("qr = QuantumRegister(".concat(e.size,", 'qreg')")),t.push("qc.add_register(qr)")}(r,t),r.push(""),function(t,a){a.circuit.forEach((function(a){a.forEach((function(a,r){if(a){var i=function(t,a){switch(t.type){case e.X:case e.Y:case e.Z:case e.H:case e.S:case e.T:return function(t,n){switch(t.type){case e.X:return"qc.x(qr[".concat(n,"])");case e.Y:return"qc.y(qr[".concat(n,"])");case e.Z:return"qc.z(qr[".concat(n,"])");case e.H:return"qc.h(qr[".concat(n,"])");case e.S:return"qc.s(qr[".concat(n,"])");case e.T:return"qc.t(qr[".concat(n,"])");default:throw new Error("applySingleGate: cannot apply unknown gate: ".concat(t.type))}}(t,a);case n.RX:case n.RY:case n.RZ:return function(t,e){var a=t.param;switch(t.type){case n.RX:return"qc.rx(pi * ".concat(a,", qr[").concat(e,"])");case n.RY:return"qc.ry(pi * ".concat(a,", qr[").concat(e,"])");case n.RZ:return"qc.rz(pi * ".concat(a,", qr[").concat(e,"])");default:throw new Error("applyParametricSingleGate: cannot apply unknown gate: ".concat(t.type))}}(t,a);case o.CNOT:case o.CCNOT:return function(t,e){switch(t.type){case o.CNOT:return"qc.cx(qr[".concat(t.controllQubitIndex[0],"], qr[").concat(e,"])");case o.CCNOT:var n=t.controllQubitIndex.map((function(t){return"qr[".concat(t,"]")})).join(", ");return"qc.ccx(".concat(n,", qr[").concat(e,"])");default:throw new Error("applyMultiGate: cannot apply unknown gate: ".concat(t.type))}}(t,a);default:return""}}(a,r);t.push(i)}}))}))}(r,t),r.push(""),function(t,e,n){var a;a=c(e)?{observable:[{operators:Array(n).fill(void 0),coefficient:1}]}:e,t.push("psi = CircuitStateFn(qc)"),t.push("vector_sim = Aer.get_backend('statevector_simulator')"),t.push("q_instance = QuantumInstance(vector_sim, shots=1)");var r="op = ".concat(a.observable.map((function(t){var e=t.operators.map((function(t){return t?t.toUpperCase():"I"})).reverse().join("^");return"(".concat(t.coefficient," * ").concat(e,")")})).join(" + "));t.push(r),t.push("measurable_expression = StateFn(op, is_measurement=True).compose(psi)"),t.push("expectation = AerPauliExpectation().convert(measurable_expression)"),t.push("sampler = CircuitSampler(vector_sim).convert(expectation)")}(r,a,t.size),r.push("print('Sampled:', sampler.eval().real)"),r.join("\n")}var b="from numpy import pi",y="from qulacs import QuantumState, QuantumCircuit, Observable",g="from qulacs import QuantumState, ParametricQuantumCircuit, Observable",x="from qulacs.gate import",_="circuit.update_quantum_state(state)",w="print(expectation_value)";function q(t,a){var r=s(t.circuit),u=h(r),l=[];return function(t,e,n){if(n?(t.push(b),t.push(g)):t.push(y),e.size>0){var a=x;Array.from(e).sort().forEach((function(t,n){var r=function(t){return t===i.CCNOT?"TOFFOLI":t.toUpperCase()}(t);a+=" ".concat(r),n<e.size-1&&(a+=",")})),t.push(a)}}(l,r,u),l.push(""),function(t,a,r){t.push(function(t){return"state = QuantumState(".concat(t,")\nstate.set_zero_state()")}(a.size)),t.push(function(t,e){return e?"circuit = ParametricQuantumCircuit(".concat(t,")"):"circuit = QuantumCircuit(".concat(t,")")}(a.size,r)),t.push(""),function(t,a){a.forEach((function(a){a.forEach((function(a,r){if(a){var i=function(t,a){switch(t.type){case e.X:case e.Y:case e.Z:case e.H:case e.S:case e.T:return function(t,n){switch(t.type){case e.X:return"circuit.add_gate(X(".concat(n,"))");case e.Y:return"circuit.add_gate(Y(".concat(n,"))");case e.Z:return"circuit.add_gate(Z(".concat(n,"))");case e.H:return"circuit.add_gate(H(".concat(n,"))");case e.S:return"circuit.add_gate(S(".concat(n,"))");case e.T:return"circuit.add_gate(T(".concat(n,"))");default:throw new Error("applySingleGate: cannot apply unknown gate: ".concat(t.type))}}(t,a);case n.RX:case n.RY:case n.RZ:return function(t,e){var a=t.param;switch(t.type){case n.RX:return"circuit.add_gate(RX(".concat(e,", pi * ").concat(a,"))");case n.RY:return"circuit.add_gate(RY(".concat(e,", pi * ").concat(a,"))");case n.RZ:return"circuit.add_gate(RZ(".concat(e,", pi * ").concat(a,"))");default:throw new Error("applyParametricSingleGate: cannot apply unknown gate: ".concat(t.type))}}(t,a);case o.CNOT:case o.CCNOT:return function(t,e){switch(t.type){case o.CNOT:return"circuit.add_gate(CNOT(".concat(t.controllQubitIndex[0],", ").concat(e,"))");case o.CCNOT:return"circuit.add_gate(TOFFOLI(".concat(t.controllQubitIndex.join(", "),", ").concat(e,"))");default:throw new Error("applyMultiGate: cannot apply unknown gate: ".concat(t.type))}}(t,a);default:return""}}(a,r);t.push(i)}}))}))}(t,a.circuit),t.push(_)}(l,t,u),l.push(""),function(t,e,n){var a;a=c(e)?{observable:[{operators:[],coefficient:1}]}:e,t.push("expectation_value = 0"),a.observable.forEach((function(e){t.push("copied_state = state.copy()"),t.push("observable = Observable(".concat(n,")"));var a="";e.operators.forEach((function(t,e){t&&(e>0&&a.length>0&&(a+=" "),a+="".concat(t.toUpperCase()," ").concat(e))})),t.push("observable.add_operator(".concat(e.coefficient,', "').concat(a,'")')),t.push("expectation_value += observable.get_expectation_value(copied_state)")}))}(l,a,t.size),l.push(w),l.join("\n")}function j(t){var e=[];return function(t,e){var n;(n=c(e)?{observable:[{operators:[void 0],coefficient:0}]}:e).observable.forEach((function(e,a){var r="";e.operators.forEach((function(t,e){t&&(e>0&&r.length>0&&(r+=" "),r+="".concat(t.toUpperCase()).concat(e))})),t.push("(".concat(e.coefficient,"+0j) [").concat(r,"]").concat(a===n.observable.length-1?"":" +"))}))}(e,t),e.join("\n")}var O={Qasm2:"qasm2"},C={OpenFermion:"openFermion"},R=function(t,e,n){if(n||2===arguments.length)for(var a,r=0,o=e.length;r<o;r++)!a&&r in e||(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))};var S=/^(x|y|z|h|t|s|rx|ry|rz|cx|ccx)(\((.+)\))* q\[/,M={isHeader:function(t){return-1!==t.indexOf("OPENQASM 2.0")},isInclude:function(t){return-1!==t.indexOf('include "qelib1.inc"')},isGate:function(t){return!!S.exec(t)}};function k(t){switch(t){case"x":return e.X;case"y":return e.Y;case"z":return e.Z;case"h":return e.H;case"t":return e.T;case"s":return e.S;case"rx":return n.RX;case"ry":return n.RY;case"rz":return n.RZ;case"cx":return o.CNOT;case"ccx":return o.CCNOT;default:throw new Error("unknown gate type")}}function E(t,e){var n=-1;return t.forEach((function(t,a){t.forEach((function(t,r){r===e&&t&&(n=Math.max(n,a))}))})),n}function T(t,e){t.push(Array(e).fill(void 0))}function I(t){try{var n=t.replace(/(\r\n|\n|\r)/gm,"\n").split("\n"),a=[];n.forEach((function(t){var e=/\((.+)\+0j\)\s*\[(.*)\]\s*\+*/.exec(t);if(e){var n=parseFloat(e[1]),r=Array.from(t.matchAll(/([X|Y|Z])(\d)/g),(function(t){return{gate:t[1],index:parseInt(t[2],10)}}));a.push({coefficient:n,operators:r})}}));var r=[];return a.forEach((function(t){var n=Math.max.apply(null,t.operators.map((function(t){return t.index})).concat(1)),a=Array(n).fill(void 0);t.operators.forEach((function(t){if(t){var n=function(t){switch(t){case"X":return e.X;case"Y":return e.Y;case"Z":return e.Z;default:return null}}(t.gate);n&&(a[t.index]=n)}}));var o={coefficient:t.coefficient,operators:a};r.push(o)})),{isSucceeded:!0,observable:{observable:r}}}catch(t){return{isSucceeded:!1}}}function Q(t){var e,n,a=(e=t.circuitType,n=t.text,e===O.Qasm2?function(t){var e=[];try{var n=t.replace(/(\r\n|\n|\r)/gm,"\n").split("\n"),a=n.find((function(t){return-1!==t.indexOf("qreg")})),r=parseInt(/qreg\s+q\[(.*)\]/.exec(a)[1],10);n.forEach((function(t){var n=function(t){var e=function(t){return/^\s*(.*)/.exec(t)[1].replace("'",'"')}(t);return M.isGate(e)?function(t){var e=S.exec(t),n=e[1],a=e[3]?function(t){var e=t.replace("pi","1");if(/[^\d+\-*/\s.]/.exec(e))throw new Error("theta include illegal string: ".concat(t));for(var n=Array.from(e.matchAll(/([\d.]+|\+|-|\*|\/)/g),(function(t){return t[0]})),a=parseFloat(n[0]),r=1;r<n.length;r+=1){switch(n[r]){case"+":a+=parseFloat(n[r+1]);break;case"-":a-=parseFloat(n[r+1]);break;case"*":a*=parseFloat(n[r+1]);break;case"/":a/=parseFloat(n[r+1]);break;default:continue}r+=1}return-1===t.indexOf("pi")&&(a/=Math.PI),a}(e[3]):void 0,r=Array.from(t.matchAll(/q\[(\d)\]/g),(function(t){return parseInt(t[1],10)}));return{gate:k(n),qubitIndex:r,param:a}}(e):null}(t);n&&e.push(n)}));var o=[Array(r).fill(void 0)];return e.forEach((function(t){!function(t,e,n){var a,r=Array(n).fill(void 0),o=e.qubitIndex[e.qubitIndex.length-1],i=e.gate;(a=l(i)?{type:i,size:1}:p(i)?{type:i,size:1,param:e.param}:d(i)?{type:i,size:e.qubitIndex.length,controllQubitIndex:e.qubitIndex.slice(0,e.qubitIndex.length-1)}:null)&&(r[o]=a),t.push(r)}(o,t,r)})),{isSucceeded:!0,circuit:{circuit:function(t,e){var n=[];return T(n,e),t.forEach((function(t){t.forEach((function(t,a){if(t)if(l(t.type)||p(t.type)){for(var r=E(n,a);n.length<=r+1;)T(n,e);n[r+1][a]=t}else if(d(t.type)){var o=R([],Array(e),!0).map((function(t,e){return e})),i=t.controllQubitIndex.concat(a),u=Math.max.apply(null,i),s=Math.min.apply(null,i);i=o.slice(s,u+1);for(var c=Math.max.apply(null,i.map((function(t){return E(n,t)})));n.length<=c+1;)T(n,e);i.forEach((function(e){if(n[c+1][e]=t,e!==a){var r=JSON.parse(JSON.stringify(t));r.controllQubitIndex=[],n[c+1][e]=r}}))}}))})),n.forEach((function(t,e){t.forEach((function(t,a){t&&d(t.type)&&0===t.controllQubitIndex.length&&(n[e][a]=void 0)}))})),n}(o,r),size:r}}}catch(t){return{isSucceeded:!1}}}(n):{isSucceeded:!1});return a.isSucceeded?Promise.resolve(a.circuit):Promise.reject()}var Z=a(458);function N(t,a,r){switch(t.type){case e.X:a.x();break;case e.Y:a.y();break;case e.Z:a.z();break;case e.H:a.h();break;case e.T:a.t();break;case e.S:a.s();break;case n.RX:a.rotateX(t.param*Math.PI);break;case n.RY:a.rotateY(t.param*Math.PI);break;case n.RZ:a.rotateZ(t.param*Math.PI);break;case o.CNOT:var i=t.controllQubitIndex[0];a.cnot(r[i]);break;case o.CCNOT:var u=t.controllQubitIndex[0],s=t.controllQubitIndex[1];a.toffoli(r[u],r[s])}}var G,P=(G=function(t,e){return G=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},G(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}G(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),A=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return P(e,t),e.prototype.getStateVectorWithExpectationValue=function(t,e){var n=V(t);return{stateVector:n[0].simulated.getStateVector(),expectationValue:L(n,e)}},e.prototype.getExpectationValueMap=function(t,e,n,a,r){if(a<0)throw new Error("QramanaComputeDriver#getExpectationValueMap: invalid steps");if(0===a)return[];var o=[];function i(a){var r=L(V(t,{position:n,param:a}),e);o.push({param:a,expectationValue:r})}i(0);for(var u=1;u<a;u+=1)i(u/(a-1)*r);return o},e.prototype.runShotTask=function(t,e){for(var n=Math.pow(2,t.size),a=new Array(n).fill(0),r=V(t),o=function(t){var e=r[0].simulated.clone().qubits.map((function(t){return t.measure()})),n=0;e.forEach((function(t,a){if(0!==t){var r=e.length-a-1;n+=Math.pow(2,r)}})),a[n]+=1},i=0;i<e;i+=1)o();return a},e}((function(){}));function V(t,e){var n=function(t){for(var e=[new Z.xz({value:0})],n=1;n<t;n+=1){var a=new Z.xz({value:0});e[0].simulated.mergeStateVector(a),e.push(a)}return e}(t.size);return t.circuit.forEach((function(t,a){t.forEach((function(t,r){if(t){var o=n[r];e&&a===e.position.step&&r===e.position.index?N({size:1,type:t.type,param:e.param},o,n):N(t,o,n)}}))})),n}function L(t,e){var n;n=c(e)?{observable:[{operators:[],coefficient:1}]}:e;var a=0;return n.observable.forEach((function(e){var n=t[0].simulated.clone().qubits,r=n[0].simulated.getStateVector();e.operators.forEach((function(t,e){t&&N({type:t,size:1},n[e],n)}));var o,i,u,s=(o=r,i=n[0].simulated.getStateVector(),u={re:0,im:0},o.forEach((function(t,e){var n,a;u=function(t,e){return{re:t.re+e.re,im:t.im+e.im}}((n={re:t.re,im:-1*t.im},a=i[e],{re:n.re*a.re-n.im*a.im,im:n.re*a.im+n.im*a.re}),u)})),u).re;a+=s*e.coefficient})),a}var D=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function a(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),Y=function(t){function e(e){var n=t.call(this,e)||this;return n.computeDriver=new A,n}return D(e,t),e.prototype.validate=function(t){return n=(e=t).circuitInformation.size,a=0,r=0,e.circuitInformation.circuit.forEach((function(t){t&&(a=Math.max(a,t.length))})),e.observableInformation.observable.forEach((function(t){t&&t.operators&&(r=Math.max(r,t.operators.length))})),!(n<a||n<r);var e,n,a,r},e.prototype.update=function(t){if(!this.validate(t))return Promise.reject(new Error("invalid uiState"));this.uiState=t;var e,n,a=this.computeDriver.getStateVectorWithExpectationValue(t.circuitInformation,t.observableInformation),r=a.stateVector.map((function(t){return e=t,Math.sqrt(Math.pow(e.re,2)+Math.pow(e.im,2));var e}));return Promise.resolve({expectationValue:a.expectationValue,stateVector:a.stateVector,stateVectorAbsoluted:r,stateVectorArgument:a.stateVector.map((function(t){return e=t,Math.atan2(e.im,e.re)/Math.PI;var e})),probabilityVector:r.map((function(t){return Math.pow(t,2)})),codes:{translateCodes:(e=t.circuitInformation,n=t.observableInformation,{qulacs:q(e,n),qiskit:v(e,n),pennylane:f(e,n)}),circuitCodes:z(t.circuitInformation),observableCodes:X(t.observableInformation)}})},e.prototype.requestParametricExpectedValues=function(t){if(!this.uiState)return Promise.reject(new Error("Need Circuit information before request expected values"));var e=this.computeDriver.getExpectationValueMap(this.uiState.circuitInformation,this.uiState.observableInformation,t.position,t.steps,this.parametricGateRange);return Promise.resolve({steps:t.steps,expectationValueMap:e})},e.prototype.startShot=function(t){if(!this.uiState)return Promise.reject(new Error("Need Circuit information before request start shots"));var e=this.computeDriver.runShotTask(this.uiState.circuitInformation,t.shot),n=new Array(Math.pow(2,this.uiState.circuitInformation.size)).fill(0);return e.forEach((function(t){n[t]+=1})),n=n.map((function(e){return e/t.shot})),Promise.resolve({samplingMap:e,samplingProbabilityMap:n})},e.prototype.textToCircuitInformation=function(t){return Q(t)},e.prototype.textToObservableInformation=function(t){return function(t){var e,n,a=(e=t.observableType,n=t.text,e===C.OpenFermion?I(n):{isSucceeded:!1});return a.isSucceeded?Promise.resolve(a.observable):Promise.reject()}(t)},e}((function(t){var e;this.parametricGateRange=null!==(e=t.parametricGateRange)&&void 0!==e?e:2}));function z(t){return{qasm2:u(t)}}function X(t){return{openFermion:j(t)}}})(),e.v=r})()}},function(t){t.O(0,[401,601,774,888,179],(function(){return e=87314,t(t.s=e);var e}));var e=t.O();_N_E=e}]);